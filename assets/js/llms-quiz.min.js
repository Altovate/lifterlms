!function(t){var e={$buttons:null,$container:null,$ui:null,attempt_key:null,current_question:0,total_questions:0,questions:{},validators:{},status:null,bind:function(){var e=this;t("#llms_start_quiz").on("click",function(t){t.preventDefault(),e.start_quiz()}),t(".llms-donut").each(function(){LLMS.Donut(t(this))}),t("#llms-quiz-attempt-select").on("change",function(){var e=t(this).val();e&&(window.location.href=e)}),t(window).on("beforeunload",function(){if(e.status)return LLMS.l10n.translate("Are you sure you wish to quit this quiz attempt?")}),t(window).on("unload",function(){e.status&&e.complete_quiz()}),t(document).on("llms-post-append-question",e.post_append_question),this.register_validator("content",this.validate),this.register_validator("choice",this.validate_choice),this.register_validator("picture_choice",this.validate_choice),this.register_validator("true_false",this.validate_choice)},add_error:function(e){var s=this;s.$container.find(".llms-error").remove();var i=t('<p class="llms-error">'+e+'<a href="#"><i class="fa fa-times-circle" aria-hidden="true"></i></a></p>');i.on("click","a",function(t){t.preventDefault(),i.fadeOut("200"),setTimeout(function(){i.remove()},210)}),s.$container.append(i)},answer_question:function(t){var e,s=this,i=this.$container.find(".llms-question-wrapper"),n=i.attr("data-type");return this.validators[n]?(e=this.validators[n](i),e&&!0===e.valid&&e.answer?void LLMS.Ajax.call({data:{action:"quiz_answer_question",answer:e.answer,attempt_key:s.attempt_key,question_id:i.attr("data-id"),question_type:i.attr("data-type")},beforeSend:function(){var e=t.hasClass("llms-button-quiz-complete")?LLMS.l10n.translate("Grading Quiz..."):LLMS.l10n.translate("Loading Question...");s.toggle_loader("show",e),s.update_progress_bar("increment")},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.html)t.data.question_id&&s.questions["q-"+t.data.question_id]?s.load_question(s.questions["q-"+t.data.question_id]):s.load_question(t.data.html);else if(t.data&&t.data.redirect)s.redirect(t.data.redirect);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}}):s.add_error(e.valid)):void console.log("No validator registered for question type "+n)},complete_quiz:function(){var t=this;LLMS.Ajax.call({data:{action:"quiz_end",attempt_key:t.attempt_key},beforeSend:function(){t.toggle_loader("show","Grading Quiz...")},success:function(e){if(t.toggle_loader("hide"),e.data&&e.data.redirect)t.redirect(e.data.redirect);else if(e.message)t.$container.append("<p>"+e.message+"</p>");else{var s=LLMS.l10n.translate("An unknown error occurred. Please try again.");t.$container.append("<p>"+s+"</p>")}}})},get_question_index:function(t){return Object.keys(this.questions).indexOf("q-"+t)},redirect:function(t){this.toggle_loader("show","Grading Quiz..."),this.status=null,window.location.href=t},previous_question:function(){var t=this;t.toggle_loader("show",LLMS.l10n.translate("Loading Question...")),t.update_progress_bar("decrement");var e=Object.keys(t.questions),s=e.indexOf("q-"+t.current_question),i=e[0];s>=1&&(i=e[s-1]),setTimeout(function(){t.toggle_loader("hide"),t.load_question(t.questions[i])},100)},register_validator:function(t,e){this.validators[t]=e},start_quiz:function(){var e=this;this.load_ui_elements(),this.$ui=t("#llms-quiz-ui"),this.$buttons=t("#llms-quiz-nav button"),this.$container=t("#llms-quiz-question-wrapper"),t("#llms-next-question, #llms-complete-quiz").on("click",function(s){s.preventDefault(),e.answer_question(t(this))}),t("#llms-prev-question").on("click",function(t){t.preventDefault(),e.previous_question()}),LLMS.Ajax.call({data:{action:"quiz_start",attempt_key:t("#llms-attempt-key").val(),lesson_id:t("#llms-lesson-id").val(),quiz_id:t("#llms-quiz-id").val()},beforeSend:function(){e.status=!0,t("#llms-quiz-wrapper, #quiz-start-button").remove(),t("html, body").stop().animate({scrollTop:0},500),e.toggle_loader("show",LLMS.l10n.translate("Loading Quiz..."))},error:function(t,e,s){console.log(t,e,s)},success:function(t){if(e.toggle_loader("hide"),t.data&&t.data.html)t.data.time_limit&&e.start_quiz_timer(t.data.time_limit),e.attempt_key=t.data.attempt_key,e.total_questions=t.data.total,e.load_question(t.data.html);else if(t.message)e.$container.append("<p>"+t.message+"</p>");else{var s=LLMS.l10n.translate("An unknown error occurred. Please try again.");e.$container.append("<p>"+s+"</p>")}}})},start_quiz_timer:function(e){var s=t('<div class="llms-quiz-timer" id="llms-quiz-timer" />'),i=LLMS.l10n.translate("Time Remaining");s.append('<i class="fa fa-clock-o" aria-hidden="true"></i><span class="screen-reader-text">'+i+"</span>"),s.append('<div id="llms-tiles" class="llms-tiles"></div>'),t("#llms-quiz-header").append(s);var n,a,l,o,r=this,u=(new Date).getTime()+60*e*1e3,d=60*e*1e3,c=document.getElementById("llms-tiles");setTimeout(function(){r.complete_quiz()},d+1e3),this.getCountdown(e,u,d,n,a,l,o,c),setInterval(function(){r.getCountdown(e,u,d,n,a,l,o,c)},1e3)},trigger:function(e){var s=this;"answer_question"===e&&(this.get_question_index(s.current_question)===s.total_questions?t("#llms-complete-quiz").trigger("click"):t("#llms-next-question").trigger("click"))},load_question:function(e){var s=t(e),i=s.attr("data-id");this.questions["q-"+i]||(this.questions["q-"+i]=s),this.update_progress(i),this.current_question=i,t(document).trigger("llms-pre-append-question",s),this.$container.append(s),t(document).trigger("llms-post-append-question",s)},load_ui_elements:function(){var e=t('<div class="llms-quiz-ui" id="llms-quiz-ui" />'),s=t('<header class="llms-quiz-header" id="llms-quiz-header" />');$footer=t('<footer class="llms-quiz-nav" id="llms-quiz-nav" />'),$footer.append('<button class="button large llms-button-action" id="llms-next-question" name="llms_next_question" type="submit">'+LLMS.l10n.translate("Next Question")+"</button>"),$footer.append('<button class="button large llms-button-action llms-button-quiz-complete" id="llms-complete-quiz" name="llms_complete_quiz" type="submit" style="display:none;">'+LLMS.l10n.translate("Complete Quiz")+"</button>"),$footer.append('<button class="button llms-button-secondary" id="llms-prev-question" name="llms_prev_question" type="submit" style="display:none;">'+LLMS.l10n.translate("Previous Question")+"</button>"),s.append('<div class="llms-progress"><div class="progress-bar-complete"></div></div>'),$footer.append('<div class="llms-quiz-counter" id="llms-quiz-counter"><span class="llms-current"></span><span class="llms-sep">/</span><span class="llms-total"></span></div>'),e.append(s).append('<div class="llms-quiz-question-wrapper" id="llms-quiz-question-wrapper" />').append($footer),t("#llms-quiz-wrapper").after(e)},post_append_question:function(e,s){var i=t(s);i.find("audio").length&&wp.mediaelement.initialize()},toggle_loader:function(t,e){"show"===t?(e=e||LLMS.l10n.translate("Loading..."),this.$buttons.attr("disabled","disabled"),this.$container.empty(),LLMS.Spinner.start(this.$container),this.$container.append('<div class="llms-quiz-loading">'+LLMS.l10n.translate(e)+"</div>")):(LLMS.Spinner.stop(this.$container),this.$buttons.removeAttr("disabled"),this.$container.find(".llms-quiz-loading").remove())},update_progress:function(e){var s=this.get_question_index(e);-1!==s&&(s++,t("#llms-quiz-counter .llms-current").text(s),1===s&&(t("#llms-quiz-counter .llms-total").text(this.total_questions),t("#llms-quiz-counter").show()),s>=2?t("#llms-prev-question").show():t("#llms-prev-question").hide(),s===this.total_questions?(t("#llms-next-question").hide(),t("#llms-complete-quiz").show()):(t("#llms-next-question").show(),t("#llms-complete-quiz").hide()))},update_progress_bar:function(t){var e=this.get_question_index(this.current_question);"increment"===t?e++:e--,progress=e/this.total_questions*100,this.$ui.find(".progress-bar-complete").css("width",progress+"%")},getCountdown:function(e,s,i,n,a,l,o,r){var u=(new Date).getTime(),d=(s-u)/1e3;d>=0&&(1e3*d<i/2&&t("#llms-quiz-timer").addClass("color-half"),1e3*d<i/4&&(t("#llms-quiz-timer").removeClass("color-half"),t("#llms-quiz-timer").addClass("color-empty")),n=this.pad(parseInt(d/86400)),d%=86400,a=this.pad(parseInt(d/3600)),d%=3600,l=this.pad(parseInt(d/60)),o=this.pad(parseInt(d%60)),r.innerHTML='<span class="hours">'+a+'</span>:<span class="minutes">'+l+'</span>:<span class="seconds">'+o+"</span>")},pad:function(t){return(t<10?"0":"")+t},validate:function(t){return{answer:[],valid:!0}},validate_choice:function(e){var s=window.llms.quizzes.validate(e),i=e.find("input:checked");return i.length?i.each(function(){s.answer.push(t(this).val())}):s.valid=LLMS.l10n.translate("You must select an answer to continue."),s}};e.bind(),window.llms=window.llms||{},window.llms.quizzes=e}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMtcXVpei5qcyJdLCJuYW1lcyI6WyIkIiwicXVpeiIsIiRidXR0b25zIiwiJGNvbnRhaW5lciIsIiR1aSIsImF0dGVtcHRfa2V5IiwiY3VycmVudF9xdWVzdGlvbiIsInRvdGFsX3F1ZXN0aW9ucyIsInF1ZXN0aW9ucyIsInZhbGlkYXRvcnMiLCJzdGF0dXMiLCJiaW5kIiwic2VsZiIsInRoaXMiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0YXJ0X3F1aXoiLCJlYWNoIiwiTExNUyIsIkRvbnV0IiwidmFsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwibDEwbiIsInRyYW5zbGF0ZSIsImNvbXBsZXRlX3F1aXoiLCJkb2N1bWVudCIsInBvc3RfYXBwZW5kX3F1ZXN0aW9uIiwicmVnaXN0ZXJfdmFsaWRhdG9yIiwidmFsaWRhdGUiLCJ2YWxpZGF0ZV9jaG9pY2UiLCJhZGRfZXJyb3IiLCJtc2ciLCJmaW5kIiwicmVtb3ZlIiwiJGVyciIsImZhZGVPdXQiLCJzZXRUaW1lb3V0IiwiYXBwZW5kIiwiYW5zd2VyX3F1ZXN0aW9uIiwiJGJ0biIsInZhbGlkIiwiJHF1ZXN0aW9uIiwidHlwZSIsImF0dHIiLCJhbnN3ZXIiLCJBamF4IiwiY2FsbCIsImRhdGEiLCJhY3Rpb24iLCJxdWVzdGlvbl9pZCIsInF1ZXN0aW9uX3R5cGUiLCJiZWZvcmVTZW5kIiwiaGFzQ2xhc3MiLCJ0b2dnbGVfbG9hZGVyIiwidXBkYXRlX3Byb2dyZXNzX2JhciIsInN1Y2Nlc3MiLCJyIiwiaHRtbCIsImxvYWRfcXVlc3Rpb24iLCJyZWRpcmVjdCIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwiZ2V0X3F1ZXN0aW9uX2luZGV4IiwicWlkIiwiT2JqZWN0Iiwia2V5cyIsImluZGV4T2YiLCJ1cmwiLCJwcmV2aW91c19xdWVzdGlvbiIsImlkcyIsImN1cnIiLCJwcmV2X2lkIiwiZnVuYyIsImxvYWRfdWlfZWxlbWVudHMiLCJsZXNzb25faWQiLCJxdWl6X2lkIiwic3RvcCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJlcnJvciIsInMiLCJ0IiwidGltZV9saW1pdCIsInN0YXJ0X3F1aXpfdGltZXIiLCJ0b3RhbCIsInRvdGFsX21pbnV0ZXMiLCIkZWwiLCJkYXlzIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsInRhcmdldF9kYXRlIiwiRGF0ZSIsImdldFRpbWUiLCJjb3VudGRvd24iLCJnZXRFbGVtZW50QnlJZCIsImdldENvdW50ZG93biIsInNldEludGVydmFsIiwidHJpZ2dlciIsImV2ZW50IiwiJGh0bWwiLCJ1cGRhdGVfcHJvZ3Jlc3MiLCIkaGVhZGVyIiwiJGZvb3RlciIsImFmdGVyIiwibGVuZ3RoIiwid3AiLCJtZWRpYWVsZW1lbnQiLCJpbml0aWFsaXplIiwiZGlzcGxheSIsImVtcHR5IiwiU3Bpbm5lciIsInN0YXJ0IiwicmVtb3ZlQXR0ciIsImluZGV4IiwidGV4dCIsInNob3ciLCJoaWRlIiwiZGlyIiwicHJvZ3Jlc3MiLCJjc3MiLCJjdXJyZW50X2RhdGUiLCJzZWNvbmRzX2xlZnQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicGFkIiwicGFyc2VJbnQiLCJpbm5lckhUTUwiLCJuIiwicmV0IiwibGxtcyIsInF1aXp6ZXMiLCJjaGVja2VkIiwicHVzaCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBU0MsU0FBWUEsR0FFWixHQUFJQyxJQU1IQyxTQUFVLEtBTVZDLFdBQVksS0FNWkMsSUFBSyxLQU1MQyxZQUFhLEtBTWJDLGlCQUFrQixFQU1sQkMsZ0JBQWlCLEVBTWpCQyxhQU9BQyxjQVNBQyxPQUFRLEtBUVJDLEtBQU0sV0FFTCxHQUFJQyxHQUFPQyxJQUdYYixHQUFHLG9CQUFxQmMsR0FBSSxRQUFTLFNBQVVDLEdBQzlDQSxFQUFFQyxpQkFDRkosRUFBS0ssZUFJTmpCLEVBQUcsZUFBZ0JrQixLQUFNLFdBQ3hCQyxLQUFLQyxNQUFPcEIsRUFBR2EsU0FJaEJiLEVBQUcsNkJBQThCYyxHQUFJLFNBQVUsV0FDOUMsR0FBSU8sR0FBTXJCLEVB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QU16SSxFQUFHYSxNQUFPUSxTQUg1QmdILEVBQUkxRixNQUFReEIsS0FBS00sS0FBS0MsVUFBVywwQ0FPM0IyRyxHQU1UcEksR0FBS1UsT0FFTFcsT0FBT2dILEtBQU9oSCxPQUFPZ0gsU0FDckJoSCxPQUFPZ0gsS0FBS0MsUUFBVXRJLEdBRWxCeUkiLCJmaWxlIjoibGxtcy1xdWl6Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBMTE1TLCAkICovXG4vKiBqc2hpbnQgc3RyaWN0OiB0cnVlICovXG5cbi8qKlxuICogRnJvbnQgRW5kIFF1aXogQ2xhc3NcbiAqIEB0eXBlICAgICB7T2JqZWN0fVxuICogQHNpbmNlICAgIDEuMC4wXG4gKiBAdmVyc2lvbiAgMy4xNi45XG4gKi9cbjsoIGZ1bmN0aW9uKCAkICkge1xuXG5cdHZhciBxdWl6ID0ge1xuXG5cdFx0LyoqXG5cdFx0ICogU2VsZWN0b3Igb2YgYWxsIHRoZSBhdmFpbGFibGUgYnV0dG9uIGVsZW1lbnNcblx0XHQgKiBAdHlwZSAgb2JqXG5cdFx0ICovXG5cdFx0JGJ1dHRvbnM6IG51bGwsXG5cblx0XHQvKipcblx0XHQgKiBNYWluIFF1ZXN0aW9uIENvbnRhaW5lciBFbGVtZW50XG5cdFx0ICogQHR5cGUgIG9ialxuXHRcdCAqL1xuXHRcdCRjb250YWluZXI6IG51bGwsXG5cblx0XHQvKipcblx0XHQgKiBNYWluIFF1aXogY29udGFpbmVyIFVJIGVsZW1lbnRcblx0XHQgKiBAdHlwZSAgb2JqXG5cdFx0ICovXG5cdFx0JHVpOiBudWxsLFxuXG5cdFx0LyoqXG5cdFx0ICogQXR0ZW1wdCBrZXkgZm9yIHRoZSBjdXJyZW50IHF1aXpcblx0XHQgKiBAdHlwZSAge1t0eXBlXX1cblx0XHQgKi9cblx0XHRhdHRlbXB0X2tleTogbnVsbCxcblxuXHRcdC8qKlxuXHRcdCAqIFF1ZXN0aW9uIElEIG9mIHRoZSBjdXJyZW50IHF1ZXN0aW9uXG5cdFx0ICogQHR5cGUgIHtOdW1iZXJ9XG5cdFx0ICovXG5cdFx0Y3VycmVudF9xdWVzdGlvbjogMCxcblxuXHRcdC8qKlxuXHRcdCAqIFRvdGFsIG51bWJlciBvZiBxdWVzdGlvbnMgaW4gdGhlIGN1cnJlbnQgcXVpelxuXHRcdCAqIEB0eXBlICB7TnVtYmVyfVxuXHRcdCAqL1xuXHRcdHRvdGFsX3F1ZXN0aW9uczogMCxcblxuXHRcdC8qKlxuXHRcdCAqIE9iamVjdCBvZiBxdWl6IHF1ZXN0aW9uIEhUTUxcblx0XHQgKiBAdHlwZSAge09iamVjdH1cblx0XHQgKi9cblx0XHRxdWVzdGlvbnM6IHt9LFxuXG5cdFx0LyoqXG5cdFx0ICogVmFsaWRhdG9yIGZ1bmN0aW9ucyBmb3IgcXVlc3Rpb24gdHlwZXNcblx0XHQgKiBUaGlyZCBwYXJ0eSBjdXN0b20gcXVlc3Rpb24gdHlwZXMgY2FuIHJlZ2lzdGVyIHZhbGlkYXRvcnMgZm9yIHVzZSB3aGVuIGFuc3dlcmluZyBxdWVzdGlvc25cblx0XHQgKiBAdHlwZSAge09iamVjdH1cblx0XHQgKi9cblx0XHR2YWxpZGF0b3JzOiB7fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlY29yZHMgY3VycmVudCBzdGF0dXMgb2YgYSBxdWl6IHNlc3Npb25cblx0XHQgKiBJZiBhIHVzZXIgYXR0ZW1wdHMgdG8gbmF2aWdhdGUgYXdheSBmcm9tIGEgcXVpelxuXHRcdCAqIHdoaWxlIHRha2luZyB0aGUgcXVpeiB0aGV5J2xsIGJlIHdhcm5lZCB0aGF0IHRoZWlyIHByb2dyZXNzXG5cdFx0ICogd2lsbCBub3QgYmUgc2F2ZWQgaWYgdGhpcyBzdGF0dXMgaXMgbm90IG51bGxcblx0XHQgKiBAdHlwZSAgYm9vbGVhblxuXHRcdCAqL1xuXHRcdHN0YXR1czogbnVsbCxcblxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgRE9NIGV2ZW50c1xuXHRcdCAqIEByZXR1cm4gdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjZcblx0XHQgKi9cblx0XHRiaW5kOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQvLyBzdGFydCBxdWl6XG5cdFx0XHQkKCAnI2xsbXNfc3RhcnRfcXVpeicgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0c2VsZi5zdGFydF9xdWl6KCk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIGRyYXcgcXVpeiBncmFkZSBjaXJjdWxhciBjaGFydFxuXHRcdFx0JCggJy5sbG1zLWRvbnV0JyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRMTE1TLkRvbnV0KCAkKCB0aGlzICkgKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gcmVkaXJlY3QgdG8gYXR0ZW1wdCBvbiBhdHRlbXB0IHNlbGVjdGlvbiBjaGFuZ2Vcblx0XHRcdCQoICcjbGxtcy1xdWl6LWF0dGVtcHQtc2VsZWN0JyApLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciB2YWwgPSAkKCB0aGlzICkudmFsKCk7XG5cdFx0XHRcdGlmICggdmFsICkge1xuXHRcdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdmFsO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIHdhcm4gd2hlbiBxdWl6IGlzIHJ1bm5pbmcgYW5kIHVzZXIgdHJpZXMgdG8gbGVhdmUgdGhlIHBhZ2Vcblx0XHRcdCQoIHdpbmRvdyApLm9uKCAnYmVmb3JldW5sb2FkJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggc2VsZi5zdGF0dXMgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIExMTVMubDEwbi50cmFuc2xhdGUoICdBcmUgeW91IHN1cmUgeW91IHdpc2ggdG8gcXVpdCB0aGlzIHF1aXogYXR0ZW1wdD8nICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gY29tcGxldGUgdGhlIHF1aXogYXR0ZW1wdCB3aGVuIHVzZXIgbGVhdmVzIGlmIHRoZSBxdWl6IGlzIHJ1bm5pbmdcblx0XHRcdCQoIHdpbmRvdyApLm9uKCAndW5sb2FkJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggc2VsZi5zdGF0dXMgKSB7XG5cdFx0XHRcdFx0c2VsZi5jb21wbGV0ZV9xdWl6KCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblxuXHRcdFx0JCggZG9jdW1lbnQgKS5vbiggJ2xsbXMtcG9zdC1hcHBlbmQtcXVlc3Rpb24nLCBzZWxmLnBvc3RfYXBwZW5kX3F1ZXN0aW9uICk7XG5cblx0XHRcdC8vIHJlZ2lzdGVyIHZhbGlkYXRvcnNcblx0XHRcdHRoaXMucmVnaXN0ZXJfdmFsaWRhdG9yKCAnY29udGVudCcsIHRoaXMudmFsaWRhdGUgKTtcblx0XHRcdHRoaXMucmVnaXN0ZXJfdmFsaWRhdG9yKCAnY2hvaWNlJywgdGhpcy52YWxpZGF0ZV9jaG9pY2UgKTtcblx0XHRcdHRoaXMucmVnaXN0ZXJfdmFsaWRhdG9yKCAncGljdHVyZV9jaG9pY2UnLCB0aGlzLnZhbGlkYXRlX2Nob2ljZSApO1xuXHRcdFx0dGhpcy5yZWdpc3Rlcl92YWxpZGF0b3IoICd0cnVlX2ZhbHNlJywgdGhpcy52YWxpZGF0ZV9jaG9pY2UgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBBZGQgYW4gZXJyb3IgbWVzc2FnZSB0byB0aGUgVUlcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgbXNnICBlcnJvciBtZXNzYWdlIHN0cmluZ1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHRhZGRfZXJyb3I6IGZ1bmN0aW9uKCBtc2cgKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0c2VsZi4kY29udGFpbmVyLmZpbmQoICcubGxtcy1lcnJvcicgKS5yZW1vdmUoKTtcblx0XHRcdHZhciAkZXJyID0gJCggJzxwIGNsYXNzPVwibGxtcy1lcnJvclwiPicgKyBtc2cgKyAnPGEgaHJlZj1cIiNcIj48aSBjbGFzcz1cImZhIGZhLXRpbWVzLWNpcmNsZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L2E+PC9wPicgKTtcblx0XHRcdCRlcnIub24oICdjbGljaycsICdhJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0JGVyci5mYWRlT3V0KCAnMjAwJyApO1xuXHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkZXJyLnJlbW92ZSgpO1xuXHRcdFx0XHR9LCAyMTAgKTtcblx0XHRcdH0gKTtcblx0XHRcdHNlbGYuJGNvbnRhaW5lci5hcHBlbmQoICRlcnIgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBBbnN3ZXIgYSBRdWVzdGlvblxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkYnRuICAgalF1ZXJ5IG9iamVjdCBmb3IgdGhlIFwiTmV4dCBMZXNzb25cIiBidXR0b25cblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjZcblx0XHQgKi9cblx0XHRhbnN3ZXJfcXVlc3Rpb246IGZ1bmN0aW9uKCAkYnRuICkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdCRxdWVzdGlvbiA9IHRoaXMuJGNvbnRhaW5lci5maW5kKCAnLmxsbXMtcXVlc3Rpb24td3JhcHBlcicgKSxcblx0XHRcdFx0dHlwZSA9ICRxdWVzdGlvbi5hdHRyKCAnZGF0YS10eXBlJyApLFxuXHRcdFx0XHR2YWxpZDtcblxuXHRcdFx0aWYgKCAhIHRoaXMudmFsaWRhdG9yc1sgdHlwZSBdICkge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCAnTm8gdmFsaWRhdG9yIHJlZ2lzdGVyZWQgZm9yIHF1ZXN0aW9uIHR5cGUgJyArIHR5cGUgKTtcblx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHR9XG5cblx0XHRcdHZhbGlkID0gdGhpcy52YWxpZGF0b3JzWyB0eXBlIF0oICRxdWVzdGlvbiApO1xuXHRcdFx0aWYgKCAhIHZhbGlkIHx8IHRydWUgIT09IHZhbGlkLnZhbGlkIHx8ICF2YWxpZC5hbnN3ZXIgKSB7XG5cdFx0XHRcdHJldHVybiBzZWxmLmFkZF9lcnJvciggdmFsaWQudmFsaWQgKTtcblx0XHRcdH1cblxuXHRcdFx0TExNUy5BamF4LmNhbGwoIHtcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGFjdGlvbjogJ3F1aXpfYW5zd2VyX3F1ZXN0aW9uJyxcblx0XHRcdFx0XHRhbnN3ZXI6IHZhbGlkLmFuc3dlcixcblx0XHRcdFx0XHRhdHRlbXB0X2tleTogc2VsZi5hdHRlbXB0X2tleSxcblx0XHRcdFx0XHRxdWVzdGlvbl9pZDogJHF1ZXN0aW9uLmF0dHIoICdkYXRhLWlkJyApLFxuXHRcdFx0XHRcdHF1ZXN0aW9uX3R5cGU6ICRxdWVzdGlvbi5hdHRyKCAnZGF0YS10eXBlJyApLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdHZhciBtc2cgPSAkYnRuLmhhc0NsYXNzKCAnbGxtcy1idXR0b24tcXVpei1jb21wbGV0ZScgKSA/IExMTVMubDEwbi50cmFuc2xhdGUoICdHcmFkaW5nIFF1aXouLi4nICkgOiBMTE1TLmwxMG4udHJhbnNsYXRlKCAnTG9hZGluZyBRdWVzdGlvbi4uLicgKTtcblx0XHRcdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdzaG93JywgbXNnICk7XG5cblx0XHRcdFx0XHRzZWxmLnVwZGF0ZV9wcm9ncmVzc19iYXIoICdpbmNyZW1lbnQnICk7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIHIgKSB7XG5cblx0XHRcdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdoaWRlJyApO1xuXG5cdFx0XHRcdFx0aWYgKCByLmRhdGEgJiYgci5kYXRhLmh0bWwgKSB7XG5cblx0XHRcdFx0XHRcdC8vIGxvYWQgaHRtbCBmcm9tIHRoZSBjYWNoZWQgcXVlc3Rpb25zIGlmIGl0IGV4aXN0cyBhbHJlYWR5XG5cdFx0XHRcdFx0XHRpZiAoIHIuZGF0YS5xdWVzdGlvbl9pZCAmJiBzZWxmLnF1ZXN0aW9uc1sgJ3EtJyArIHIuZGF0YS5xdWVzdGlvbl9pZCBdICkge1xuXG5cdFx0XHRcdFx0XHRcdHNlbGYubG9hZF9xdWVzdGlvbiggc2VsZi5xdWVzdGlvbnNbICdxLScgKyByLmRhdGEucXVlc3Rpb25faWQgXSApO1xuXG5cdFx0XHRcdFx0XHQvLyBsb2FkIGh0bWwgZnJvbSBzZXJ2ZXIgaWYgdGhlIHF1ZXN0aW9uJ3MgbmV2ZXIgYmVlbiBzZWVuIGJlZm9yZVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5sb2FkX3F1ZXN0aW9uKCByLmRhdGEuaHRtbCApO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggci5kYXRhICYmIHIuZGF0YS5yZWRpcmVjdCApIHtcblxuXHRcdFx0XHRcdFx0c2VsZi5yZWRpcmVjdCggci5kYXRhLnJlZGlyZWN0ICk7XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCByLm1lc3NhZ2UgKSB7XG5cblx0XHRcdFx0XHRcdHNlbGYuJGNvbnRhaW5lci5hcHBlbmQoICc8cD4nICsgci5tZXNzYWdlICsgJzwvcD4nICk7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHR2YXIgbXNnID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyApO1xuXHRcdFx0XHRcdFx0c2VsZi4kY29udGFpbmVyLmFwcGVuZCggJzxwPicgKyBtc2cgKyAnPC9wPicgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDb21wbGV0ZSB0aGUgcXVpelxuXHRcdCAqIENhbGxlZCB3aGVuIHRpbWVkIHF1aXp6ZXMgcmVhY2ggdGltZSBsaW1pdFxuXHRcdCAqICYgZHVyaW5nIHVubG9hZCBldmVudHMgdG8gcmVjb3JkIHRoZSBhdHRlbXB0IGFzIGFiYW5kb25lZFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuOS4wXG5cdFx0ICovXG5cdFx0Y29tcGxldGVfcXVpejogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0TExNUy5BamF4LmNhbGwoIHtcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGFjdGlvbjogJ3F1aXpfZW5kJyxcblx0XHRcdFx0XHRhdHRlbXB0X2tleTogc2VsZi5hdHRlbXB0X2tleSxcblx0XHRcdFx0fSxcblx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdzaG93JywgJ0dyYWRpbmcgUXVpei4uLicgKTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggciApIHtcblxuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ2hpZGUnICk7XG5cblx0XHRcdFx0XHRpZiAoIHIuZGF0YSAmJiByLmRhdGEucmVkaXJlY3QgKSB7XG5cblx0XHRcdFx0XHRcdHNlbGYucmVkaXJlY3QoIHIuZGF0YS5yZWRpcmVjdCApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggci5tZXNzYWdlICkge1xuXG5cdFx0XHRcdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAnPHA+JyArIHIubWVzc2FnZSArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0dmFyIG1zZyA9IExMTVMubDEwbi50cmFuc2xhdGUoICdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLicgKTtcblx0XHRcdFx0XHRcdHNlbGYuJGNvbnRhaW5lci5hcHBlbmQoICc8cD4nICsgbXNnICsgJzwvcD4nICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0cmlldmUgdGhlIGluZGV4IG9mIGEgcXVlc3Rpb24gYnkgcXVlc3Rpb24gaWRcblx0XHQgKiBAcGFyYW0gICAgaW50ICAgcWlkICBXUCBQb3N0IElEIG9mIHRoZSBxdWVzdGlvblxuXHRcdCAqIEByZXR1cm4gICBpbnRcblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdGdldF9xdWVzdGlvbl9pbmRleDogZnVuY3Rpb24oIHFpZCApIHtcblxuXHRcdFx0cmV0dXJuIE9iamVjdC5rZXlzKCB0aGlzLnF1ZXN0aW9ucyApLmluZGV4T2YoICdxLScgKyBxaWQgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZWRpcmVjdCBvbiBxdWl6IGNvbWxwZXRpb24gLyB0aW1lb3V0XG5cdFx0ICogQHBhcmFtICAgIHN0cmluZyAgIHVybCAgcmVkaXJlY3QgdXJsXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy45LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0cmVkaXJlY3Q6IGZ1bmN0aW9uKCB1cmwgKSB7XG5cblx0XHRcdHRoaXMudG9nZ2xlX2xvYWRlciggJ3Nob3cnLCAnR3JhZGluZyBRdWl6Li4uJyApO1xuXHRcdFx0dGhpcy5zdGF0dXMgPSBudWxsO1xuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmw7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJuIHRvIHRoZSBwcmV2aW91cyBxdWVzdGlvblxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdCBcdCAqIEB2ZXJzaW9uICAzLjE2LjZcblx0XHQgKi9cblx0XHRwcmV2aW91c19xdWVzdGlvbjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0c2VsZi50b2dnbGVfbG9hZGVyKCAnc2hvdycsIExMTVMubDEwbi50cmFuc2xhdGUoICdMb2FkaW5nIFF1ZXN0aW9uLi4uJyApICk7XG5cdFx0XHRzZWxmLnVwZGF0ZV9wcm9ncmVzc19iYXIoICdkZWNyZW1lbnQnICk7XG5cblx0XHRcdHZhciBpZHMgPSBPYmplY3Qua2V5cyggc2VsZi5xdWVzdGlvbnMgKSxcblx0XHRcdFx0Y3VyciA9IGlkcy5pbmRleE9mKCAncS0nICsgc2VsZi5jdXJyZW50X3F1ZXN0aW9uICksXG5cdFx0XHRcdHByZXZfaWQgPSBpZHNbMF07XG5cblx0XHRcdGlmICggY3VyciA+PSAxICkge1xuXHRcdFx0XHRwcmV2X2lkID0gaWRzWyBjdXJyIC0gMSBdO1xuXHRcdFx0fVxuXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi50b2dnbGVfbG9hZGVyKCAnaGlkZScgKTtcblx0XHRcdFx0c2VsZi5sb2FkX3F1ZXN0aW9uKCBzZWxmLnF1ZXN0aW9uc1sgcHJldl9pZCBdICk7XG5cdFx0XHR9LCAxMDAgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZWdpc3RlciBxdWVzdGlvbiB0eXBlIHZhbGlkYXRvciBmdW5jdGlvbnNcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgICB0eXBlICBxdWVzdGlvbiB0eXBlIGlkXG5cdFx0ICogQHBhcmFtICAgIGZ1bmN0aW9uICAgZnVuYyAgY2FsbGJhY2sgZnVuY3Rpb24gdG8gdmFsaWRhdGUgdGhlIHF1ZXN0aW9uIHdpdGhcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0cmVnaXN0ZXJfdmFsaWRhdG9yOiBmdW5jdGlvbiggdHlwZSwgZnVuYyApIHtcblxuXHRcdFx0dGhpcy52YWxpZGF0b3JzWyB0eXBlIF0gPSBmdW5jO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFN0YXJ0IGEgUXVpeiB2aWEgQUpBWCBjYWxsXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMS4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi42XG5cdFx0ICovXG5cdFx0c3RhcnRfcXVpejogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHRoaXMubG9hZF91aV9lbGVtZW50cygpO1xuXHRcdFx0dGhpcy4kdWkgPSAkKCAnI2xsbXMtcXVpei11aScgKTtcblx0XHRcdHRoaXMuJGJ1dHRvbnMgPSAkKCAnI2xsbXMtcXVpei1uYXYgYnV0dG9uJyApO1xuXHRcdFx0dGhpcy4kY29udGFpbmVyID0gJCggJyNsbG1zLXF1aXotcXVlc3Rpb24td3JhcHBlcicgKTtcblxuXHRcdFx0Ly8gYmluZCBzdW1iaXNzaW9uIGV2ZW50IGZvciBhbnN3ZXJpbmcgcXVlc3Rpb25zXG5cdFx0XHQkKCAnI2xsbXMtbmV4dC1xdWVzdGlvbiwgI2xsbXMtY29tcGxldGUtcXVpeicgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0c2VsZi5hbnN3ZXJfcXVlc3Rpb24oICQoIHRoaXMgKSApO1xuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBiaW5kIHN1Ym1pc3Npb24gZXZlbnQgZm9yIG5hdmlnYXRpbmcgYmFja3dhcmRzXG5cdFx0XHQkKCAnI2xsbXMtcHJldi1xdWVzdGlvbicgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0c2VsZi5wcmV2aW91c19xdWVzdGlvbigpO1xuXHRcdFx0fSApO1xuXG5cdFx0XHRMTE1TLkFqYXguY2FsbCgge1xuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0YWN0aW9uOiAncXVpel9zdGFydCcsXG5cdFx0XHRcdFx0YXR0ZW1wdF9rZXk6ICQoICcjbGxtcy1hdHRlbXB0LWtleScgKS52YWwoKSxcblx0XHRcdFx0XHRsZXNzb25faWQgOiAkKCAnI2xsbXMtbGVzc29uLWlkJyApLnZhbCgpLFxuXHRcdFx0XHRcdHF1aXpfaWQgOiAkKCAnI2xsbXMtcXVpei1pZCcgKS52YWwoKSxcblx0XHRcdFx0fSxcblx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRzZWxmLnN0YXR1cyA9IHRydWU7XG5cdFx0XHRcdFx0JCggJyNsbG1zLXF1aXotd3JhcHBlciwgI3F1aXotc3RhcnQtYnV0dG9uJyApLnJlbW92ZSgpO1xuXHRcdFx0XHRcdCQoICdodG1sLCBib2R5JyApLnN0b3AoKS5hbmltYXRlKCB7c2Nyb2xsVG9wOiAwIH0sIDUwMCApO1xuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ3Nob3cnLCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnTG9hZGluZyBRdWl6Li4uJyApICk7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKCByLCBzLCB0ICkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCByLCBzLCB0ICk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCByICkge1xuXG5cdFx0XHRcdFx0c2VsZi50b2dnbGVfbG9hZGVyKCAnaGlkZScgKTtcblxuXHRcdFx0XHRcdGlmICggci5kYXRhICYmIHIuZGF0YS5odG1sICkge1xuXG5cdFx0XHRcdFx0XHQvLyBzdGFydCB0aGUgcXVpeiB0aW1lciB3aGVuIGEgdGltZSBsaW1pdCBpcyBzZXRcblx0XHRcdFx0XHRcdGlmICggci5kYXRhLnRpbWVfbGltaXQgKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYuc3RhcnRfcXVpel90aW1lciggci5kYXRhLnRpbWVfbGltaXQgKTtcblx0XHRcdFx0XHRcdH1cblxuXG5cdFx0XHRcdFx0XHRzZWxmLmF0dGVtcHRfa2V5ID0gci5kYXRhLmF0dGVtcHRfa2V5O1xuXHRcdFx0XHRcdFx0c2VsZi50b3RhbF9xdWVzdGlvbnMgPSByLmRhdGEudG90YWw7XG5cblx0XHRcdFx0XHRcdHNlbGYubG9hZF9xdWVzdGlvbiggci5kYXRhLmh0bWwgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIHIubWVzc2FnZSApIHtcblxuXHRcdFx0XHRcdFx0c2VsZi4kY29udGFpbmVyLmFwcGVuZCggJzxwPicgKyByLm1lc3NhZ2UgKyAnPC9wPicgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdHZhciBtc2cgPSBMTE1TLmwxMG4udHJhbnNsYXRlKCAnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nICk7XG5cdFx0XHRcdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAnPHA+JyArIG1zZyArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFN0YXJ0IFF1aXogVGltZXJcblx0XHQgKiBHZXRzIG1pbnV0ZXMgZnJvbSBoaWRkZW4gZmllbGRcblx0XHQgKiBOb3QgdXNlZCBhcyBhY3R1YWwgcXVpeiB0aW1lci4gUXVpeiBpcyB0aW1lZCBvbiB0aGUgc2VydmVyIGZyb20gdGhlIHF1aXogY2xhc3Ncblx0XHQgKiBDYWxjdWxhdGVzIG1pbnV0ZXMgdG8gbWlsbGlzZWNvbmRzIGFuZCB0aGVuIGNvbnZlcnRzIHRvIGhvdXJzIC8gbWludXRlc1xuXHRcdCAqIFdoZW4gdGltZSBsaW1pdCByZWFjaGVzIDAgY2FsbHMgY29tcGxldGVfcXVpeigpIHRvIGNvbXBsZXRlIHF1aXouXG5cdFx0ICogQHJldHVybiBDYWxscyBnZXRfY291bnRfZG93biBhdCBhIHNldCBpbnRlcnZhbCBvZiAxIHNlY29uZFxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHRzdGFydF9xdWl6X3RpbWVyOiBmdW5jdGlvbiggdG90YWxfbWludXRlcyApIHtcblxuXHRcdFx0Ly8gY3JlYXRlIGFuZCBhcHBlbmQgdGhlIFVJIGZvciB0aGUgY291bnRkb3duIGNsb2NrXG5cdFx0XHR2YXIgJGVsID0gJCggJzxkaXYgY2xhc3M9XCJsbG1zLXF1aXotdGltZXJcIiBpZD1cImxsbXMtcXVpei10aW1lclwiIC8+JyApLFxuXHRcdFx0XHRtc2cgPSBMTE1TLmwxMG4udHJhbnNsYXRlKCAnVGltZSBSZW1haW5pbmcnICk7XG5cblx0XHRcdCRlbC5hcHBlbmQoICc8aSBjbGFzcz1cImZhIGZhLWNsb2NrLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PHNwYW4gY2xhc3M9XCJzY3JlZW4tcmVhZGVyLXRleHRcIj4nICsgbXNnICsgJzwvc3Bhbj4nICk7XG5cdFx0XHQkZWwuYXBwZW5kKCAnPGRpdiBpZD1cImxsbXMtdGlsZXNcIiBjbGFzcz1cImxsbXMtdGlsZXNcIj48L2Rpdj4nICk7XG5cblx0XHRcdCQoICcjbGxtcy1xdWl6LWhlYWRlcicgKS5hcHBlbmQoICRlbCApO1xuXG5cdFx0XHQvLyBzdGFydCB0aGUgdGltZXJcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0dGFyZ2V0X2RhdGUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArICggKCB0b3RhbF9taW51dGVzICogNjAgKSAqIDEwMDAgKSwgLy8gc2V0IHRoZSBjb3VudGRvd24gZGF0ZVxuXHRcdFx0XHR0aW1lX2xpbWl0ID0gKCAoIHRvdGFsX21pbnV0ZXMgKiA2MCApICogMTAwMCApLFxuXHRcdFx0XHRjb3VudGRvd24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGxtcy10aWxlcycpLCAvLyBnZXQgdGFnIGVsZW1lbnRcblx0XHRcdFx0ZGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHM7IC8vIHZhcmlhYmxlcyBmb3IgdGltZSB1bml0c1xuXG5cdFx0XHQvL3NldCBhY3R1YWwgdGltZXJcblx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmNvbXBsZXRlX3F1aXooKTtcblx0XHRcdH0sIHRpbWVfbGltaXQgKyAxMDAwICk7XG5cblx0XHRcdHRoaXMuZ2V0Q291bnRkb3duKFxuXHRcdFx0XHR0b3RhbF9taW51dGVzLFxuXHRcdFx0XHR0YXJnZXRfZGF0ZSxcblx0XHRcdFx0dGltZV9saW1pdCxcblx0XHRcdFx0ZGF5cyxcblx0XHRcdFx0aG91cnMsXG5cdFx0XHRcdG1pbnV0ZXMsXG5cdFx0XHRcdHNlY29uZHMsXG5cdFx0XHRcdGNvdW50ZG93blxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gY2FsbCBnZXRfY291bnRfZG93biBldmVyeSAxIHNlY29uZFxuXHRcdFx0c2V0SW50ZXJ2YWwoIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0c2VsZi5nZXRDb3VudGRvd24oXG5cdFx0XHRcdFx0dG90YWxfbWludXRlcyxcblx0XHRcdFx0XHR0YXJnZXRfZGF0ZSxcblx0XHRcdFx0XHR0aW1lX2xpbWl0LFxuXHRcdFx0XHRcdGRheXMsXG5cdFx0XHRcdFx0aG91cnMsXG5cdFx0XHRcdFx0bWludXRlcyxcblx0XHRcdFx0XHRzZWNvbmRzLFxuXHRcdFx0XHRcdGNvdW50ZG93blxuXHRcdFx0XHQpO1xuXHRcdFx0fSwgMTAwMCApO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBUcmlnZ2VyIGV2ZW50c1xuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICBldmVudCAgZXZlbnQgdG8gdHJpZ2dlclxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHR0cmlnZ2VyOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly8gdHJpZ2dlciBxdWVzdGlvbiBzdWJtaXNzaW9uIGZvciB0aGUgY3VycmVudCBxdWVzdGlvblxuXHRcdFx0aWYgKCAnYW5zd2VyX3F1ZXN0aW9uJyA9PT0gZXZlbnQgKSB7XG5cblx0XHRcdFx0aWYgKCB0aGlzLmdldF9xdWVzdGlvbl9pbmRleCggc2VsZi5jdXJyZW50X3F1ZXN0aW9uICkgPT09IHNlbGYudG90YWxfcXVlc3Rpb25zICkge1xuXG5cdFx0XHRcdFx0JCggJyNsbG1zLWNvbXBsZXRlLXF1aXonICkudHJpZ2dlciggJ2NsaWNrJyApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHQkKCAnI2xsbXMtbmV4dC1xdWVzdGlvbicgKS50cmlnZ2VyKCAnY2xpY2snICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogTG9hZCB0aGUgSFRNTCBvZiBhIHF1ZXN0aW9uIGludG8gdGhlIERPTSBhbmQgdGhlIHF1ZXN0aW9uIGNhY2hlXG5cdFx0ICogQHBhcmFtICAgIHN0cmluZyAgIGh0bWwgIHN0cmluZyBvZiBodG1sXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy45LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi42XG5cdFx0ICovXG5cdFx0bG9hZF9xdWVzdGlvbjogZnVuY3Rpb24oIGh0bWwgKSB7XG5cblx0XHRcdHZhciAkaHRtbCA9ICQoIGh0bWwgKSxcblx0XHRcdFx0cWlkID0gJGh0bWwuYXR0ciggJ2RhdGEtaWQnICk7XG5cblx0XHRcdC8vIGNhY2hlIHRoZSBxdWVzdGlvbiBIVE1MIGZvciBmYXN0ZXIgcmV3aW5kc1xuXHRcdFx0aWYgKCAhdGhpcy5xdWVzdGlvbnNbICdxLScgKyBxaWQgXSApIHtcblx0XHRcdFx0dGhpcy5xdWVzdGlvbnNbICdxLScgKyBxaWQgXSA9ICRodG1sO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnVwZGF0ZV9wcm9ncmVzcyggcWlkICk7XG5cblx0XHRcdHRoaXMuY3VycmVudF9xdWVzdGlvbiA9IHFpZDtcblxuXHRcdFx0JCggZG9jdW1lbnQgKS50cmlnZ2VyKCAnbGxtcy1wcmUtYXBwZW5kLXF1ZXN0aW9uJywgJGh0bWwgKTtcblxuXHRcdFx0dGhpcy4kY29udGFpbmVyLmFwcGVuZCggJGh0bWwgKTtcblxuXHRcdFx0JCggZG9jdW1lbnQgKS50cmlnZ2VyKCAnbGxtcy1wb3N0LWFwcGVuZC1xdWVzdGlvbicsICRodG1sICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ29uc3RydWN0cyB0aGUgcXVpeiBVSSAmIGFkZHMgdGhlIGVsZW1lbnRzIGludG8gdGhlIERPTVxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2Ljlcblx0XHQgKi9cblx0XHRsb2FkX3VpX2VsZW1lbnRzOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyICRodG1sID0gJCggJzxkaXYgY2xhc3M9XCJsbG1zLXF1aXotdWlcIiBpZD1cImxsbXMtcXVpei11aVwiIC8+JyApLFxuXHRcdFx0XHQkaGVhZGVyID0gJCggJzxoZWFkZXIgY2xhc3M9XCJsbG1zLXF1aXotaGVhZGVyXCIgaWQ9XCJsbG1zLXF1aXotaGVhZGVyXCIgLz4nKVxuXHRcdFx0XHQkZm9vdGVyID0gJCggJzxmb290ZXIgY2xhc3M9XCJsbG1zLXF1aXotbmF2XCIgaWQ9XCJsbG1zLXF1aXotbmF2XCIgLz4nICk7XG5cblx0XHRcdCRmb290ZXIuYXBwZW5kKCAnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBsYXJnZSBsbG1zLWJ1dHRvbi1hY3Rpb25cIiBpZD1cImxsbXMtbmV4dC1xdWVzdGlvblwiIG5hbWU9XCJsbG1zX25leHRfcXVlc3Rpb25cIiB0eXBlPVwic3VibWl0XCI+JyArIExMTVMubDEwbi50cmFuc2xhdGUoICdOZXh0IFF1ZXN0aW9uJyApICsgJzwvYnV0dG9uPicgKTtcblx0XHRcdCRmb290ZXIuYXBwZW5kKCAnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBsYXJnZSBsbG1zLWJ1dHRvbi1hY3Rpb24gbGxtcy1idXR0b24tcXVpei1jb21wbGV0ZVwiIGlkPVwibGxtcy1jb21wbGV0ZS1xdWl6XCIgbmFtZT1cImxsbXNfY29tcGxldGVfcXVpelwiIHR5cGU9XCJzdWJtaXRcIiBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIj4nICsgTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0NvbXBsZXRlIFF1aXonICkgKyAnPC9idXR0b24+JyApO1xuXHRcdFx0JGZvb3Rlci5hcHBlbmQoICc8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGxsbXMtYnV0dG9uLXNlY29uZGFyeVwiIGlkPVwibGxtcy1wcmV2LXF1ZXN0aW9uXCIgbmFtZT1cImxsbXNfcHJldl9xdWVzdGlvblwiIHR5cGU9XCJzdWJtaXRcIiBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIj4nICsgTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1ByZXZpb3VzIFF1ZXN0aW9uJyApICsgJzwvYnV0dG9uPicgKTtcblxuXHRcdFx0JGhlYWRlci5hcHBlbmQoICc8ZGl2IGNsYXNzPVwibGxtcy1wcm9ncmVzc1wiPjxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXItY29tcGxldGVcIj48L2Rpdj48L2Rpdj4nICk7XG5cdFx0XHQkZm9vdGVyLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJsbG1zLXF1aXotY291bnRlclwiIGlkPVwibGxtcy1xdWl6LWNvdW50ZXJcIj48c3BhbiBjbGFzcz1cImxsbXMtY3VycmVudFwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxsbXMtc2VwXCI+Lzwvc3Bhbj48c3BhbiBjbGFzcz1cImxsbXMtdG90YWxcIj48L3NwYW4+PC9kaXY+JylcblxuXHRcdFx0JGh0bWwuYXBwZW5kKCAkaGVhZGVyIClcblx0XHRcdFx0IC5hcHBlbmQoICc8ZGl2IGNsYXNzPVwibGxtcy1xdWl6LXF1ZXN0aW9uLXdyYXBwZXJcIiBpZD1cImxsbXMtcXVpei1xdWVzdGlvbi13cmFwcGVyXCIgLz4nIClcblx0XHRcdFx0IC5hcHBlbmQoICRmb290ZXIgKTtcblxuXHRcdFx0JCggJyNsbG1zLXF1aXotd3JhcHBlcicgKS5hZnRlciggJGh0bWwgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBQZXJmb3JtIGFjdGlvbnMgb24gcXVlc3Rpb24gSFRNTCBhZnRlciBpdCdzIGJlZW4gYXBwZW5kZWQgdG8gdGhlIERPTVxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAgICBldmVudCAganMgZXZlbnQgb2JqZWN0XG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICAgIGh0bWwgICBqcyBIVE1MIG9iamVjdFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuNlxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjZcblx0XHQgKi9cblx0XHRwb3N0X2FwcGVuZF9xdWVzdGlvbjogZnVuY3Rpb24oIGV2ZW50LCBodG1sICkge1xuXG5cdFx0XHR2YXIgJGh0bWwgPSAkKCBodG1sICk7XG5cblx0XHRcdGlmICggJGh0bWwuZmluZCggJ2F1ZGlvJyApLmxlbmd0aCApIHtcblx0XHRcdFx0d3AubWVkaWFlbGVtZW50LmluaXRpYWxpemUoKTtcblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBTaG93IG9yIGhpZGUgdGhlIFwibG9hZGluZ1wiIHNwaW5uciB3aXRoIGFuIG9wdGlvbiBtZXNzYWdlXG5cdFx0ICogQHBhcmFtICAgIHN0cmluZyAgIGRpc3BsYXkgIHNob3d8aGlkZVxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICBtc2cgICAgICB0ZXh0IHRvIGRpc3BsYXkgd2hlbiBzaG93aW5nXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy45LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi42XG5cdFx0ICovXG5cdFx0dG9nZ2xlX2xvYWRlcjogZnVuY3Rpb24oIGRpc3BsYXksIG1zZyApIHtcblxuXHRcdFx0aWYgKCAnc2hvdycgPT09IGRpc3BsYXkgKSB7XG5cblx0XHRcdFx0bXNnID0gbXNnIHx8IExMTVMubDEwbi50cmFuc2xhdGUoICdMb2FkaW5nLi4uJyApO1xuXG5cdFx0XHRcdHRoaXMuJGJ1dHRvbnMuYXR0ciggJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyApO1xuXG5cdFx0XHRcdHRoaXMuJGNvbnRhaW5lci5lbXB0eSgpO1xuXHRcdFx0XHRMTE1TLlNwaW5uZXIuc3RhcnQoIHRoaXMuJGNvbnRhaW5lciApO1xuXHRcdFx0XHR0aGlzLiRjb250YWluZXIuYXBwZW5kKCAnPGRpdiBjbGFzcz1cImxsbXMtcXVpei1sb2FkaW5nXCI+JyArIExMTVMubDEwbi50cmFuc2xhdGUoIG1zZyApICsgJzwvZGl2PicgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRMTE1TLlNwaW5uZXIuc3RvcCggdGhpcy4kY29udGFpbmVyICk7XG5cdFx0XHRcdHRoaXMuJGJ1dHRvbnMucmVtb3ZlQXR0ciggJ2Rpc2FibGVkJyApO1xuXHRcdFx0XHR0aGlzLiRjb250YWluZXIuZmluZCggJy5sbG1zLXF1aXotbG9hZGluZycgKS5yZW1vdmUoKTtcblxuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFVwZGF0ZSB0aGUgcHJvZ3Jlc3MgYmFyIGFuZCB0b2dnbGUgYnV0dG9uIGF2YWxhYmlsaXR5IGJhc2VkIG9uIHF1ZXN0aW9uIHRoZSBxdWVzdGlvbiBiZWluZyBzaG93blxuXHRcdCAqIEBwYXJhbSAgICB7W3R5cGVdfSAgIHFpZCAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEByZXR1cm4gICB7W3R5cGVdfVxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0dXBkYXRlX3Byb2dyZXNzOiBmdW5jdGlvbiggcWlkICkge1xuXG5cdFx0XHR2YXIgaW5kZXggPSB0aGlzLmdldF9xdWVzdGlvbl9pbmRleCggcWlkICksXG5cdFx0XHRcdHByb2dyZXNzO1xuXG5cdFx0XHRpZiAoIC0xID09PSBpbmRleCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpbmRleCsrO1xuXG5cdFx0XHQkKCAnI2xsbXMtcXVpei1jb3VudGVyIC5sbG1zLWN1cnJlbnQnICkudGV4dCggaW5kZXggKTtcblx0XHRcdGlmICggaW5kZXggPT09IDEgKSB7XG5cdFx0XHRcdCQoICcjbGxtcy1xdWl6LWNvdW50ZXIgLmxsbXMtdG90YWwnICkudGV4dCggdGhpcy50b3RhbF9xdWVzdGlvbnMgKTtcblx0XHRcdFx0JCggJyNsbG1zLXF1aXotY291bnRlcicgKS5zaG93KCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGhhbmRsZSBwcmV2IHF1ZXN0aW9uXG5cdFx0XHRpZiAoIGluZGV4ID49IDIgKSB7XG5cdFx0XHRcdCQoICcjbGxtcy1wcmV2LXF1ZXN0aW9uJyApLnNob3coKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoICcjbGxtcy1wcmV2LXF1ZXN0aW9uJyApLmhpZGUoKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBpbmRleCA9PT0gdGhpcy50b3RhbF9xdWVzdGlvbnMgKSB7XG5cdFx0XHRcdCQoICcjbGxtcy1uZXh0LXF1ZXN0aW9uJyApLmhpZGUoKTtcblx0XHRcdFx0JCggJyNsbG1zLWNvbXBsZXRlLXF1aXonICkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCggJyNsbG1zLW5leHQtcXVlc3Rpb24nICkuc2hvdygpO1xuXHRcdFx0XHQkKCAnI2xsbXMtY29tcGxldGUtcXVpeicgKS5oaWRlKCk7XG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogSW5jcmVhc2UgcHJvZ3Jlc3MgYmFyIHVpIGVsbWVudFxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICBkaXIgIHVwZGF0ZSBkaXJlY3Rpb24gW2luY3JlbWVudHxkZWNyZW1lbnRdXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHVwZGF0ZV9wcm9ncmVzc19iYXI6IGZ1bmN0aW9uKCBkaXIgKSB7XG5cblx0XHRcdHZhciBpbmRleCA9IHRoaXMuZ2V0X3F1ZXN0aW9uX2luZGV4KCB0aGlzLmN1cnJlbnRfcXVlc3Rpb24gKTtcblx0XHRcdGlmICggJ2luY3JlbWVudCcgPT09IGRpciApIHtcblx0XHRcdFx0aW5kZXgrKztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGluZGV4LS07XG5cdFx0XHR9XG5cblx0XHRcdHByb2dyZXNzID0gKCBpbmRleCAvIHRoaXMudG90YWxfcXVlc3Rpb25zICkgKiAxMDA7XG5cdFx0XHR0aGlzLiR1aS5maW5kKCAnLnByb2dyZXNzLWJhci1jb21wbGV0ZScgKS5jc3MoICd3aWR0aCcsIHByb2dyZXNzICsgJyUnICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogR2V0IENvdW50IERvd25cblx0XHQgKiBDYWxsZWQgZXZlcnkgc2Vjb25kIHRvIHVwZGF0ZSB0aGUgb24gc2NyZWVuIGNvdW50ZG93biB0aW1lclxuXHRcdCAqIENoYW5nZXMgY29sb3IgdG8geWVsbG93IGF0IDEvMiBvZiB0b3RhbCB0aW1lXG5cdFx0ICogQ2hhbmdlcyBjb2xvciB0byByZWQgYXQgMS80IG9mIHRvdGFsIHRpbWVcblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gbWludXRlcyAgICAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEBwYXJhbSAge1tkYXRlXX0gdGFyZ2V0X2RhdGUgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSB0aW1lX2xpbWl0ICBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHBhcmFtICB7W2ludF19IGRheXMgICAgICAgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gaG91cnMgICAgICAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSBtaW51dGVzICAgICBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHBhcmFtICB7W2ludF19IHNlY29uZHMgICAgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gY291bnRkb3duICAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEByZXR1cm4gRGlzcGxheXMgdXBkYXRlcyBob3VycywgbWludXRlcyBvbiBxdWl6IHRpbWVyXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdCBcdCAqIEB2ZXJzaW9uICAxLjAuMFxuXHRcdCAqL1xuXHRcdGdldENvdW50ZG93bjogZnVuY3Rpb24oIHRvdGFsX21pbnV0ZXMsIHRhcmdldF9kYXRlLCB0aW1lX2xpbWl0LCBkYXlzLCBob3VycywgbWludXRlcywgc2Vjb25kcywgY291bnRkb3duICl7XG5cblx0XHRcdC8vIGZpbmQgdGhlIGFtb3VudCBvZiBcInNlY29uZHNcIiBiZXR3ZWVuIG5vdyBhbmQgdGFyZ2V0XG5cdFx0XHR2YXIgY3VycmVudF9kYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCksXG5cdFx0XHRcdHNlY29uZHNfbGVmdCA9ICggdGFyZ2V0X2RhdGUgLSBjdXJyZW50X2RhdGUgKSAvIDEwMDA7XG5cblx0XHRcdGlmICggc2Vjb25kc19sZWZ0ID49IDAgKSB7XG5cblx0XHRcdFx0aWYgKCAoIHNlY29uZHNfbGVmdCAqIDEwMDAgKSA8ICggdGltZV9saW1pdCAvIDIgKSApICB7XG5cblx0XHRcdFx0XHQkKCAnI2xsbXMtcXVpei10aW1lcicgKS5hZGRDbGFzcyggJ2NvbG9yLWhhbGYnICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggKCBzZWNvbmRzX2xlZnQgKiAxMDAwICkgPCAoIHRpbWVfbGltaXQgLyA0ICkgKSAge1xuXG5cdFx0XHRcdFx0JCggJyNsbG1zLXF1aXotdGltZXInICkucmVtb3ZlQ2xhc3MoICdjb2xvci1oYWxmJyApO1xuXHRcdFx0XHRcdCQoICcjbGxtcy1xdWl6LXRpbWVyJyApLmFkZENsYXNzKCAnY29sb3ItZW1wdHknICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRheXMgPSB0aGlzLnBhZCggcGFyc2VJbnQoc2Vjb25kc19sZWZ0IC8gODY0MDApICk7XG5cdFx0XHRcdHNlY29uZHNfbGVmdCA9IHNlY29uZHNfbGVmdCAlIDg2NDAwO1xuXHRcdFx0XHRob3VycyA9IHRoaXMucGFkKCBwYXJzZUludChzZWNvbmRzX2xlZnQgLyAzNjAwKSApO1xuXHRcdFx0XHRzZWNvbmRzX2xlZnQgPSBzZWNvbmRzX2xlZnQgJSAzNjAwO1xuXHRcdFx0XHRtaW51dGVzID0gdGhpcy5wYWQoIHBhcnNlSW50KCBzZWNvbmRzX2xlZnQgLyA2MCApICk7XG5cdFx0XHRcdHNlY29uZHMgPSB0aGlzLnBhZCggcGFyc2VJbnQoIHNlY29uZHNfbGVmdCAlIDYwICkgKTtcblxuXHRcdFx0XHQvLyBmb3JtYXQgY291bnRkb3duIHN0cmluZyArIHNldCB0YWcgdmFsdWVcblx0XHRcdFx0Y291bnRkb3duLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cImhvdXJzXCI+JyArIGhvdXJzICsgJzwvc3Bhbj46PHNwYW4gY2xhc3M9XCJtaW51dGVzXCI+JyArIG1pbnV0ZXMgKyAnPC9zcGFuPjo8c3BhbiBjbGFzcz1cInNlY29uZHNcIj4nICsgc2Vjb25kcyArICc8L3NwYW4+Jztcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUGFkIE51bWJlclxuXHRcdCAqIHBhZHMgbnVtYmVyIHdpdGggMCBpZiBzaW5nbGUgZGlnaXQuXG5cdFx0ICogQHBhcmFtICB7W2ludF19IG4gW251bWJlcl1cblx0XHQgKiBAcmV0dXJuIHtbc3RyaW5nXX0gW3BhZGRlZCBudW1iZXJdXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdCBcdCAqIEB2ZXJzaW9uICAxLjAuMFxuXHRcdCAqL1xuXHRcdHBhZDogZnVuY3Rpb24obikge1xuXHRcdFx0cmV0dXJuIChuIDwgMTAgPyAnMCcgOiAnJykgKyBuO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBCYXNpYyB2YWxpZGF0aW9uIG1ldGhvZCB3aGljaCBwZXJmb3JtcyBubyB2YWxpZGF0aW9uIGFuZCByZXR1cm5zIGEgdmFsaWF0aW9uIG9iamVjdFxuXHRcdCAqIGluIHRoZSBmb3JtYXQgcmVxdWlyZWQgYnkgdGhlIGFwcGxpY2F0aW9uXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICRxdWVzdGlvbiAgalF1ZXJ5IHNlbGVjdG9yIG9mIHRoZSBxdWVzdGlvblxuXHRcdCAqIEByZXR1cm4gICBvYmpcblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHZhbGlkYXRlOiBmdW5jdGlvbiggJHF1ZXN0aW9uICkge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0YW5zd2VyOiBbXSxcblx0XHRcdFx0dmFsaWQ6IHRydWUsXG5cdFx0XHR9O1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBWYWxpZGF0ZXMgYSBjaG9pY2UgcXVlc3Rpb24gdG8gZW5zdXJlIHRoZXJlJ3MgYXQgbGVhc3Qgb25lIGNoZWNrZWQgaW5wdXRcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJHF1ZXN0aW9uICBqUXVlcnkgc2VsZWN0b3Igb2YgdGhlIHF1ZXN0aW9uXG5cdFx0ICogQHJldHVybiAgIG9ialxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0dmFsaWRhdGVfY2hvaWNlOiBmdW5jdGlvbiggJHF1ZXN0aW9uICkge1xuXG5cdFx0XHR2YXIgcmV0ID0gd2luZG93LmxsbXMucXVpenplcy52YWxpZGF0ZSggJHF1ZXN0aW9uICksXG5cdFx0XHRcdGNoZWNrZWQgPSAkcXVlc3Rpb24uZmluZCggJ2lucHV0OmNoZWNrZWQnICk7XG5cblx0XHRcdGlmICggIWNoZWNrZWQubGVuZ3RoICkge1xuXHRcdFx0XHRyZXQudmFsaWQgPSBMTE1TLmwxMG4udHJhbnNsYXRlKCAnWW91IG11c3Qgc2VsZWN0IGFuIGFuc3dlciB0byBjb250aW51ZS4nICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjaGVja2VkLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldC5hbnN3ZXIucHVzaCggJCggdGhpcyApLnZhbCgpICk7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHJldDtcblxuXHRcdH0sXG5cblx0fTtcblxuXHRxdWl6LmJpbmQoKTtcblxuXHR3aW5kb3cubGxtcyA9IHdpbmRvdy5sbG1zIHx8IHt9O1xuXHR3aW5kb3cubGxtcy5xdWl6emVzID0gcXVpejtcblxufSApKCBqUXVlcnkgKTtcbiJdfQ==
