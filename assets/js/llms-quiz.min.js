!function(c){var t={$buttons:null,$container:null,$ui:null,attempt_key:null,current_question:0,total_questions:0,questions:{},validators:{},status:null,bind:function(){var e=this;c("#llms_start_quiz").on("click",function(t){t.preventDefault(),e.start_quiz()}),c(".llms-donut").each(function(){LLMS.Donut(c(this))}),c("#llms-quiz-attempt-select").on("change",function(){var t=c(this).val();t&&(window.location.href=t)}),c(window).on("beforeunload",function(){if(e.status)return LLMS.l10n.translate("Are you sure you wish to quit this quiz attempt?")}),c(window).on("unload",function(){e.status&&e.complete_quiz()}),c(document).on("llms-post-append-question",e.post_append_question),this.register_validator("content",this.validate),this.register_validator("choice",this.validate_choice),this.register_validator("picture_choice",this.validate_choice),this.register_validator("true_false",this.validate_choice)},add_error:function(t){this.$container.find(".llms-error").remove();var e=c('<p class="llms-error">'+t+'<a href="#"><i class="fa fa-times-circle" aria-hidden="true"></i></a></p>');e.on("click","a",function(t){t.preventDefault(),e.fadeOut("200"),setTimeout(function(){e.remove()},210)}),this.$container.append(e)},answer_question:function(e){var t,s=this,i=this.$container.find(".llms-question-wrapper"),n=i.attr("data-type");if(this.validators[n]){if(!(t=this.validators[n](i))||!0!==t.valid||!t.answer)return s.add_error(t.valid);LLMS.Ajax.call({data:{action:"quiz_answer_question",answer:t.answer,attempt_key:s.attempt_key,question_id:i.attr("data-id"),question_type:i.attr("data-type")},beforeSend:function(){var t=e.hasClass("llms-button-quiz-complete")?LLMS.l10n.translate("Grading Quiz..."):LLMS.l10n.translate("Loading Question...");s.toggle_loader("show",t),s.update_progress_bar("increment")},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.html)t.data.question_id&&s.questions["q-"+t.data.question_id]?s.load_question(s.questions["q-"+t.data.question_id]):s.load_question(t.data.html);else if(t.data&&t.data.redirect)s.redirect(t.data.redirect);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}})}else console.log("No validator registered for question type "+n)},complete_quiz:function(){var s=this;LLMS.Ajax.call({data:{action:"quiz_end",attempt_key:s.attempt_key},beforeSend:function(){s.toggle_loader("show","Grading Quiz...")},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.redirect)s.redirect(t.data.redirect);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}})},get_question_index:function(t){return Object.keys(this.questions).indexOf("q-"+t)},redirect:function(t){this.toggle_loader("show","Grading Quiz..."),this.status=null,window.location.href=t},previous_question:function(){var t=this;t.toggle_loader("show",LLMS.l10n.translate("Loading Question...")),t.update_progress_bar("decrement");var e=Object.keys(t.questions),s=e.indexOf("q-"+t.current_question),i=e[0];1<=s&&(i=e[s-1]),setTimeout(function(){t.toggle_loader("hide"),t.load_question(t.questions[i])},100)},register_validator:function(t,e){this.validators[t]=e},start_quiz:function(){var s=this;this.load_ui_elements(),this.$ui=c("#llms-quiz-ui"),this.$buttons=c("#llms-quiz-nav button"),this.$container=c("#llms-quiz-question-wrapper"),c("#llms-next-question, #llms-complete-quiz").on("click",function(t){t.preventDefault(),s.answer_question(c(this))}),c("#llms-prev-question").on("click",function(t){t.preventDefault(),s.previous_question()}),LLMS.Ajax.call({data:{action:"quiz_start",attempt_key:c("#llms-attempt-key").val(),lesson_id:c("#llms-lesson-id").val(),quiz_id:c("#llms-quiz-id").val()},beforeSend:function(){s.status=!0,c("#llms-quiz-wrapper, #quiz-start-button").remove(),c("html, body").stop().animate({scrollTop:0},500),s.toggle_loader("show",LLMS.l10n.translate("Loading Quiz..."))},error:function(t,e,s){console.log(t,e,s)},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.html)t.data.time_limit&&s.start_quiz_timer(t.data.time_limit),s.attempt_key=t.data.attempt_key,s.total_questions=t.data.total,s.load_question(t.data.html);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}})},start_quiz_timer:function(t){var e=c('<div class="llms-quiz-timer" id="llms-quiz-timer" />'),s=LLMS.l10n.translate("Time Remaining");e.append('<i class="fa fa-clock-o" aria-hidden="true"></i><span class="screen-reader-text">'+s+"</span>"),e.append('<div id="llms-tiles" class="llms-tiles"></div>'),c("#llms-quiz-header").append(e);var i,n,a,l,o=this,r=(new Date).getTime()+60*t*1e3,u=60*t*1e3,d=document.getElementById("llms-tiles");setTimeout(function(){o.complete_quiz()},u+1e3),this.getCountdown(t,r,u,i,n,a,l,d),setInterval(function(){o.getCountdown(t,r,u,i,n,a,l,d)},1e3)},trigger:function(t){"answer_question"===t&&(this.get_question_index(this.current_question)===this.total_questions?c("#llms-complete-quiz").trigger("click"):c("#llms-next-question").trigger("click"))},load_question:function(t){var e=c(t),s=e.attr("data-id");this.questions["q-"+s]||(this.questions["q-"+s]=e),this.update_progress(s),this.current_question=s,c(document).trigger("llms-pre-append-question",e),this.$container.append(e),c(document).trigger("llms-post-append-question",e)},load_ui_elements:function(){var t=c('<div class="llms-quiz-ui" id="llms-quiz-ui" />'),e=c('<header class="llms-quiz-header" id="llms-quiz-header" />');$footer=c('<footer class="llms-quiz-nav" id="llms-quiz-nav" />'),$footer.append('<button class="button large llms-button-action" id="llms-next-question" name="llms_next_question" type="submit">'+LLMS.l10n.translate("Next Question")+"</button>"),$footer.append('<button class="button large llms-button-action llms-button-quiz-complete" id="llms-complete-quiz" name="llms_complete_quiz" type="submit" style="display:none;">'+LLMS.l10n.translate("Complete Quiz")+"</button>"),$footer.append('<button class="button llms-button-secondary" id="llms-prev-question" name="llms_prev_question" type="submit" style="display:none;">'+LLMS.l10n.translate("Previous Question")+"</button>"),e.append('<div class="llms-progress"><div class="progress-bar-complete"></div></div>'),$footer.append('<div class="llms-quiz-counter" id="llms-quiz-counter"><span class="llms-current"></span><span class="llms-sep">/</span><span class="llms-total"></span></div>'),t.append(e).append('<div class="llms-quiz-question-wrapper" id="llms-quiz-question-wrapper" />').append($footer),c("#llms-quiz-wrapper").after(t)},post_append_question:function(t,e){c(e).find("audio").length&&wp.mediaelement.initialize()},toggle_loader:function(t,e){"show"===t?(e=e||LLMS.l10n.translate("Loading..."),this.$buttons.attr("disabled","disabled"),this.$container.empty(),LLMS.Spinner.start(this.$container),this.$container.append('<div class="llms-quiz-loading">'+LLMS.l10n.translate(e)+"</div>")):(LLMS.Spinner.stop(this.$container),this.$buttons.removeAttr("disabled"),this.$container.find(".llms-quiz-loading").remove())},update_progress:function(t){var e=this.get_question_index(t);-1!==e&&(e++,c("#llms-quiz-counter .llms-current").text(e),1===e&&(c("#llms-quiz-counter .llms-total").text(this.total_questions),c("#llms-quiz-counter").show()),2<=e?c("#llms-prev-question").show():c("#llms-prev-question").hide(),e===this.total_questions?(c("#llms-next-question").hide(),c("#llms-complete-quiz").show()):(c("#llms-next-question").show(),c("#llms-complete-quiz").hide()))},update_progress_bar:function(t){var e=this.get_question_index(this.current_question);"increment"===t?e++:e--,progress=e/this.total_questions*100,this.$ui.find(".progress-bar-complete").css("width",progress+"%")},getCountdown:function(t,e,s,i,n,a,l,o){var r=(e-(new Date).getTime())/1e3;0<=r&&(1e3*r<s/2&&c("#llms-quiz-timer").addClass("color-half"),1e3*r<s/4&&(c("#llms-quiz-timer").removeClass("color-half"),c("#llms-quiz-timer").addClass("color-empty")),this.pad(parseInt(r/86400)),r%=86400,n=this.pad(parseInt(r/3600)),r%=3600,a=this.pad(parseInt(r/60)),l=this.pad(parseInt(r%60)),o.innerHTML='<span class="hours">'+n+'</span>:<span class="minutes">'+a+'</span>:<span class="seconds">'+l+"</span>")},pad:function(t){return(t<10?"0":"")+t},validate:function(t){return{answer:[],valid:!0}},validate_choice:function(t){var e=window.llms.quizzes.validate(t),s=t.find("input:checked");return s.length?s.each(function(){e.answer.push(c(this).val())}):e.valid=LLMS.l10n.translate("You must select an answer to continue."),e}};t.bind(),window.llms=window.llms||{},window.llms.quizzes=t}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMtcXVpei5qcyJdLCJuYW1lcyI6WyIkIiwicXVpeiIsIiRidXR0b25zIiwiJGNvbnRhaW5lciIsIiR1aSIsImF0dGVtcHRfa2V5IiwiY3VycmVudF9xdWVzdGlvbiIsInRvdGFsX3F1ZXN0aW9ucyIsInF1ZXN0aW9ucyIsInZhbGlkYXRvcnMiLCJzdGF0dXMiLCJiaW5kIiwic2VsZiIsInRoaXMiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0YXJ0X3F1aXoiLCJlYWNoIiwiTExNUyIsIkRvbnV0IiwidmFsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwibDEwbiIsInRyYW5zbGF0ZSIsImNvbXBsZXRlX3F1aXoiLCJkb2N1bWVudCIsInBvc3RfYXBwZW5kX3F1ZXN0aW9uIiwicmVnaXN0ZXJfdmFsaWRhdG9yIiwidmFsaWRhdGUiLCJ2YWxpZGF0ZV9jaG9pY2UiLCJhZGRfZXJyb3IiLCJtc2ciLCJmaW5kIiwicmVtb3ZlIiwiJGVyciIsImZhZGVPdXQiLCJzZXRUaW1lb3V0IiwiYXBwZW5kIiwiYW5zd2VyX3F1ZXN0aW9uIiwiJGJ0biIsInZhbGlkIiwiJHF1ZXN0aW9uIiwidHlwZSIsImF0dHIiLCJhbnN3ZXIiLCJBamF4IiwiY2FsbCIsImRhdGEiLCJhY3Rpb24iLCJxdWVzdGlvbl9pZCIsInF1ZXN0aW9uX3R5cGUiLCJiZWZvcmVTZW5kIiwiaGFzQ2xhc3MiLCJ0b2dnbGVfbG9hZGVyIiwidXBkYXRlX3Byb2dyZXNzX2JhciIsInN1Y2Nlc3MiLCJyIiwiaHRtbCIsImxvYWRfcXVlc3Rpb24iLCJyZWRpcmVjdCIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwiZ2V0X3F1ZXN0aW9uX2luZGV4IiwicWlkIiwiT2JqZWN0Iiwia2V5cyIsImluZGV4T2YiLCJ1cmwiLCJwcmV2aW91c19xdWVzdGlvbiIsImlkcyIsImN1cnIiLCJwcmV2X2lkIiwiZnVuYyIsImxvYWRfdWlfZWxlbWVudHMiLCJsZXNzb25faWQiLCJxdWl6X2lkIiwic3RvcCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJlcnJvciIsInMiLCJ0IiwidGltZV9saW1pdCIsInN0YXJ0X3F1aXpfdGltZXIiLCJ0b3RhbCIsInRvdGFsX21pbnV0ZXMiLCIkZWwiLCJkYXlzIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsInRhcmdldF9kYXRlIiwiRGF0ZSIsImdldFRpbWUiLCJjb3VudGRvd24iLCJnZXRFbGVtZW50QnlJZCIsImdldENvdW50ZG93biIsInNldEludGVydmFsIiwidHJpZ2dlciIsImV2ZW50IiwiJGh0bWwiLCJ1cGRhdGVfcHJvZ3Jlc3MiLCIkaGVhZGVyIiwiJGZvb3RlciIsImFmdGVyIiwibGVuZ3RoIiwid3AiLCJtZWRpYWVsZW1lbnQiLCJpbml0aWFsaXplIiwiZGlzcGxheSIsImVtcHR5IiwiU3Bpbm5lciIsInN0YXJ0IiwicmVtb3ZlQXR0ciIsImluZGV4IiwidGV4dCIsInNob3ciLCJoaWRlIiwiZGlyIiwicHJvZ3Jlc3MiLCJjc3MiLCJzZWNvbmRzX2xlZnQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicGFkIiwicGFyc2VJbnQiLCJpbm5lckhUTUwiLCJuIiwicmV0IiwibGxtcyIsInF1aXp6ZXMiLCJjaGVja2VkIiwicHVzaCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBU0MsU0FBWUEsR0FFWixJQUFJQyxFQUFPLENBTVZDLFNBQVUsS0FNVkMsV0FBWSxLQU1aQyxJQUFLLEtBTUxDLFlBQWEsS0FNYkMsaUJBQWtCLEVBTWxCQyxnQkFBaUIsRUFNakJDLFVBQVcsR0FPWEMsV0FBWSxHQVNaQyxPQUFRLEtBUVJDLEtBQU0sV0FFTCxJQUFJQyxFQUFPQyxLQUdYYixFQUFHLG9CQUFxQmMsR0FBSSxRQUFTLFNBQVVDLEdBQzlDQSxFQUFFQyxpQkFDRkosRUFBS0ssZUFJTmpCLEVBQUcsZUFBZ0JrQixLQUFNLFdBQ3hCQyxLQUFLQyxNQUFPcEIsRUFBR2EsU0FJaEJiLEVBQUcsNkJBQThCYyxHQUFJLFNBQVUsV0FDOUMsSUFBSU8sRUFBTXJCLEVB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QUg1QitHLEVBQUl6RixNQUFReEIsS0FBS00sS0FBS0MsVUFBVywwQ0FPM0IwRyxJQU1UbkksRUFBS1UsT0FFTFcsT0FBTytHLEtBQU8vRyxPQUFPK0csTUFBUSxHQUM3Qi9HLE9BQU8rRyxLQUFLQyxRQUFVckksRUEzd0J0QixDQTZ3Qkl3SSIsImZpbGUiOiJsbG1zLXF1aXoubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIExMTVMsICQgKi9cbi8qIGpzaGludCBzdHJpY3Q6IHRydWUgKi9cblxuLyoqXG4gKiBGcm9udCBFbmQgUXVpeiBDbGFzc1xuICogQHR5cGUgICAgIHtPYmplY3R9XG4gKiBAc2luY2UgICAgMS4wLjBcbiAqIEB2ZXJzaW9uICAzLjE2LjlcbiAqL1xuOyggZnVuY3Rpb24oICQgKSB7XG5cblx0dmFyIHF1aXogPSB7XG5cblx0XHQvKipcblx0XHQgKiBTZWxlY3RvciBvZiBhbGwgdGhlIGF2YWlsYWJsZSBidXR0b24gZWxlbWVuc1xuXHRcdCAqIEB0eXBlICBvYmpcblx0XHQgKi9cblx0XHQkYnV0dG9uczogbnVsbCxcblxuXHRcdC8qKlxuXHRcdCAqIE1haW4gUXVlc3Rpb24gQ29udGFpbmVyIEVsZW1lbnRcblx0XHQgKiBAdHlwZSAgb2JqXG5cdFx0ICovXG5cdFx0JGNvbnRhaW5lcjogbnVsbCxcblxuXHRcdC8qKlxuXHRcdCAqIE1haW4gUXVpeiBjb250YWluZXIgVUkgZWxlbWVudFxuXHRcdCAqIEB0eXBlICBvYmpcblx0XHQgKi9cblx0XHQkdWk6IG51bGwsXG5cblx0XHQvKipcblx0XHQgKiBBdHRlbXB0IGtleSBmb3IgdGhlIGN1cnJlbnQgcXVpelxuXHRcdCAqIEB0eXBlICB7W3R5cGVdfVxuXHRcdCAqL1xuXHRcdGF0dGVtcHRfa2V5OiBudWxsLFxuXG5cdFx0LyoqXG5cdFx0ICogUXVlc3Rpb24gSUQgb2YgdGhlIGN1cnJlbnQgcXVlc3Rpb25cblx0XHQgKiBAdHlwZSAge051bWJlcn1cblx0XHQgKi9cblx0XHRjdXJyZW50X3F1ZXN0aW9uOiAwLFxuXG5cdFx0LyoqXG5cdFx0ICogVG90YWwgbnVtYmVyIG9mIHF1ZXN0aW9ucyBpbiB0aGUgY3VycmVudCBxdWl6XG5cdFx0ICogQHR5cGUgIHtOdW1iZXJ9XG5cdFx0ICovXG5cdFx0dG90YWxfcXVlc3Rpb25zOiAwLFxuXG5cdFx0LyoqXG5cdFx0ICogT2JqZWN0IG9mIHF1aXogcXVlc3Rpb24gSFRNTFxuXHRcdCAqIEB0eXBlICB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdHF1ZXN0aW9uczoge30sXG5cblx0XHQvKipcblx0XHQgKiBWYWxpZGF0b3IgZnVuY3Rpb25zIGZvciBxdWVzdGlvbiB0eXBlc1xuXHRcdCAqIFRoaXJkIHBhcnR5IGN1c3RvbSBxdWVzdGlvbiB0eXBlcyBjYW4gcmVnaXN0ZXIgdmFsaWRhdG9ycyBmb3IgdXNlIHdoZW4gYW5zd2VyaW5nIHF1ZXN0aW9zblxuXHRcdCAqIEB0eXBlICB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdHZhbGlkYXRvcnM6IHt9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVjb3JkcyBjdXJyZW50IHN0YXR1cyBvZiBhIHF1aXogc2Vzc2lvblxuXHRcdCAqIElmIGEgdXNlciBhdHRlbXB0cyB0byBuYXZpZ2F0ZSBhd2F5IGZyb20gYSBxdWl6XG5cdFx0ICogd2hpbGUgdGFraW5nIHRoZSBxdWl6IHRoZXknbGwgYmUgd2FybmVkIHRoYXQgdGhlaXIgcHJvZ3Jlc3Ncblx0XHQgKiB3aWxsIG5vdCBiZSBzYXZlZCBpZiB0aGlzIHN0YXR1cyBpcyBub3QgbnVsbFxuXHRcdCAqIEB0eXBlICBib29sZWFuXG5cdFx0ICovXG5cdFx0c3RhdHVzOiBudWxsLFxuXG5cdFx0LyoqXG5cdFx0ICogQmluZCBET00gZXZlbnRzXG5cdFx0ICogQHJldHVybiB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuNlxuXHRcdCAqL1xuXHRcdGJpbmQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdC8vIHN0YXJ0IHF1aXpcblx0XHRcdCQoICcjbGxtc19zdGFydF9xdWl6JyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRzZWxmLnN0YXJ0X3F1aXooKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gZHJhdyBxdWl6IGdyYWRlIGNpcmN1bGFyIGNoYXJ0XG5cdFx0XHQkKCAnLmxsbXMtZG9udXQnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdExMTVMuRG9udXQoICQoIHRoaXMgKSApO1xuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyByZWRpcmVjdCB0byBhdHRlbXB0IG9uIGF0dGVtcHQgc2VsZWN0aW9uIGNoYW5nZVxuXHRcdFx0JCggJyNsbG1zLXF1aXotYXR0ZW1wdC1zZWxlY3QnICkub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHZhbCA9ICQoIHRoaXMgKS52YWwoKTtcblx0XHRcdFx0aWYgKCB2YWwgKSB7XG5cdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSB2YWw7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gd2FybiB3aGVuIHF1aXogaXMgcnVubmluZyBhbmQgdXNlciB0cmllcyB0byBsZWF2ZSB0aGUgcGFnZVxuXHRcdFx0JCggd2luZG93ICkub24oICdiZWZvcmV1bmxvYWQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBzZWxmLnN0YXR1cyApIHtcblx0XHRcdFx0XHRyZXR1cm4gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0FyZSB5b3Ugc3VyZSB5b3Ugd2lzaCB0byBxdWl0IHRoaXMgcXVpeiBhdHRlbXB0PycgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBjb21wbGV0ZSB0aGUgcXVpeiBhdHRlbXB0IHdoZW4gdXNlciBsZWF2ZXMgaWYgdGhlIHF1aXogaXMgcnVubmluZ1xuXHRcdFx0JCggd2luZG93ICkub24oICd1bmxvYWQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBzZWxmLnN0YXR1cyApIHtcblx0XHRcdFx0XHRzZWxmLmNvbXBsZXRlX3F1aXooKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cdFx0XHQkKCBkb2N1bWVudCApLm9uKCAnbGxtcy1wb3N0LWFwcGVuZC1xdWVzdGlvbicsIHNlbGYucG9zdF9hcHBlbmRfcXVlc3Rpb24gKTtcblxuXHRcdFx0Ly8gcmVnaXN0ZXIgdmFsaWRhdG9yc1xuXHRcdFx0dGhpcy5yZWdpc3Rlcl92YWxpZGF0b3IoICdjb250ZW50JywgdGhpcy52YWxpZGF0ZSApO1xuXHRcdFx0dGhpcy5yZWdpc3Rlcl92YWxpZGF0b3IoICdjaG9pY2UnLCB0aGlzLnZhbGlkYXRlX2Nob2ljZSApO1xuXHRcdFx0dGhpcy5yZWdpc3Rlcl92YWxpZGF0b3IoICdwaWN0dXJlX2Nob2ljZScsIHRoaXMudmFsaWRhdGVfY2hvaWNlICk7XG5cdFx0XHR0aGlzLnJlZ2lzdGVyX3ZhbGlkYXRvciggJ3RydWVfZmFsc2UnLCB0aGlzLnZhbGlkYXRlX2Nob2ljZSApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEFkZCBhbiBlcnJvciBtZXNzYWdlIHRvIHRoZSBVSVxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICBtc2cgIGVycm9yIG1lc3NhZ2Ugc3RyaW5nXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdGFkZF9lcnJvcjogZnVuY3Rpb24oIG1zZyApIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRzZWxmLiRjb250YWluZXIuZmluZCggJy5sbG1zLWVycm9yJyApLnJlbW92ZSgpO1xuXHRcdFx0dmFyICRlcnIgPSAkKCAnPHAgY2xhc3M9XCJsbG1zLWVycm9yXCI+JyArIG1zZyArICc8YSBocmVmPVwiI1wiPjxpIGNsYXNzPVwiZmEgZmEtdGltZXMtY2lyY2xlXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjwvYT48L3A+JyApO1xuXHRcdFx0JGVyci5vbiggJ2NsaWNrJywgJ2EnLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHQkZXJyLmZhZGVPdXQoICcyMDAnICk7XG5cdFx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCRlcnIucmVtb3ZlKCk7XG5cdFx0XHRcdH0sIDIxMCApO1xuXHRcdFx0fSApO1xuXHRcdFx0c2VsZi4kY29udGFpbmVyLmFwcGVuZCggJGVyciApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEFuc3dlciBhIFF1ZXN0aW9uXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICRidG4gICBqUXVlcnkgb2JqZWN0IGZvciB0aGUgXCJOZXh0IExlc3NvblwiIGJ1dHRvblxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuNlxuXHRcdCAqL1xuXHRcdGFuc3dlcl9xdWVzdGlvbjogZnVuY3Rpb24oICRidG4gKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0JHF1ZXN0aW9uID0gdGhpcy4kY29udGFpbmVyLmZpbmQoICcubGxtcy1xdWVzdGlvbi13cmFwcGVyJyApLFxuXHRcdFx0XHR0eXBlID0gJHF1ZXN0aW9uLmF0dHIoICdkYXRhLXR5cGUnICksXG5cdFx0XHRcdHZhbGlkO1xuXG5cdFx0XHRpZiAoICEgdGhpcy52YWxpZGF0b3JzWyB0eXBlIF0gKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coICdObyB2YWxpZGF0b3IgcmVnaXN0ZXJlZCBmb3IgcXVlc3Rpb24gdHlwZSAnICsgdHlwZSApO1xuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdH1cblxuXHRcdFx0dmFsaWQgPSB0aGlzLnZhbGlkYXRvcnNbIHR5cGUgXSggJHF1ZXN0aW9uICk7XG5cdFx0XHRpZiAoICEgdmFsaWQgfHwgdHJ1ZSAhPT0gdmFsaWQudmFsaWQgfHwgIXZhbGlkLmFuc3dlciApIHtcblx0XHRcdFx0cmV0dXJuIHNlbGYuYWRkX2Vycm9yKCB2YWxpZC52YWxpZCApO1xuXHRcdFx0fVxuXG5cdFx0XHRMTE1TLkFqYXguY2FsbCgge1xuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0YWN0aW9uOiAncXVpel9hbnN3ZXJfcXVlc3Rpb24nLFxuXHRcdFx0XHRcdGFuc3dlcjogdmFsaWQuYW5zd2VyLFxuXHRcdFx0XHRcdGF0dGVtcHRfa2V5OiBzZWxmLmF0dGVtcHRfa2V5LFxuXHRcdFx0XHRcdHF1ZXN0aW9uX2lkOiAkcXVlc3Rpb24uYXR0ciggJ2RhdGEtaWQnICksXG5cdFx0XHRcdFx0cXVlc3Rpb25fdHlwZTogJHF1ZXN0aW9uLmF0dHIoICdkYXRhLXR5cGUnICksXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0dmFyIG1zZyA9ICRidG4uaGFzQ2xhc3MoICdsbG1zLWJ1dHRvbi1xdWl6LWNvbXBsZXRlJyApID8gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0dyYWRpbmcgUXVpei4uLicgKSA6IExMTVMubDEwbi50cmFuc2xhdGUoICdMb2FkaW5nIFF1ZXN0aW9uLi4uJyApO1xuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ3Nob3cnLCBtc2cgKTtcblxuXHRcdFx0XHRcdHNlbGYudXBkYXRlX3Byb2dyZXNzX2JhciggJ2luY3JlbWVudCcgKTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggciApIHtcblxuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ2hpZGUnICk7XG5cblx0XHRcdFx0XHRpZiAoIHIuZGF0YSAmJiByLmRhdGEuaHRtbCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gbG9hZCBodG1sIGZyb20gdGhlIGNhY2hlZCBxdWVzdGlvbnMgaWYgaXQgZXhpc3RzIGFscmVhZHlcblx0XHRcdFx0XHRcdGlmICggci5kYXRhLnF1ZXN0aW9uX2lkICYmIHNlbGYucXVlc3Rpb25zWyAncS0nICsgci5kYXRhLnF1ZXN0aW9uX2lkIF0gKSB7XG5cblx0XHRcdFx0XHRcdFx0c2VsZi5sb2FkX3F1ZXN0aW9uKCBzZWxmLnF1ZXN0aW9uc1sgJ3EtJyArIHIuZGF0YS5xdWVzdGlvbl9pZCBdICk7XG5cblx0XHRcdFx0XHRcdC8vIGxvYWQgaHRtbCBmcm9tIHNlcnZlciBpZiB0aGUgcXVlc3Rpb24ncyBuZXZlciBiZWVuIHNlZW4gYmVmb3JlXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRzZWxmLmxvYWRfcXVlc3Rpb24oIHIuZGF0YS5odG1sICk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCByLmRhdGEgJiYgci5kYXRhLnJlZGlyZWN0ICkge1xuXG5cdFx0XHRcdFx0XHRzZWxmLnJlZGlyZWN0KCByLmRhdGEucmVkaXJlY3QgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIHIubWVzc2FnZSApIHtcblxuXHRcdFx0XHRcdFx0c2VsZi4kY29udGFpbmVyLmFwcGVuZCggJzxwPicgKyByLm1lc3NhZ2UgKyAnPC9wPicgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdHZhciBtc2cgPSBMTE1TLmwxMG4udHJhbnNsYXRlKCAnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nICk7XG5cdFx0XHRcdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAnPHA+JyArIG1zZyArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIENvbXBsZXRlIHRoZSBxdWl6XG5cdFx0ICogQ2FsbGVkIHdoZW4gdGltZWQgcXVpenplcyByZWFjaCB0aW1lIGxpbWl0XG5cdFx0ICogJiBkdXJpbmcgdW5sb2FkIGV2ZW50cyB0byByZWNvcmQgdGhlIGF0dGVtcHQgYXMgYWJhbmRvbmVkXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMS4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy45LjBcblx0XHQgKi9cblx0XHRjb21wbGV0ZV9xdWl6OiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRMTE1TLkFqYXguY2FsbCgge1xuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0YWN0aW9uOiAncXVpel9lbmQnLFxuXHRcdFx0XHRcdGF0dGVtcHRfa2V5OiBzZWxmLmF0dGVtcHRfa2V5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ3Nob3cnLCAnR3JhZGluZyBRdWl6Li4uJyApO1xuXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCByICkge1xuXG5cdFx0XHRcdFx0c2VsZi50b2dnbGVfbG9hZGVyKCAnaGlkZScgKTtcblxuXHRcdFx0XHRcdGlmICggci5kYXRhICYmIHIuZGF0YS5yZWRpcmVjdCApIHtcblxuXHRcdFx0XHRcdFx0c2VsZi5yZWRpcmVjdCggci5kYXRhLnJlZGlyZWN0ICk7XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCByLm1lc3NhZ2UgKSB7XG5cblx0XHRcdFx0XHRcdHNlbGYuJGNvbnRhaW5lci5hcHBlbmQoICc8cD4nICsgci5tZXNzYWdlICsgJzwvcD4nICk7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHR2YXIgbXNnID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyApO1xuXHRcdFx0XHRcdFx0c2VsZi4kY29udGFpbmVyLmFwcGVuZCggJzxwPicgKyBtc2cgKyAnPC9wPicgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXRyaWV2ZSB0aGUgaW5kZXggb2YgYSBxdWVzdGlvbiBieSBxdWVzdGlvbiBpZFxuXHRcdCAqIEBwYXJhbSAgICBpbnQgICBxaWQgIFdQIFBvc3QgSUQgb2YgdGhlIHF1ZXN0aW9uXG5cdFx0ICogQHJldHVybiAgIGludFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0Z2V0X3F1ZXN0aW9uX2luZGV4OiBmdW5jdGlvbiggcWlkICkge1xuXG5cdFx0XHRyZXR1cm4gT2JqZWN0LmtleXMoIHRoaXMucXVlc3Rpb25zICkuaW5kZXhPZiggJ3EtJyArIHFpZCApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlZGlyZWN0IG9uIHF1aXogY29tbHBldGlvbiAvIHRpbWVvdXRcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgdXJsICByZWRpcmVjdCB1cmxcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjkuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHRyZWRpcmVjdDogZnVuY3Rpb24oIHVybCApIHtcblxuXHRcdFx0dGhpcy50b2dnbGVfbG9hZGVyKCAnc2hvdycsICdHcmFkaW5nIFF1aXouLi4nICk7XG5cdFx0XHR0aGlzLnN0YXR1cyA9IG51bGw7XG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm4gdG8gdGhlIHByZXZpb3VzIHF1ZXN0aW9uXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMS4wLjBcblx0IFx0ICogQHZlcnNpb24gIDMuMTYuNlxuXHRcdCAqL1xuXHRcdHByZXZpb3VzX3F1ZXN0aW9uOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdzaG93JywgTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0xvYWRpbmcgUXVlc3Rpb24uLi4nICkgKTtcblx0XHRcdHNlbGYudXBkYXRlX3Byb2dyZXNzX2JhciggJ2RlY3JlbWVudCcgKTtcblxuXHRcdFx0dmFyIGlkcyA9IE9iamVjdC5rZXlzKCBzZWxmLnF1ZXN0aW9ucyApLFxuXHRcdFx0XHRjdXJyID0gaWRzLmluZGV4T2YoICdxLScgKyBzZWxmLmN1cnJlbnRfcXVlc3Rpb24gKSxcblx0XHRcdFx0cHJldl9pZCA9IGlkc1swXTtcblxuXHRcdFx0aWYgKCBjdXJyID49IDEgKSB7XG5cdFx0XHRcdHByZXZfaWQgPSBpZHNbIGN1cnIgLSAxIF07XG5cdFx0XHR9XG5cblx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdoaWRlJyApO1xuXHRcdFx0XHRzZWxmLmxvYWRfcXVlc3Rpb24oIHNlbGYucXVlc3Rpb25zWyBwcmV2X2lkIF0gKTtcblx0XHRcdH0sIDEwMCApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlZ2lzdGVyIHF1ZXN0aW9uIHR5cGUgdmFsaWRhdG9yIGZ1bmN0aW9uc1xuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICAgIHR5cGUgIHF1ZXN0aW9uIHR5cGUgaWRcblx0XHQgKiBAcGFyYW0gICAgZnVuY3Rpb24gICBmdW5jICBjYWxsYmFjayBmdW5jdGlvbiB0byB2YWxpZGF0ZSB0aGUgcXVlc3Rpb24gd2l0aFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHRyZWdpc3Rlcl92YWxpZGF0b3I6IGZ1bmN0aW9uKCB0eXBlLCBmdW5jICkge1xuXG5cdFx0XHR0aGlzLnZhbGlkYXRvcnNbIHR5cGUgXSA9IGZ1bmM7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU3RhcnQgYSBRdWl6IHZpYSBBSkFYIGNhbGxcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjIxLjBcblx0XHQgKi9cblx0XHRzdGFydF9xdWl6OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0dGhpcy5sb2FkX3VpX2VsZW1lbnRzKCk7XG5cdFx0XHR0aGlzLiR1aSA9ICQoICcjbGxtcy1xdWl6LXVpJyApO1xuXHRcdFx0dGhpcy4kYnV0dG9ucyA9ICQoICcjbGxtcy1xdWl6LW5hdiBidXR0b24nICk7XG5cdFx0XHR0aGlzLiRjb250YWluZXIgPSAkKCAnI2xsbXMtcXVpei1xdWVzdGlvbi13cmFwcGVyJyApO1xuXG5cdFx0XHQvLyBiaW5kIHN1bWJpc3Npb24gZXZlbnQgZm9yIGFuc3dlcmluZyBxdWVzdGlvbnNcblx0XHRcdCQoICcjbGxtcy1uZXh0LXF1ZXN0aW9uLCAjbGxtcy1jb21wbGV0ZS1xdWl6JyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRzZWxmLmFuc3dlcl9xdWVzdGlvbiggJCggdGhpcyApICk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIGJpbmQgc3VibWlzc2lvbiBldmVudCBmb3IgbmF2aWdhdGluZyBiYWNrd2FyZHNcblx0XHRcdCQoICcjbGxtcy1wcmV2LXF1ZXN0aW9uJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRzZWxmLnByZXZpb3VzX3F1ZXN0aW9uKCk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdExMTVMuQWpheC5jYWxsKCB7XG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRhY3Rpb246ICdxdWl6X3N0YXJ0Jyxcblx0XHRcdFx0XHRhdHRlbXB0X2tleTogJCggJyNsbG1zLWF0dGVtcHQta2V5JyApLnZhbCgpLFxuXHRcdFx0XHRcdGxlc3Nvbl9pZCA6ICQoICcjbGxtcy1sZXNzb24taWQnICkudmFsKCksXG5cdFx0XHRcdFx0cXVpel9pZCA6ICQoICcjbGxtcy1xdWl6LWlkJyApLnZhbCgpLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdHNlbGYuc3RhdHVzID0gdHJ1ZTtcblx0XHRcdFx0XHQkKCAnI2xsbXMtcXVpei13cmFwcGVyLCAjcXVpei1zdGFydC1idXR0b24nICkucmVtb3ZlKCk7XG5cdFx0XHRcdFx0JCggJ2h0bWwsIGJvZHknICkuc3RvcCgpLmFuaW1hdGUoIHtzY3JvbGxUb3A6IDAgfSwgNTAwICk7XG5cdFx0XHRcdFx0c2VsZi50b2dnbGVfbG9hZGVyKCAnc2hvdycsIExMTVMubDEwbi50cmFuc2xhdGUoICdMb2FkaW5nIFF1aXouLi4nICkgKTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRlcnJvcjogZnVuY3Rpb24oIHIsIHMsIHQgKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coIHIsIHMsIHQgKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIHIgKSB7XG5cblx0XHRcdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdoaWRlJyApO1xuXG5cdFx0XHRcdFx0aWYgKCByLmRhdGEgJiYgci5kYXRhLmh0bWwgKSB7XG5cblx0XHRcdFx0XHRcdC8vIHN0YXJ0IHRoZSBxdWl6IHRpbWVyIHdoZW4gYSB0aW1lIGxpbWl0IGlzIHNldFxuXHRcdFx0XHRcdFx0aWYgKCByLmRhdGEudGltZV9saW1pdCApIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5zdGFydF9xdWl6X3RpbWVyKCByLmRhdGEudGltZV9saW1pdCApO1xuXHRcdFx0XHRcdFx0fVxuXG5cblx0XHRcdFx0XHRcdHNlbGYuYXR0ZW1wdF9rZXkgPSByLmRhdGEuYXR0ZW1wdF9rZXk7XG5cdFx0XHRcdFx0XHRzZWxmLnRvdGFsX3F1ZXN0aW9ucyA9IHIuZGF0YS50b3RhbDtcblxuXHRcdFx0XHRcdFx0c2VsZi5sb2FkX3F1ZXN0aW9uKCByLmRhdGEuaHRtbCApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggci5tZXNzYWdlICkge1xuXG5cdFx0XHRcdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAnPHA+JyArIHIubWVzc2FnZSArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0dmFyIG1zZyA9IExMTVMubDEwbi50cmFuc2xhdGUoICdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLicgKTtcblx0XHRcdFx0XHRcdHNlbGYuJGNvbnRhaW5lci5hcHBlbmQoICc8cD4nICsgbXNnICsgJzwvcD4nICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIHRoaXMgZml4ZXMgYW4gaXNzdWUgb24gaU9TIGRldmljZXMgd2hlcmUgdGhlIGxhYmVsIHJlcXVpcmVzIGEgZG91YmxlIGNsaWNrXG5cdFx0XHQvLyBkdWUgdG8gdGhlIHByZXNlbmNlIG9mIGEgaG92ZXIgZXZlbnQgJiB0aGUgcmVndWxhciBsYWJlbCBjbGlja1xuXHRcdFx0Ly8gdGhpcy4kdWkub24oICd0b3VjaHN0YXJ0JywgJ2xpLmxsbXMtY2hvaWNlIGxhYmVsJywgZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHQvLyAkKCB0aGlzICkuY2xpY2soKTtcblx0XHRcdC8vIH0gKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBTdGFydCBRdWl6IFRpbWVyXG5cdFx0ICogR2V0cyBtaW51dGVzIGZyb20gaGlkZGVuIGZpZWxkXG5cdFx0ICogTm90IHVzZWQgYXMgYWN0dWFsIHF1aXogdGltZXIuIFF1aXogaXMgdGltZWQgb24gdGhlIHNlcnZlciBmcm9tIHRoZSBxdWl6IGNsYXNzXG5cdFx0ICogQ2FsY3VsYXRlcyBtaW51dGVzIHRvIG1pbGxpc2Vjb25kcyBhbmQgdGhlbiBjb252ZXJ0cyB0byBob3VycyAvIG1pbnV0ZXNcblx0XHQgKiBXaGVuIHRpbWUgbGltaXQgcmVhY2hlcyAwIGNhbGxzIGNvbXBsZXRlX3F1aXooKSB0byBjb21wbGV0ZSBxdWl6LlxuXHRcdCAqIEByZXR1cm4gQ2FsbHMgZ2V0X2NvdW50X2Rvd24gYXQgYSBzZXQgaW50ZXJ2YWwgb2YgMSBzZWNvbmRcblx0XHQgKiBAc2luY2UgICAgMS4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0c3RhcnRfcXVpel90aW1lcjogZnVuY3Rpb24oIHRvdGFsX21pbnV0ZXMgKSB7XG5cblx0XHRcdC8vIGNyZWF0ZSBhbmQgYXBwZW5kIHRoZSBVSSBmb3IgdGhlIGNvdW50ZG93biBjbG9ja1xuXHRcdFx0dmFyICRlbCA9ICQoICc8ZGl2IGNsYXNzPVwibGxtcy1xdWl6LXRpbWVyXCIgaWQ9XCJsbG1zLXF1aXotdGltZXJcIiAvPicgKSxcblx0XHRcdFx0bXNnID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1RpbWUgUmVtYWluaW5nJyApO1xuXG5cdFx0XHQkZWwuYXBwZW5kKCAnPGkgY2xhc3M9XCJmYSBmYS1jbG9jay1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjxzcGFuIGNsYXNzPVwic2NyZWVuLXJlYWRlci10ZXh0XCI+JyArIG1zZyArICc8L3NwYW4+JyApO1xuXHRcdFx0JGVsLmFwcGVuZCggJzxkaXYgaWQ9XCJsbG1zLXRpbGVzXCIgY2xhc3M9XCJsbG1zLXRpbGVzXCI+PC9kaXY+JyApO1xuXG5cdFx0XHQkKCAnI2xsbXMtcXVpei1oZWFkZXInICkuYXBwZW5kKCAkZWwgKTtcblxuXHRcdFx0Ly8gc3RhcnQgdGhlIHRpbWVyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdHRhcmdldF9kYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyAoICggdG90YWxfbWludXRlcyAqIDYwICkgKiAxMDAwICksIC8vIHNldCB0aGUgY291bnRkb3duIGRhdGVcblx0XHRcdFx0dGltZV9saW1pdCA9ICggKCB0b3RhbF9taW51dGVzICogNjAgKSAqIDEwMDAgKSxcblx0XHRcdFx0Y291bnRkb3duID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xsbXMtdGlsZXMnKSwgLy8gZ2V0IHRhZyBlbGVtZW50XG5cdFx0XHRcdGRheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzOyAvLyB2YXJpYWJsZXMgZm9yIHRpbWUgdW5pdHNcblxuXHRcdFx0Ly9zZXQgYWN0dWFsIHRpbWVyXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5jb21wbGV0ZV9xdWl6KCk7XG5cdFx0XHR9LCB0aW1lX2xpbWl0ICsgMTAwMCApO1xuXG5cdFx0XHR0aGlzLmdldENvdW50ZG93bihcblx0XHRcdFx0dG90YWxfbWludXRlcyxcblx0XHRcdFx0dGFyZ2V0X2RhdGUsXG5cdFx0XHRcdHRpbWVfbGltaXQsXG5cdFx0XHRcdGRheXMsXG5cdFx0XHRcdGhvdXJzLFxuXHRcdFx0XHRtaW51dGVzLFxuXHRcdFx0XHRzZWNvbmRzLFxuXHRcdFx0XHRjb3VudGRvd25cblx0XHRcdCk7XG5cblx0XHRcdC8vIGNhbGwgZ2V0X2NvdW50X2Rvd24gZXZlcnkgMSBzZWNvbmRcblx0XHRcdHNldEludGVydmFsKCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNlbGYuZ2V0Q291bnRkb3duKFxuXHRcdFx0XHRcdHRvdGFsX21pbnV0ZXMsXG5cdFx0XHRcdFx0dGFyZ2V0X2RhdGUsXG5cdFx0XHRcdFx0dGltZV9saW1pdCxcblx0XHRcdFx0XHRkYXlzLFxuXHRcdFx0XHRcdGhvdXJzLFxuXHRcdFx0XHRcdG1pbnV0ZXMsXG5cdFx0XHRcdFx0c2Vjb25kcyxcblx0XHRcdFx0XHRjb3VudGRvd25cblx0XHRcdFx0KTtcblx0XHRcdH0sIDEwMDAgKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVHJpZ2dlciBldmVudHNcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgZXZlbnQgIGV2ZW50IHRvIHRyaWdnZXJcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0dHJpZ2dlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdC8vIHRyaWdnZXIgcXVlc3Rpb24gc3VibWlzc2lvbiBmb3IgdGhlIGN1cnJlbnQgcXVlc3Rpb25cblx0XHRcdGlmICggJ2Fuc3dlcl9xdWVzdGlvbicgPT09IGV2ZW50ICkge1xuXG5cdFx0XHRcdGlmICggdGhpcy5nZXRfcXVlc3Rpb25faW5kZXgoIHNlbGYuY3VycmVudF9xdWVzdGlvbiApID09PSBzZWxmLnRvdGFsX3F1ZXN0aW9ucyApIHtcblxuXHRcdFx0XHRcdCQoICcjbGxtcy1jb21wbGV0ZS1xdWl6JyApLnRyaWdnZXIoICdjbGljaycgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0JCggJyNsbG1zLW5leHQtcXVlc3Rpb24nICkudHJpZ2dlciggJ2NsaWNrJyApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIExvYWQgdGhlIEhUTUwgb2YgYSBxdWVzdGlvbiBpbnRvIHRoZSBET00gYW5kIHRoZSBxdWVzdGlvbiBjYWNoZVxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICBodG1sICBzdHJpbmcgb2YgaHRtbFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuOS4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuNlxuXHRcdCAqL1xuXHRcdGxvYWRfcXVlc3Rpb246IGZ1bmN0aW9uKCBodG1sICkge1xuXG5cdFx0XHR2YXIgJGh0bWwgPSAkKCBodG1sICksXG5cdFx0XHRcdHFpZCA9ICRodG1sLmF0dHIoICdkYXRhLWlkJyApO1xuXG5cdFx0XHQvLyBjYWNoZSB0aGUgcXVlc3Rpb24gSFRNTCBmb3IgZmFzdGVyIHJld2luZHNcblx0XHRcdGlmICggIXRoaXMucXVlc3Rpb25zWyAncS0nICsgcWlkIF0gKSB7XG5cdFx0XHRcdHRoaXMucXVlc3Rpb25zWyAncS0nICsgcWlkIF0gPSAkaHRtbDtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy51cGRhdGVfcHJvZ3Jlc3MoIHFpZCApO1xuXG5cdFx0XHR0aGlzLmN1cnJlbnRfcXVlc3Rpb24gPSBxaWQ7XG5cblx0XHRcdCQoIGRvY3VtZW50ICkudHJpZ2dlciggJ2xsbXMtcHJlLWFwcGVuZC1xdWVzdGlvbicsICRodG1sICk7XG5cblx0XHRcdHRoaXMuJGNvbnRhaW5lci5hcHBlbmQoICRodG1sICk7XG5cblx0XHRcdCQoIGRvY3VtZW50ICkudHJpZ2dlciggJ2xsbXMtcG9zdC1hcHBlbmQtcXVlc3Rpb24nLCAkaHRtbCApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIENvbnN0cnVjdHMgdGhlIHF1aXogVUkgJiBhZGRzIHRoZSBlbGVtZW50cyBpbnRvIHRoZSBET01cblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi45XG5cdFx0ICovXG5cdFx0bG9hZF91aV9lbGVtZW50czogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciAkaHRtbCA9ICQoICc8ZGl2IGNsYXNzPVwibGxtcy1xdWl6LXVpXCIgaWQ9XCJsbG1zLXF1aXotdWlcIiAvPicgKSxcblx0XHRcdFx0JGhlYWRlciA9ICQoICc8aGVhZGVyIGNsYXNzPVwibGxtcy1xdWl6LWhlYWRlclwiIGlkPVwibGxtcy1xdWl6LWhlYWRlclwiIC8+Jylcblx0XHRcdFx0JGZvb3RlciA9ICQoICc8Zm9vdGVyIGNsYXNzPVwibGxtcy1xdWl6LW5hdlwiIGlkPVwibGxtcy1xdWl6LW5hdlwiIC8+JyApO1xuXG5cdFx0XHQkZm9vdGVyLmFwcGVuZCggJzxidXR0b24gY2xhc3M9XCJidXR0b24gbGFyZ2UgbGxtcy1idXR0b24tYWN0aW9uXCIgaWQ9XCJsbG1zLW5leHQtcXVlc3Rpb25cIiBuYW1lPVwibGxtc19uZXh0X3F1ZXN0aW9uXCIgdHlwZT1cInN1Ym1pdFwiPicgKyBMTE1TLmwxMG4udHJhbnNsYXRlKCAnTmV4dCBRdWVzdGlvbicgKSArICc8L2J1dHRvbj4nICk7XG5cdFx0XHQkZm9vdGVyLmFwcGVuZCggJzxidXR0b24gY2xhc3M9XCJidXR0b24gbGFyZ2UgbGxtcy1idXR0b24tYWN0aW9uIGxsbXMtYnV0dG9uLXF1aXotY29tcGxldGVcIiBpZD1cImxsbXMtY29tcGxldGUtcXVpelwiIG5hbWU9XCJsbG1zX2NvbXBsZXRlX3F1aXpcIiB0eXBlPVwic3VibWl0XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+JyArIExMTVMubDEwbi50cmFuc2xhdGUoICdDb21wbGV0ZSBRdWl6JyApICsgJzwvYnV0dG9uPicgKTtcblx0XHRcdCRmb290ZXIuYXBwZW5kKCAnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBsbG1zLWJ1dHRvbi1zZWNvbmRhcnlcIiBpZD1cImxsbXMtcHJldi1xdWVzdGlvblwiIG5hbWU9XCJsbG1zX3ByZXZfcXVlc3Rpb25cIiB0eXBlPVwic3VibWl0XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+JyArIExMTVMubDEwbi50cmFuc2xhdGUoICdQcmV2aW91cyBRdWVzdGlvbicgKSArICc8L2J1dHRvbj4nICk7XG5cblx0XHRcdCRoZWFkZXIuYXBwZW5kKCAnPGRpdiBjbGFzcz1cImxsbXMtcHJvZ3Jlc3NcIj48ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyLWNvbXBsZXRlXCI+PC9kaXY+PC9kaXY+JyApO1xuXHRcdFx0JGZvb3Rlci5hcHBlbmQoICc8ZGl2IGNsYXNzPVwibGxtcy1xdWl6LWNvdW50ZXJcIiBpZD1cImxsbXMtcXVpei1jb3VudGVyXCI+PHNwYW4gY2xhc3M9XCJsbG1zLWN1cnJlbnRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsbG1zLXNlcFwiPi88L3NwYW4+PHNwYW4gY2xhc3M9XCJsbG1zLXRvdGFsXCI+PC9zcGFuPjwvZGl2PicpXG5cblx0XHRcdCRodG1sLmFwcGVuZCggJGhlYWRlciApXG5cdFx0XHRcdCAuYXBwZW5kKCAnPGRpdiBjbGFzcz1cImxsbXMtcXVpei1xdWVzdGlvbi13cmFwcGVyXCIgaWQ9XCJsbG1zLXF1aXotcXVlc3Rpb24td3JhcHBlclwiIC8+JyApXG5cdFx0XHRcdCAuYXBwZW5kKCAkZm9vdGVyICk7XG5cblx0XHRcdCQoICcjbGxtcy1xdWl6LXdyYXBwZXInICkuYWZ0ZXIoICRodG1sICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUGVyZm9ybSBhY3Rpb25zIG9uIHF1ZXN0aW9uIEhUTUwgYWZ0ZXIgaXQncyBiZWVuIGFwcGVuZGVkIHRvIHRoZSBET01cblx0XHQgKiBAcGFyYW0gICAgb2JqICAgICAgZXZlbnQgIGpzIGV2ZW50IG9iamVjdFxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAgICBodG1sICAganMgSFRNTCBvYmplY3Rcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjZcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi42XG5cdFx0ICovXG5cdFx0cG9zdF9hcHBlbmRfcXVlc3Rpb246IGZ1bmN0aW9uKCBldmVudCwgaHRtbCApIHtcblxuXHRcdFx0dmFyICRodG1sID0gJCggaHRtbCApO1xuXG5cdFx0XHRpZiAoICRodG1sLmZpbmQoICdhdWRpbycgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHdwLm1lZGlhZWxlbWVudC5pbml0aWFsaXplKCk7XG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2hvdyBvciBoaWRlIHRoZSBcImxvYWRpbmdcIiBzcGlubnIgd2l0aCBhbiBvcHRpb24gbWVzc2FnZVxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICBkaXNwbGF5ICBzaG93fGhpZGVcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgbXNnICAgICAgdGV4dCB0byBkaXNwbGF5IHdoZW4gc2hvd2luZ1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuOS4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuNlxuXHRcdCAqL1xuXHRcdHRvZ2dsZV9sb2FkZXI6IGZ1bmN0aW9uKCBkaXNwbGF5LCBtc2cgKSB7XG5cblx0XHRcdGlmICggJ3Nob3cnID09PSBkaXNwbGF5ICkge1xuXG5cdFx0XHRcdG1zZyA9IG1zZyB8fCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnTG9hZGluZy4uLicgKTtcblxuXHRcdFx0XHR0aGlzLiRidXR0b25zLmF0dHIoICdkaXNhYmxlZCcsICdkaXNhYmxlZCcgKTtcblxuXHRcdFx0XHR0aGlzLiRjb250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0TExNUy5TcGlubmVyLnN0YXJ0KCB0aGlzLiRjb250YWluZXIgKTtcblx0XHRcdFx0dGhpcy4kY29udGFpbmVyLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJsbG1zLXF1aXotbG9hZGluZ1wiPicgKyBMTE1TLmwxMG4udHJhbnNsYXRlKCBtc2cgKSArICc8L2Rpdj4nICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0TExNUy5TcGlubmVyLnN0b3AoIHRoaXMuJGNvbnRhaW5lciApO1xuXHRcdFx0XHR0aGlzLiRidXR0b25zLnJlbW92ZUF0dHIoICdkaXNhYmxlZCcgKTtcblx0XHRcdFx0dGhpcy4kY29udGFpbmVyLmZpbmQoICcubGxtcy1xdWl6LWxvYWRpbmcnICkucmVtb3ZlKCk7XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBVcGRhdGUgdGhlIHByb2dyZXNzIGJhciBhbmQgdG9nZ2xlIGJ1dHRvbiBhdmFsYWJpbGl0eSBiYXNlZCBvbiBxdWVzdGlvbiB0aGUgcXVlc3Rpb24gYmVpbmcgc2hvd25cblx0XHQgKiBAcGFyYW0gICAge1t0eXBlXX0gICBxaWQgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcmV0dXJuICAge1t0eXBlXX1cblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHVwZGF0ZV9wcm9ncmVzczogZnVuY3Rpb24oIHFpZCApIHtcblxuXHRcdFx0dmFyIGluZGV4ID0gdGhpcy5nZXRfcXVlc3Rpb25faW5kZXgoIHFpZCApLFxuXHRcdFx0XHRwcm9ncmVzcztcblxuXHRcdFx0aWYgKCAtMSA9PT0gaW5kZXggKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aW5kZXgrKztcblxuXHRcdFx0JCggJyNsbG1zLXF1aXotY291bnRlciAubGxtcy1jdXJyZW50JyApLnRleHQoIGluZGV4ICk7XG5cdFx0XHRpZiAoIGluZGV4ID09PSAxICkge1xuXHRcdFx0XHQkKCAnI2xsbXMtcXVpei1jb3VudGVyIC5sbG1zLXRvdGFsJyApLnRleHQoIHRoaXMudG90YWxfcXVlc3Rpb25zICk7XG5cdFx0XHRcdCQoICcjbGxtcy1xdWl6LWNvdW50ZXInICkuc2hvdygpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBoYW5kbGUgcHJldiBxdWVzdGlvblxuXHRcdFx0aWYgKCBpbmRleCA+PSAyICkge1xuXHRcdFx0XHQkKCAnI2xsbXMtcHJldi1xdWVzdGlvbicgKS5zaG93KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCAnI2xsbXMtcHJldi1xdWVzdGlvbicgKS5oaWRlKCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaW5kZXggPT09IHRoaXMudG90YWxfcXVlc3Rpb25zICkge1xuXHRcdFx0XHQkKCAnI2xsbXMtbmV4dC1xdWVzdGlvbicgKS5oaWRlKCk7XG5cdFx0XHRcdCQoICcjbGxtcy1jb21wbGV0ZS1xdWl6JyApLnNob3coKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoICcjbGxtcy1uZXh0LXF1ZXN0aW9uJyApLnNob3coKTtcblx0XHRcdFx0JCggJyNsbG1zLWNvbXBsZXRlLXF1aXonICkuaGlkZSgpO1xuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEluY3JlYXNlIHByb2dyZXNzIGJhciB1aSBlbG1lbnRcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgZGlyICB1cGRhdGUgZGlyZWN0aW9uIFtpbmNyZW1lbnR8ZGVjcmVtZW50XVxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHR1cGRhdGVfcHJvZ3Jlc3NfYmFyOiBmdW5jdGlvbiggZGlyICkge1xuXG5cdFx0XHR2YXIgaW5kZXggPSB0aGlzLmdldF9xdWVzdGlvbl9pbmRleCggdGhpcy5jdXJyZW50X3F1ZXN0aW9uICk7XG5cdFx0XHRpZiAoICdpbmNyZW1lbnQnID09PSBkaXIgKSB7XG5cdFx0XHRcdGluZGV4Kys7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpbmRleC0tO1xuXHRcdFx0fVxuXG5cdFx0XHRwcm9ncmVzcyA9ICggaW5kZXggLyB0aGlzLnRvdGFsX3F1ZXN0aW9ucyApICogMTAwO1xuXHRcdFx0dGhpcy4kdWkuZmluZCggJy5wcm9ncmVzcy1iYXItY29tcGxldGUnICkuY3NzKCAnd2lkdGgnLCBwcm9ncmVzcyArICclJyApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEdldCBDb3VudCBEb3duXG5cdFx0ICogQ2FsbGVkIGV2ZXJ5IHNlY29uZCB0byB1cGRhdGUgdGhlIG9uIHNjcmVlbiBjb3VudGRvd24gdGltZXJcblx0XHQgKiBDaGFuZ2VzIGNvbG9yIHRvIHllbGxvdyBhdCAxLzIgb2YgdG90YWwgdGltZVxuXHRcdCAqIENoYW5nZXMgY29sb3IgdG8gcmVkIGF0IDEvNCBvZiB0b3RhbCB0aW1lXG5cdFx0ICogQHBhcmFtICB7W2ludF19IG1pbnV0ZXMgICAgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcGFyYW0gIHtbZGF0ZV19IHRhcmdldF9kYXRlIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gdGltZV9saW1pdCAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSBkYXlzICAgICAgICBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHBhcmFtICB7W2ludF19IGhvdXJzICAgICAgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gbWludXRlcyAgICAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSBzZWNvbmRzICAgICBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHBhcmFtICB7W2ludF19IGNvdW50ZG93biAgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcmV0dXJuIERpc3BsYXlzIHVwZGF0ZXMgaG91cnMsIG1pbnV0ZXMgb24gcXVpeiB0aW1lclxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHQgXHQgKiBAdmVyc2lvbiAgMS4wLjBcblx0XHQgKi9cblx0XHRnZXRDb3VudGRvd246IGZ1bmN0aW9uKCB0b3RhbF9taW51dGVzLCB0YXJnZXRfZGF0ZSwgdGltZV9saW1pdCwgZGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIGNvdW50ZG93biApe1xuXG5cdFx0XHQvLyBmaW5kIHRoZSBhbW91bnQgb2YgXCJzZWNvbmRzXCIgYmV0d2VlbiBub3cgYW5kIHRhcmdldFxuXHRcdFx0dmFyIGN1cnJlbnRfZGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuXHRcdFx0XHRzZWNvbmRzX2xlZnQgPSAoIHRhcmdldF9kYXRlIC0gY3VycmVudF9kYXRlICkgLyAxMDAwO1xuXG5cdFx0XHRpZiAoIHNlY29uZHNfbGVmdCA+PSAwICkge1xuXG5cdFx0XHRcdGlmICggKCBzZWNvbmRzX2xlZnQgKiAxMDAwICkgPCAoIHRpbWVfbGltaXQgLyAyICkgKSAge1xuXG5cdFx0XHRcdFx0JCggJyNsbG1zLXF1aXotdGltZXInICkuYWRkQ2xhc3MoICdjb2xvci1oYWxmJyApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICggc2Vjb25kc19sZWZ0ICogMTAwMCApIDwgKCB0aW1lX2xpbWl0IC8gNCApICkgIHtcblxuXHRcdFx0XHRcdCQoICcjbGxtcy1xdWl6LXRpbWVyJyApLnJlbW92ZUNsYXNzKCAnY29sb3ItaGFsZicgKTtcblx0XHRcdFx0XHQkKCAnI2xsbXMtcXVpei10aW1lcicgKS5hZGRDbGFzcyggJ2NvbG9yLWVtcHR5JyApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkYXlzID0gdGhpcy5wYWQoIHBhcnNlSW50KHNlY29uZHNfbGVmdCAvIDg2NDAwKSApO1xuXHRcdFx0XHRzZWNvbmRzX2xlZnQgPSBzZWNvbmRzX2xlZnQgJSA4NjQwMDtcblx0XHRcdFx0aG91cnMgPSB0aGlzLnBhZCggcGFyc2VJbnQoc2Vjb25kc19sZWZ0IC8gMzYwMCkgKTtcblx0XHRcdFx0c2Vjb25kc19sZWZ0ID0gc2Vjb25kc19sZWZ0ICUgMzYwMDtcblx0XHRcdFx0bWludXRlcyA9IHRoaXMucGFkKCBwYXJzZUludCggc2Vjb25kc19sZWZ0IC8gNjAgKSApO1xuXHRcdFx0XHRzZWNvbmRzID0gdGhpcy5wYWQoIHBhcnNlSW50KCBzZWNvbmRzX2xlZnQgJSA2MCApICk7XG5cblx0XHRcdFx0Ly8gZm9ybWF0IGNvdW50ZG93biBzdHJpbmcgKyBzZXQgdGFnIHZhbHVlXG5cdFx0XHRcdGNvdW50ZG93bi5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJob3Vyc1wiPicgKyBob3VycyArICc8L3NwYW4+OjxzcGFuIGNsYXNzPVwibWludXRlc1wiPicgKyBtaW51dGVzICsgJzwvc3Bhbj46PHNwYW4gY2xhc3M9XCJzZWNvbmRzXCI+JyArIHNlY29uZHMgKyAnPC9zcGFuPic7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFBhZCBOdW1iZXJcblx0XHQgKiBwYWRzIG51bWJlciB3aXRoIDAgaWYgc2luZ2xlIGRpZ2l0LlxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSBuIFtudW1iZXJdXG5cdFx0ICogQHJldHVybiB7W3N0cmluZ119IFtwYWRkZWQgbnVtYmVyXVxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHQgXHQgKiBAdmVyc2lvbiAgMS4wLjBcblx0XHQgKi9cblx0XHRwYWQ6IGZ1bmN0aW9uKG4pIHtcblx0XHRcdHJldHVybiAobiA8IDEwID8gJzAnIDogJycpICsgbjtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQmFzaWMgdmFsaWRhdGlvbiBtZXRob2Qgd2hpY2ggcGVyZm9ybXMgbm8gdmFsaWRhdGlvbiBhbmQgcmV0dXJucyBhIHZhbGlhdGlvbiBvYmplY3Rcblx0XHQgKiBpbiB0aGUgZm9ybWF0IHJlcXVpcmVkIGJ5IHRoZSBhcHBsaWNhdGlvblxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkcXVlc3Rpb24gIGpRdWVyeSBzZWxlY3RvciBvZiB0aGUgcXVlc3Rpb25cblx0XHQgKiBAcmV0dXJuICAgb2JqXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHR2YWxpZGF0ZTogZnVuY3Rpb24oICRxdWVzdGlvbiApIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGFuc3dlcjogW10sXG5cdFx0XHRcdHZhbGlkOiB0cnVlLFxuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVmFsaWRhdGVzIGEgY2hvaWNlIHF1ZXN0aW9uIHRvIGVuc3VyZSB0aGVyZSdzIGF0IGxlYXN0IG9uZSBjaGVja2VkIGlucHV0XG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICRxdWVzdGlvbiAgalF1ZXJ5IHNlbGVjdG9yIG9mIHRoZSBxdWVzdGlvblxuXHRcdCAqIEByZXR1cm4gICBvYmpcblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHZhbGlkYXRlX2Nob2ljZTogZnVuY3Rpb24oICRxdWVzdGlvbiApIHtcblxuXHRcdFx0dmFyIHJldCA9IHdpbmRvdy5sbG1zLnF1aXp6ZXMudmFsaWRhdGUoICRxdWVzdGlvbiApLFxuXHRcdFx0XHRjaGVja2VkID0gJHF1ZXN0aW9uLmZpbmQoICdpbnB1dDpjaGVja2VkJyApO1xuXG5cdFx0XHRpZiAoICFjaGVja2VkLmxlbmd0aCApIHtcblx0XHRcdFx0cmV0LnZhbGlkID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1lvdSBtdXN0IHNlbGVjdCBhbiBhbnN3ZXIgdG8gY29udGludWUuJyApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2hlY2tlZC5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXQuYW5zd2VyLnB1c2goICQoIHRoaXMgKS52YWwoKSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXQ7XG5cblx0XHR9LFxuXG5cdH07XG5cblx0cXVpei5iaW5kKCk7XG5cblx0d2luZG93LmxsbXMgPSB3aW5kb3cubGxtcyB8fCB7fTtcblx0d2luZG93LmxsbXMucXVpenplcyA9IHF1aXo7XG5cbn0gKSggalF1ZXJ5ICk7XG4iXX0=
