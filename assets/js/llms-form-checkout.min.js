!function(o){window.llms=window.llms||{},window.llms.checkout=function(){return this.init=function(){o(".llms-checkout-wrapper").length&&(this.bind_login(),this.bind_coupon())},this.bind_coupon=function(){var n=this;o('a[href="#llms-coupon-toggle"]').on("click",function(n){n.preventDefault(),o(".llms-coupon-entry").slideToggle(400)}),o("#llms-apply-coupon").on("click",function(l){l.preventDefault(),n.coupon_apply(o(this))}),o("#llms-remove-coupon").on("click",function(l){l.preventDefault(),n.coupon_remove(o(this))})},this.bind_login=function(){o('a[href="#llms-show-login"]').on("click",function(n){n.preventDefault(),o(this).closest(".llms-info").slideUp(400),o("form.llms-login").slideDown(400)})},this.coupon_apply=function(n){var l=this,e=o("#llms_coupon_code"),i=e.val(),c=o(".llms-coupon-messages"),s=c.find(".llms-error"),t=o("form.llms-checkout");LLMS.Spinner.start(t),window.LLMS.Ajax.call({data:{action:"validate_coupon_code",code:i,plan_id:o("#llms-plan-id").val()},beforeSend:function(){s.hide()},success:function(n){if(LLMS.Spinner.stop(t),"error"===n.code){var e=o("<li>"+n.message+"</li>");s.length?s.empty():(s=o('<ul class="llms-error" />'),c.append(s)),e.appendTo(s),s.show()}else n.success&&(o(".llms-coupon-wrapper").replaceWith(n.data.coupon_html),l.bind_coupon(),o(".llms-order-summary").replaceWith(n.data.summary_html))}})},this.coupon_remove=function(n){var l=this,e=o("form.llms-checkout");LLMS.Spinner.start(e),window.LLMS.Ajax.call({data:{action:"remove_coupon_code",plan_id:o("#llms-plan-id").val()},success:function(n){LLMS.Spinner.stop(e),n.success&&(o(".llms-coupon-wrapper").replaceWith(n.data.coupon_html),l.bind_coupon(),o(".llms-order-summary").replaceWith(n.data.summary_html))}})},this.init(),this};new window.llms.checkout}(jQuery);