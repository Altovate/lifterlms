!function(t){window.llms=window.llms||{},window.llms.checkout=function(){return this.init=function(){this.bind(),this.bind_coupon(),this.bind_pricing(),this.set_price(),t(".llms-payment-methods input[type=radio]:checked").change(),this.init_user_fields()},this.bind=function(){var i=this;t("#llms_country_options").chosen({width:"100%"}),t(".llms-toggle").on("click",function(e){e.preventDefault(),i.toggle_user_fields(t(this))}),t(document).on("llms-payment-method-change",function(i,e){"creditcard"===e.type?t(".llms-creditcard-fields").slideDown(400):t(".llms-creditcard-fields").slideUp(400)})},this.bind_coupon=function(){var i=this;t(".llms-coupon-toggle-button").on("click",function(i){i.preventDefault();var e=t(this),n=e.closest(".llms-coupon-entry");$input=t("#llms-coupon-code"),n.toggleClass("active"),$input.attr("disabled")?$input.removeAttr("disabled"):$input.attr("disabled",!0)}),t("#llms-apply-coupon").on("click",function(e){e.preventDefault(),i.coupon_apply(t(this))}),t("#llms-remove-coupon").on("click",function(e){e.preventDefault(),i.coupon_remove(t(this))})},this.bind_pricing=function(){var i=this;t(".llms-payment-options input[type=radio]").on("change",function(){i.set_price()}),t(".llms-payment-methods input[type=radio]").on("change",function(){var i=t(this);t(document).trigger("llms-payment-method-change",{gateway:i.val(),type:i.attr("data-payment-type")})}),t(".llms-payment-options input[type=radio]:checked").trigger("change")},this.coupon_apply=function(i){var e=this,n=t("#llms-coupon-code"),s=n.val(),l=t(".llms-coupon-notice"),o=l.find(".llms-error"),c=t(".llms-coupon-entry");LLMS.Spinner.start(c),window.LLMS.Ajax.call({data:{action:"validate_coupon_code",code:s,product_id:t("#llms-product-id").val()},beforeSend:function(){o.hide()},success:function(i){if(LLMS.Spinner.stop(c),"error"===i.code){var n=t("<li>"+i.message+"</li>");o.length?o.empty():(o=t('<ul class="llms-error" />'),l.append(o)),n.appendTo(o),o.show()}else i.success&&(t("#llms-coupon-form").replaceWith(i.data.coupon_html),e.bind_coupon(),t("#llms-payment-options").replaceWith(i.data.pricing_html),e.bind_pricing())}})},this.coupon_remove=function(i){var e=this,n=t(".llms-coupon-entry");LLMS.Spinner.start(n),window.LLMS.Ajax.call({data:{action:"remove_coupon_code",product_id:t("#llms-product-id").val()},success:function(i){LLMS.Spinner.stop(n),i.success&&(t("#llms-coupon-form").replaceWith(i.data.coupon_html),e.bind_coupon(),t("#llms-payment-options").replaceWith(i.data.pricing_html),e.bind_pricing())}})},this.hide_user_fields=function(t){t.removeClass("active").find("input","select","textarea").attr("disabled",!0)},this.init_user_fields=function(){var i=this;t(".llms-user-fields").each(function(){var e=t(this);e.hasClass("active")?i.show_user_fields(e):i.hide_user_fields(e)})},this.show_user_fields=function(t){t.addClass("active").find("input","select","textarea").removeAttr("disabled")},this.toggle_user_fields=function(i){var e=i.closest(".llms-user-fields").attr("id"),n=t("#"+e),s=t("llms-login-fields"===e?"#llms-register-fields":"#llms-login-fields");this.hide_user_fields(n),this.show_user_fields(s)},this.set_price=function(){var i=t(".llms-payment-options input[type=radio]:checked"),e=i.parent().find("label").html();t(".llms-final-price").html(e)},this.init(),this};new window.llms.checkout}(jQuery);