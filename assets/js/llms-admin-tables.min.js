!function(i,t){window.llms=window.llms||{};window.llms.admin_tables=new function(){this.$tables=null,this.init=function(){var t=this;t.$tables=i(".llms-gb-table"),t.$tables.length&&t.bind()},this.bind=function(){var r=this;this.$tables.each(function(){var a,s,n,e=i(this);e.on("click",'button[name="llms-table-paging"]',function(t){t.preventDefault(),r.change_page(e,i(this))}),e.on("click",'button[name="llms-table-export"]',function(t){t.preventDefault(),r.export(e,i(this))}),e.on("click","a.llms-sortable",function(t){t.preventDefault(),r.change_order(e,i(this))}),e.parent().find(".llms-table-filters").on("change","select.llms-table-filter",function(t){r.change_filter(e,i(this))}),e.parent().find(".llms-table-search").on("keyup","input",(a=function(t){switch(t.keyCode){case 37:case 38:case 39:case 40:return;default:r.search(e,i(this))}},s=250,n=null,function(){var t=this,e=arguments;window.clearTimeout(n),n=window.setTimeout(function(){a.apply(t,e)},s)}))})},this.change_order=function(t,e){this.reload(t,{order:e.attr("data-order"),orderby:e.attr("data-orderby"),page:1})},this.change_filter=function(t,e){this.reload(t,{filter:e.val(),filterby:e.attr("name"),page:1})},this.change_page=function(t,e){this.reload(t,{order:this.get_args(t,"order"),orderby:this.get_args(t,"orderby"),page:e.attr("data-page")})},this.export=function(e,a,t){var s=this,n=e.find(".llms-table-export .llms-table-export-msg"),r=e.find(".llms-table-export .llms-table-progress");function l(){LLMS.Spinner.stop(a,"small"),a.removeAttr("disabled")}LLMS.Ajax.call({data:i.extend({action:"export_admin_table",handler:e.attr("data-handler"),file_path:t},JSON.parse(e.attr("data-args"))),beforeSend:function(){a.attr("disabled")||(a.attr("disabled","disabled"),LLMS.Spinner.start(a,"small"))},error:function(t,e,a){var s=LLMS.l10n.translate("An error was encountered generating the export");l(),r.hide(),n.html('<span class="llms-error">'+s+": "+a+"</span>"),console.error(t)},success:function(t){!t.success&&t.message?(l(),r.hide(),n.html('<span class="llms-error">'+t.message+"</span>")):t.success&&t.data&&t.data.progress&&(n.html(""),r.is("visible")||100===t.data.progress||r.css("display","inline-block"),r.find(".llms-table-progress-text").text(t.data.progress+"%"),r.find(".llms-table-progress-inner").css("width",t.data.progress+"%"),100!==t.data.progress?s.export(e,a,t.data.path):(window.location=t.data.url,setTimeout(function(){l(),r.hide()},1500)))}})},this.get_args=function(t,e){var a=JSON.parse(t.attr("data-args"));return e?!!a[e]&&a[e]:a},this.reload=function(e,t){t=i.extend({action:"get_admin_table_data",handler:e.attr("data-handler")},JSON.parse(e.attr("data-args")),t),LLMS.Ajax.call({data:t,beforeSend:function(){LLMS.Spinner.start(e.closest(".llms-table-wrap"))},success:function(t){LLMS.Spinner.stop(e.closest(".llms-table-wrap")),t.success&&(e.attr("data-args",t.data.args),e.find("thead").replaceWith(t.data.thead),e.find("tbody").replaceWith(t.data.tbody),e.find("tfoot").replaceWith(t.data.tfoot))}})},this.search=function(t,e){var a=e.val();len=a.length,(0===len||3<=len)&&this.reload(t,{page:1,search:e.val()})},this.init()}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMtYWRtaW4tdGFibGVzLmpzIl0sIm5hbWVzIjpbIiQiLCJ1bmRlZmluZWQiLCJ3aW5kb3ciLCJsbG1zIiwiYWRtaW5fdGFibGVzIiwidGhpcyIsIiR0YWJsZXMiLCJpbml0Iiwic2VsZiIsImxlbmd0aCIsImJpbmQiLCJlYWNoIiwiZm4iLCJkZWxheSIsInRpbWVyIiwiJHRhYmxlIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJjaGFuZ2VfcGFnZSIsImV4cG9ydCIsImNoYW5nZV9vcmRlciIsInBhcmVudCIsImZpbmQiLCJjaGFuZ2VfZmlsdGVyIiwia2V5Q29kZSIsInNlYXJjaCIsImNvbnRleHQiLCJhcmdzIiwiYXJndW1lbnRzIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImFwcGx5IiwiJGFuY2hvciIsInJlbG9hZCIsIm9yZGVyIiwiYXR0ciIsIm9yZGVyYnkiLCJwYWdlIiwiJHNlbGVjdCIsImZpbHRlciIsInZhbCIsImZpbHRlcmJ5IiwiJGJ0biIsImdldF9hcmdzIiwiZmlsZV9wYXRoIiwiJG1zZyIsIiRwcm9ncmVzcyIsImFjdGl2YXRlX2J1dHRvbiIsIkxMTVMiLCJTcGlubmVyIiwic3RvcCIsInJlbW92ZUF0dHIiLCJBamF4IiwiY2FsbCIsImRhdGEiLCJleHRlbmQiLCJhY3Rpb24iLCJoYW5kbGVyIiwiSlNPTiIsInBhcnNlIiwiYmVmb3JlU2VuZCIsInN0YXJ0IiwiZXJyb3IiLCJqcVhIUiIsInN0YXR1cyIsIm1zZyIsImwxMG4iLCJ0cmFuc2xhdGUiLCJoaWRlIiwiaHRtbCIsImNvbnNvbGUiLCJzdWNjZXNzIiwicmVzIiwibWVzc2FnZSIsInByb2dyZXNzIiwiaXMiLCJjc3MiLCJ0ZXh0IiwicGF0aCIsImxvY2F0aW9uIiwidXJsIiwiaXRlbSIsImNsb3Nlc3QiLCJyIiwicmVwbGFjZVdpdGgiLCJ0aGVhZCIsInRib2R5IiwidGZvb3QiLCIkaW5wdXQiLCJsZW4iLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQUtDLFNB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QUFTLFNBQVVZLEdBRWxCbkMsS0FBS0MsUUFBUUMsS0FBTXBDLEVBQU9vRSxRQUFTLHFCQUU5QkMsRUFBRVosVUFFTnpELEVBQU9xQixLQUFNLFlBQWFnRCxFQUFFN0IsS0FBSzNCLE1BRWpDYixFQUFPUSxLQUFNLFNBQVU4RCxZQUFhRCxFQUFFN0IsS0FBSytCLE9BQzNDdkUsRUFBT1EsS0FBTSxTQUFVOEQsWUFBYUQsRUFBRTdCLEtBQUtnQyxPQUMzQ3hFLEVBQU9RLEtBQU0sU0FBVThELFlBQWFELEVBQUU3QixLQUFLaUMsWUFpQi9DbkYsS0FBS3FCLE9BQVMsU0FBVVgsRUFBUTBFLEdBRS9CLElBQUloRCxFQUFNZ0QsRUFBT2hELE1BQ2hCaUQsSUFBTWpELEVBQUloQyxRQUVOLElBQU1pRixLQUFjLEdBQVBBLE1BQ2pCckYsS0FBSzZCLE9BQVFuQixFQUFRLENBQ3BCdUIsS0FBTSxFQUNOWixPQUFRK0QsRUFBT2hELFNBMkJsQnBDLEtBQUtFLFFBeFROLENBK1RJb0YiLCJmaWxlIjoibGxtcy1hZG1pbi10YWJsZXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWZ0ZXJMTVMgQWRtaW4gVGFibGVzXG4gKiBAc2luY2UgICAgMy4yLjBcbiAqIEB2ZXJzaW9uICAzLjI4LjBcbiAqL1xuOyggZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcblxuXHR3aW5kb3cubGxtcyA9IHdpbmRvdy5sbG1zIHx8IHt9O1xuXG5cdHZhciBBZG1pblRhYmxlcyA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0dGhpcy4kdGFibGVzID0gbnVsbDtcblxuXHRcdC8qKlxuXHRcdCAqIEluaXRpYWxpemVcblx0XHQgKiBAcmV0dXJuIHZvaWRcblx0XHQgKiBAc2luY2UgIDMuMi4wXG5cdFx0ICovXG5cdFx0dGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0c2VsZi4kdGFibGVzID0gJCggJy5sbG1zLWdiLXRhYmxlJyApO1xuXG5cdFx0XHRpZiAoIHNlbGYuJHRhYmxlcy5sZW5ndGggKSB7XG5cdFx0XHRcdHNlbGYuYmluZCgpO1xuXHRcdFx0fVxuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgRE9NIGV2ZW50c1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDIuMy4wXG5cdFx0ICogQHZlcnNpb24gIDMuMjguMFxuXHRcdCAqL1xuXHRcdHRoaXMuYmluZCA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHRoaXMuJHRhYmxlcy5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHR2YXIgJHRhYmxlID0gJCggdGhpcyApO1xuXG5cdFx0XHRcdCR0YWJsZS5vbiggJ2NsaWNrJywgJ2J1dHRvbltuYW1lPVwibGxtcy10YWJsZS1wYWdpbmdcIl0nLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0c2VsZi5jaGFuZ2VfcGFnZSggJHRhYmxlLCAkKCB0aGlzICkgKTtcblx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdCR0YWJsZS5vbiggJ2NsaWNrJywgJ2J1dHRvbltuYW1lPVwibGxtcy10YWJsZS1leHBvcnRcIl0nLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0c2VsZi5leHBvcnQoICR0YWJsZSwgJCggdGhpcyApICk7XG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0XHQkdGFibGUub24oICdjbGljaycsICdhLmxsbXMtc29ydGFibGUnLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0c2VsZi5jaGFuZ2Vfb3JkZXIoICR0YWJsZSwgJCggdGhpcyApICk7XG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0XHQkdGFibGUucGFyZW50KCkuZmluZCggJy5sbG1zLXRhYmxlLWZpbHRlcnMnICkub24oICdjaGFuZ2UnLCAnc2VsZWN0LmxsbXMtdGFibGUtZmlsdGVyJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRcdFx0c2VsZi5jaGFuZ2VfZmlsdGVyKCAkdGFibGUsICQoIHRoaXMgKSApO1xuXHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0JHRhYmxlLnBhcmVudCgpLmZpbmQoICcubGxtcy10YWJsZS1zZWFyY2gnICkub24oICdrZXl1cCcsICdpbnB1dCcsIGRlYm91bmNlKCBmdW5jdGlvbiggZSApIHtcblxuXHRcdFx0XHRcdHN3aXRjaCAoIGUua2V5Q29kZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAzNzpcblx0XHRcdFx0XHRcdGNhc2UgMzg6XG5cdFx0XHRcdFx0XHRjYXNlIDM5OlxuXHRcdFx0XHRcdFx0Y2FzZSA0MDpcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdHNlbGYuc2VhcmNoKCAkdGFibGUsICQoIHRoaXMgKSApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0sIDI1MCApICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBIYW5kbGUgY2xpY2tzIG9uIHNvcnRhYmxlIGNvbHVtbiBoZWFkZXJzXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICR0YWJsZSAgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIGN1cnJlbnQgdGFibGVcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJGFuY2hvciAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgY2xpY2tlZCBjb2x1bW4gaGVhZCBhbmNob3Jcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjIuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjIuMFxuXHRcdCAqL1xuXHRcdHRoaXMuY2hhbmdlX29yZGVyID0gZnVuY3Rpb24oICR0YWJsZSwgJGFuY2hvciApIHtcblxuXHRcdFx0dGhpcy5yZWxvYWQoICR0YWJsZSwge1xuXHRcdFx0XHRvcmRlcjogJGFuY2hvci5hdHRyKCAnZGF0YS1vcmRlcicgKSxcblx0XHRcdFx0b3JkZXJieTogJGFuY2hvci5hdHRyKCAnZGF0YS1vcmRlcmJ5JyApLFxuXHRcdFx0XHRwYWdlOiAxLFxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdHRoaXMuY2hhbmdlX2ZpbHRlciA9IGZ1bmN0aW9uKCAkdGFibGUsICRzZWxlY3QgKSB7XG5cblx0XHRcdHRoaXMucmVsb2FkKCAkdGFibGUsIHtcblx0XHRcdFx0ZmlsdGVyOiAkc2VsZWN0LnZhbCgpLFxuXHRcdFx0XHRmaWx0ZXJieTogJHNlbGVjdC5hdHRyKCAnbmFtZScgKSxcblx0XHRcdFx0cGFnZTogMSxcblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBDaGFuZ2UgdGhlIGN1cnJlbnQgcGFnZSBvZiB0aGUgdGFibGUgb24gYSBuZXh0L2JhY2sgY2xpY2tcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJHRhYmxlICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSBjdXJyZW50IHRhYmxlXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICRidG4gICAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgY2xpY2tlZCBidXR0b25cblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjIuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjQuMFxuXHRcdCAqL1xuXHRcdHRoaXMuY2hhbmdlX3BhZ2UgPSBmdW5jdGlvbiggJHRhYmxlLCAkYnRuICkge1xuXG5cdFx0XHR0aGlzLnJlbG9hZCggJHRhYmxlLCB7XG5cdFx0XHRcdG9yZGVyOiB0aGlzLmdldF9hcmdzKCAkdGFibGUsICdvcmRlcicgKSxcblx0XHRcdFx0b3JkZXJieTogdGhpcy5nZXRfYXJncyggJHRhYmxlLCAnb3JkZXJieScgKSxcblx0XHRcdFx0cGFnZTogJGJ0bi5hdHRyKCAnZGF0YS1wYWdlJyApLFxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEhhbmRsZVxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkdGFibGUgIGpRdWVyeSBvYmplY3QgZm9yIHRoZSB0YWJsZVxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkYnRuICAgIGpRdWVyeSBvYmplY3QgZm9yIHRoZSBjbGlja2VkIGJ1dHRvblxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTUuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjI4LjBcblx0XHQgKi9cblx0XHR0aGlzLmV4cG9ydCA9IGZ1bmN0aW9uKCAkdGFibGUsICRidG4sIGZpbGVfcGF0aCApIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHQkbXNnID0gJHRhYmxlLmZpbmQoICcubGxtcy10YWJsZS1leHBvcnQgLmxsbXMtdGFibGUtZXhwb3J0LW1zZycgKSxcblx0XHRcdFx0JHByb2dyZXNzID0gJHRhYmxlLmZpbmQoICcubGxtcy10YWJsZS1leHBvcnQgLmxsbXMtdGFibGUtcHJvZ3Jlc3MnICk7XG5cblx0XHRcdGZ1bmN0aW9uIGFjdGl2YXRlX2J1dHRvbigpIHtcblx0XHRcdFx0TExNUy5TcGlubmVyLnN0b3AoICRidG4sICdzbWFsbCcgKTtcblx0XHRcdFx0JGJ0bi5yZW1vdmVBdHRyKCAnZGlzYWJsZWQnICk7XG5cdFx0XHR9XG5cblx0XHRcdExMTVMuQWpheC5jYWxsKCB7XG5cdFx0XHRcdGRhdGE6ICQuZXh0ZW5kKCB7XG5cdFx0XHRcdFx0YWN0aW9uOiAnZXhwb3J0X2FkbWluX3RhYmxlJyxcblx0XHRcdFx0XHRoYW5kbGVyOiAkdGFibGUuYXR0ciggJ2RhdGEtaGFuZGxlcicgKSxcblx0XHRcdFx0XHRmaWxlX3BhdGg6IGZpbGVfcGF0aCxcblx0XHRcdFx0fSwgSlNPTi5wYXJzZSggJHRhYmxlLmF0dHIoICdkYXRhLWFyZ3MnICkgKSApLFxuXHRcdFx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdGlmICggISAkYnRuLmF0dHIoICdkaXNhYmxlZCcgKSApIHtcblx0XHRcdFx0XHRcdCRidG4uYXR0ciggJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyApO1xuXHRcdFx0XHRcdFx0TExNUy5TcGlubmVyLnN0YXJ0KCAkYnRuLCAnc21hbGwnICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGVycm9yOiBmdW5jdGlvbigganFYSFIsIHN0YXR1cywgZXJyb3IgKSB7XG5cblx0XHRcdFx0XHR2YXIgbXNnID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0FuIGVycm9yIHdhcyBlbmNvdW50ZXJlZCBnZW5lcmF0aW5nIHRoZSBleHBvcnQnICk7XG5cdFx0XHRcdFx0YWN0aXZhdGVfYnV0dG9uKCk7XG5cdFx0XHRcdFx0JHByb2dyZXNzLmhpZGUoKTtcblx0XHRcdFx0XHQkbXNnLmh0bWwoICc8c3BhbiBjbGFzcz1cImxsbXMtZXJyb3JcIj4nICsgbXNnICsgJzogJyArIGVycm9yICsgJzwvc3Bhbj4nICk7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcigganFYSFIgKTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggcmVzICkge1xuXG5cdFx0XHRcdFx0aWYgKCAhIHJlcy5zdWNjZXNzICYmIHJlcy5tZXNzYWdlICkge1xuXG5cdFx0XHRcdFx0XHRhY3RpdmF0ZV9idXR0b24oKTtcblx0XHRcdFx0XHRcdCRwcm9ncmVzcy5oaWRlKCk7XG5cdFx0XHRcdFx0XHQkbXNnLmh0bWwoICc8c3BhbiBjbGFzcz1cImxsbXMtZXJyb3JcIj4nICsgcmVzLm1lc3NhZ2UgKyAnPC9zcGFuPicgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIHJlcy5zdWNjZXNzICYmIHJlcy5kYXRhICYmIHJlcy5kYXRhLnByb2dyZXNzICkge1xuXG5cdFx0XHRcdFx0XHQkbXNnLmh0bWwoICcnICk7XG5cblx0XHRcdFx0XHRcdC8vIG9ubHkgc2hvdyBhIHByb2dyZXNzIGJhciBpZiBpdCdzIGdvaW5nIHRvIHRha2UgbW9yZSB0aGFuIG9uZSByZXF1ZXN0LlxuXHRcdFx0XHRcdFx0aWYgKCAhICRwcm9ncmVzcy5pcyggJ3Zpc2libGUnICkgJiYgcmVzLmRhdGEucHJvZ3Jlc3MgIT09IDEwMCApIHtcblx0XHRcdFx0XHRcdFx0JHByb2dyZXNzLmNzcyggJ2Rpc3BsYXknLCAnaW5saW5lLWJsb2NrJyApO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQkcHJvZ3Jlc3MuZmluZCggJy5sbG1zLXRhYmxlLXByb2dyZXNzLXRleHQnICkudGV4dCggcmVzLmRhdGEucHJvZ3Jlc3MgKyAnJScgKTtcblx0XHRcdFx0XHRcdCRwcm9ncmVzcy5maW5kKCAnLmxsbXMtdGFibGUtcHJvZ3Jlc3MtaW5uZXInICkuY3NzKCAnd2lkdGgnLCByZXMuZGF0YS5wcm9ncmVzcyArICclJyApO1xuXG5cdFx0XHRcdFx0XHQvLyBpZiB3ZSdyZSBub3QgZmluaXNoZWQsIG1ha2UgYW5vdGhlciByZXF1ZXN0LlxuXHRcdFx0XHRcdFx0aWYgKCAxMDAgIT09IHJlcy5kYXRhLnByb2dyZXNzICkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLmV4cG9ydCggJHRhYmxlLCAkYnRuLCByZXMuZGF0YS5wYXRoICk7XG5cblx0XHRcdFx0XHRcdC8vIGZpbmlzaGVkLCBkb3dubG9hZCB0aGUgZmlsZSBhbmQgY2xlYW51cCB0aGUgaW50ZXJmYWNlLlxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gcmVzLmRhdGEudXJsO1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRhY3RpdmF0ZV9idXR0b24oKTtcblx0XHRcdFx0XHRcdFx0XHQkcHJvZ3Jlc3MuaGlkZSgpO1xuXHRcdFx0XHRcdFx0XHR9LCAxNTAwICk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogUmV0cmlldmUgYXJndW1lbnRzIHN0b3JlZCBpbiB0aGUgdGFibGUgYW5kIHBhcnNlIGludG8gYSByZWFkYWJsZSBvYmplY3Rcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgICAkdGFibGUgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIGN1cnJlbnQgdGFibGVcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICBpdGVtICAgIGtleSB0byBncmFiIGEgc3BlY2lmaWMgdmFsdWUgZnJvbSB0aGUgYXJncyBvYmplY3Rcblx0XHQgKiBAcmV0dXJuICAgbWl4ZWRcblx0XHQgKiBAc2luY2UgICAgMy4yLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4yLjBcblx0XHQgKi9cblx0XHR0aGlzLmdldF9hcmdzID0gZnVuY3Rpb24oICR0YWJsZSwgaXRlbSApIHtcblxuXHRcdFx0dmFyIGFyZ3MgPSBKU09OLnBhcnNlKCAkdGFibGUuYXR0ciggJ2RhdGEtYXJncycgKSApO1xuXG5cdFx0XHRpZiAoIGl0ZW0gKSB7XG5cdFx0XHRcdHJldHVybiAoIGFyZ3NbIGl0ZW0gXSApID8gYXJnc1sgaXRlbSBdIDogZmFsc2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gYXJncztcblx0XHRcdH1cblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBSZWxvYWQgYSB0YWJsZVxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkdGFibGUgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIGN1cnJlbnQgdGFibGVcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgYXJncyAgICBhcmd1ZW1lbnRzIHRvIHBhc3Mgd2l0aCB0aGUgYWpheCBxdWVyeVxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMi4wXG5cdFx0ICovXG5cdFx0dGhpcy5yZWxvYWQgPSBmdW5jdGlvbiggJHRhYmxlLCBhcmdzICkge1xuXG5cdFx0XHRhcmdzID0gJC5leHRlbmQoIHtcblx0XHRcdFx0YWN0aW9uOiAnZ2V0X2FkbWluX3RhYmxlX2RhdGEnLFxuXHRcdFx0XHRoYW5kbGVyOiAkdGFibGUuYXR0ciggJ2RhdGEtaGFuZGxlcicgKSxcblx0XHRcdH0sIEpTT04ucGFyc2UoICR0YWJsZS5hdHRyKCAnZGF0YS1hcmdzJyApICksIGFyZ3MgKTtcblxuXHRcdFx0TExNUy5BamF4LmNhbGwoIHtcblx0XHRcdFx0ZGF0YTogYXJncyxcblx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRMTE1TLlNwaW5uZXIuc3RhcnQoICR0YWJsZS5jbG9zZXN0KCAnLmxsbXMtdGFibGUtd3JhcCcgKSApO1xuXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCByICkge1xuXG5cdFx0XHRcdFx0TExNUy5TcGlubmVyLnN0b3AoICR0YWJsZS5jbG9zZXN0KCAnLmxsbXMtdGFibGUtd3JhcCcgKSApXG5cblx0XHRcdFx0XHRpZiAoIHIuc3VjY2VzcyApIHtcblxuXHRcdFx0XHRcdFx0JHRhYmxlLmF0dHIoICdkYXRhLWFyZ3MnLCByLmRhdGEuYXJncyApO1xuXG5cdFx0XHRcdFx0XHQkdGFibGUuZmluZCggJ3RoZWFkJyApLnJlcGxhY2VXaXRoKCByLmRhdGEudGhlYWQgKTtcblx0XHRcdFx0XHRcdCR0YWJsZS5maW5kKCAndGJvZHknICkucmVwbGFjZVdpdGgoIHIuZGF0YS50Ym9keSApO1xuXHRcdFx0XHRcdFx0JHRhYmxlLmZpbmQoICd0Zm9vdCcgKS5yZXBsYWNlV2l0aCggci5kYXRhLnRmb290ICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEV4ZWN1dGVzIGFuIEFKQVggc2VhcmNoIHF1ZXJ5XG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICR0YWJsZSAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgY3VycmVudCB0YWJsZVxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkaW5wdXQgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIHNlYXJjaCBpbnB1dFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMi4wXG5cdFx0ICovXG5cdFx0dGhpcy5zZWFyY2ggPSBmdW5jdGlvbiggJHRhYmxlLCAkaW5wdXQgKSB7XG5cblx0XHRcdHZhciB2YWwgPSAkaW5wdXQudmFsKClcblx0XHRcdFx0bGVuID0gdmFsLmxlbmd0aDtcblxuXHRcdFx0aWYgKCAwID09PSBsZW4gfHwgbGVuID49IDMgKSB7XG5cdFx0XHRcdHRoaXMucmVsb2FkKCAkdGFibGUsIHtcblx0XHRcdFx0XHRwYWdlOiAxLFxuXHRcdFx0XHRcdHNlYXJjaDogJGlucHV0LnZhbCgpLFxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogVGhyb3R0bGUgZnVuY3Rpb24gYnkgYSBkZWxheSBpbiBtc1xuXHRcdCAqIEBwYXJhbSAgICBGdW5jdGlvbiAgZm4gICAgIGNhbGxiYWNrIGZ1bmN0aW9uXG5cdFx0ICogQHBhcmFtICAgIGludCAgICAgICBkZWxheSAgZGVsYXkgaW4gbWlsbGlzZWNvbmRcblx0XHQgKiBAcmV0dXJuICAgZnVuY3Rpb25cblx0XHQgKiBAc2luY2UgICAgMy4yLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4yLjBcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBkZWJvdW5jZSggZm4sIGRlbGF5ICkge1xuXHRcdFx0dmFyIHRpbWVyID0gbnVsbDtcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBjb250ZXh0ID0gdGhpcyxcblx0XHRcdFx0XHRhcmdzID0gYXJndW1lbnRzO1xuXHRcdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aW1lciApO1xuXHRcdFx0XHR0aW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0Zm4uYXBwbHkoIGNvbnRleHQsIGFyZ3MgKTtcblx0XHRcdFx0fSwgZGVsYXkgKTtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gZ29cblx0XHR0aGlzLmluaXQoKTtcblxuXHR9O1xuXG5cdC8vIGluaXRhbGl6ZSB0aGUgb2JqZWN0XG5cdHdpbmRvdy5sbG1zLmFkbWluX3RhYmxlcyA9IG5ldyBBZG1pblRhYmxlcygpO1xuXG59ICkoIGpRdWVyeSApO1xuIl19
