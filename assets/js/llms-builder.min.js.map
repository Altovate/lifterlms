{"version":3,"sources":["../../../config-wrap-start-default.js","../vendor/almond.js","Mixins/Syncable.js","Models/Lesson.js","Mixins/SortableCollection.js","Collections/Lessons.js","Models/Section.js","Collections/Sections.js","Collections/loader.js","Models/Course.js","Models/loader.js","Mixins/EditableView.js","Views/Course.js","Mixins/ShiftableView.js","Views/Lesson.js","Mixins/SortableView.js","Views/LessonList.js","Views/LessonSearchPopover.js","Views/Main.js","Views/Tools.js","Views/Tutorial.js","Views/Section.js","Views/SectionList.js","Views/loader.js","main.js"],"names":["requirejs","require","define","undef","hasProp","obj","prop","hasOwn","call","normalize","name","baseName","nameParts","nameSegment","mapValue","foundMap","lastIndex","foundI","foundStarMap","starI","i","j","part","normalizedBaseParts","baseParts","split","map","config","starMap","length","nodeIdCompat","jsSuffixRegExp","test","replace","charAt","slice","concat","splice","join","makeRequire","relName","forceSync","args","aps","arguments","push","req","apply","makeNormalize","makeLoad","depName","value","defined","callDep","waiting","defining","main","Error","splitPrefix","prefix","index","indexOf","substring","makeRelParts","makeConfig","makeMap","handlers","Object","prototype","hasOwnProperty","relParts","plugin","parts","relResourceName","f","n","pr","p","exports","e","module","id","uri","deps","callback","cjsModule","ret","usingExports","callbackType","load","undefined","alt","setTimeout","cfg","_defined","amd","jQuery","url","ajaxurl","action","sync","method","object","options","data","Backbone","Model","object_type","Collection","course_id","window","llms_builder","course","action_type","data_type","type_id","_ajax_nonce","wp_ajax_data","nonce","this","json","toJSON","formattedJSON","Array","models","model","_","extend","emulateJSON","Syncable","defaults","order","collection","next_order","title","LLMS","l10n","translate","type","section_id","edit_url","view_url","date_available","days_before_available","drip_method","has_content","is_free","prerequisite","quiz","initialize","listenTo","detach","set","remove","save","beforeSend","Instance","Status","add","success","res","get_section","Syllabus","get","comparator","events","change:order","last","sync_order","uniqueId","error","jqxhr","status","msg","console","log","SortableCollection","active","lessons","get_next","at","get_prev","Sortable","parse","response","Lessons","Sections","Course","Lesson","Section","focusout .llms-editable-title","keydown .llms-editable-title","has_changed","event","$el","$","target","attr","text","on_blur","stopPropagation","save_edits","on_keydown","which","keyCode","preventDefault","blur","revert_edits","val","save_id","Editable","View","attributes","data-id","className","el","tagName","template","wp","render","html","click .llms-action-icon.shift-down","click .llms-action-icon.shift-up","shift_down","trigger","shift_up","Shiftable","data-section-id","drop-lesson","update-parent","click .llms-action-icon.section-prev","click .llms-action-icon.section-next","click .llms-action-icon.trash","click .llms-action-icon.detach","delete_lesson","confirm","del_id","destroy","detach_lesson","drop","$item","to_section_id","from_section_id","self","to_collection","from_collection","auto_save","create","section_next","from_section","to_section","addClass","section_prev","update_parent","item","closest","update-sort","sort_collection","each","update_sort","to_self","remove_from_collection","LessonView","add_one","lesson","view","append","remove_one","children","select2:select","add_lesson","WebuiPopovers","hide","Tools","create_item","params","llmsSelect2","ajax","dataType","delay","term","page","placeholder","dropdownParent","width","pubSub","on","bind_all","loading_start","loading_stop","Spinner","start","draggable","sortable","cancel","connectToSortable","helper","section","Models","Views","stop","removeClass","cursor","cursorAt","top","left","handle","items","tolerance","ui","css","connectWith","curr_section","removeAttr","receive","over","offsetParent","out","click button.llms-add-item","click button#llms-existing-lesson","click a.bulk-toggle","add_item","$btn","bulk_toggle","App","Methods","get_last_section","$wrap","animate","scrollTop","scrollHeight","clientHeight","maybe_disable","$btns","show_search_popover","show","animation","backdrop","content","LessonSearchPopover","closeable","dismissible","multi","placement","onShow","$popover","one","click #llms-start-tut","is_active","current_step","steps","get_current_step","tutorial","maybe_render","fadeOut","fadeIn","show_next_step","next_step","step","$content","content_main","content_action","buttons","find","onHide","LessonCollection","LessonListView","classes","click .llms-action-icon.expand","click .llms-action-icon.collapse","drop-section","delete_section","alert","lessons_hide","lessons_show","setElement","SectionView","destroy_one","fetch","LessonList","Main","Tutorial","SectionList","Events","Collections","resize_builder","height","saving","update_dom","without","resize_timeout","clearTimeout"],"mappings":"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","file":"llms-builder.min.js","sourcesContent":["(function () {\n","/**\n * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.\n * Released under MIT license, http://github.com/requirejs/almond/LICENSE\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n\tvar main, req, makeMap, handlers,\n\t\tdefined = {},\n\t\twaiting = {},\n\t\tconfig = {},\n\t\tdefining = {},\n\t\thasOwn = Object.prototype.hasOwnProperty,\n\t\taps = [].slice,\n\t\tjsSuffixRegExp = /\\.js$/;\n\n\tfunction hasProp(obj, prop) {\n\t\treturn hasOwn.call(obj, prop);\n\t}\n\n\t/**\n\t * Given a relative module name, like ./something, normalize it to\n\t * a real name that can be mapped to a path.\n\t * @param {String} name the relative name\n\t * @param {String} baseName a real name that the name arg is relative\n\t * to.\n\t * @returns {String} normalized name\n\t */\n\tfunction normalize(name, baseName) {\n\t\tvar nameParts, nameSegment, mapValue, foundMap, lastIndex,\n\t\t\tfoundI, foundStarMap, starI, i, j, part, normalizedBaseParts,\n\t\t\tbaseParts = baseName && baseName.split(\"/\"),\n\t\t\tmap = config.map,\n\t\t\tstarMap = (map && map['*']) || {};\n\n\t\t//Adjust any relative paths.\n\t\tif (name) {\n\t\t\tname = name.split('/');\n\t\t\tlastIndex = name.length - 1;\n\n\t\t\t// If wanting node ID compatibility, strip .js from end\n\t\t\t// of IDs. Have to do this here, and not in nameToUrl\n\t\t\t// because node allows either .js or non .js to map\n\t\t\t// to same file.\n\t\t\tif (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n\t\t\t\tname[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n\t\t\t}\n\n\t\t\t// Starts with a '.' so need the baseName\n\t\t\tif (name[0].charAt(0) === '.' && baseParts) {\n\t\t\t\t//Convert baseName to array, and lop off the last part,\n\t\t\t\t//so that . matches that 'directory' and not name of the baseName's\n\t\t\t\t//module. For instance, baseName of 'one/two/three', maps to\n\t\t\t\t//'one/two/three.js', but we want the directory, 'one/two' for\n\t\t\t\t//this normalization.\n\t\t\t\tnormalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\n\t\t\t\tname = normalizedBaseParts.concat(name);\n\t\t\t}\n\n\t\t\t//start trimDots\n\t\t\tfor (i = 0; i < name.length; i++) {\n\t\t\t\tpart = name[i];\n\t\t\t\tif (part === '.') {\n\t\t\t\t\tname.splice(i, 1);\n\t\t\t\t\ti -= 1;\n\t\t\t\t} else if (part === '..') {\n\t\t\t\t\t// If at the start, or previous value is still ..,\n\t\t\t\t\t// keep them so that when converted to a path it may\n\t\t\t\t\t// still work when converted to a path, even though\n\t\t\t\t\t// as an ID it is less than ideal. In larger point\n\t\t\t\t\t// releases, may be better to just kick out an error.\n\t\t\t\t\tif (i === 0 || (i === 1 && name[2] === '..') || name[i - 1] === '..') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else if (i > 0) {\n\t\t\t\t\t\tname.splice(i - 1, 2);\n\t\t\t\t\t\ti -= 2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//end trimDots\n\n\t\t\tname = name.join('/');\n\t\t}\n\n\t\t//Apply map config if available.\n\t\tif ((baseParts || starMap) && map) {\n\t\t\tnameParts = name.split('/');\n\n\t\t\tfor (i = nameParts.length; i > 0; i -= 1) {\n\t\t\t\tnameSegment = nameParts.slice(0, i).join(\"/\");\n\n\t\t\t\tif (baseParts) {\n\t\t\t\t\t//Find the longest baseName segment match in the config.\n\t\t\t\t\t//So, do joins on the biggest to smallest lengths of baseParts.\n\t\t\t\t\tfor (j = baseParts.length; j > 0; j -= 1) {\n\t\t\t\t\t\tmapValue = map[baseParts.slice(0, j).join('/')];\n\n\t\t\t\t\t\t//baseName segment has  config, find if it has one for\n\t\t\t\t\t\t//this name.\n\t\t\t\t\t\tif (mapValue) {\n\t\t\t\t\t\t\tmapValue = mapValue[nameSegment];\n\t\t\t\t\t\t\tif (mapValue) {\n\t\t\t\t\t\t\t\t//Match, update name to the new value.\n\t\t\t\t\t\t\t\tfoundMap = mapValue;\n\t\t\t\t\t\t\t\tfoundI = i;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (foundMap) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t//Check for a star map match, but just hold on to it,\n\t\t\t\t//if there is a shorter segment match later in a matching\n\t\t\t\t//config, then favor over this star map.\n\t\t\t\tif (!foundStarMap && starMap && starMap[nameSegment]) {\n\t\t\t\t\tfoundStarMap = starMap[nameSegment];\n\t\t\t\t\tstarI = i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!foundMap && foundStarMap) {\n\t\t\t\tfoundMap = foundStarMap;\n\t\t\t\tfoundI = starI;\n\t\t\t}\n\n\t\t\tif (foundMap) {\n\t\t\t\tnameParts.splice(0, foundI, foundMap);\n\t\t\t\tname = nameParts.join('/');\n\t\t\t}\n\t\t}\n\n\t\treturn name;\n\t}\n\n\tfunction makeRequire(relName, forceSync) {\n\t\treturn function () {\n\t\t\t//A version of a require function that passes a moduleName\n\t\t\t//value for items that may need to\n\t\t\t//look up paths relative to the moduleName\n\t\t\tvar args = aps.call(arguments, 0);\n\n\t\t\t//If first arg is not require('string'), and there is only\n\t\t\t//one arg, it is the array form without a callback. Insert\n\t\t\t//a null so that the following concat is correct.\n\t\t\tif (typeof args[0] !== 'string' && args.length === 1) {\n\t\t\t\targs.push(null);\n\t\t\t}\n\t\t\treturn req.apply(undef, args.concat([relName, forceSync]));\n\t\t};\n\t}\n\n\tfunction makeNormalize(relName) {\n\t\treturn function (name) {\n\t\t\treturn normalize(name, relName);\n\t\t};\n\t}\n\n\tfunction makeLoad(depName) {\n\t\treturn function (value) {\n\t\t\tdefined[depName] = value;\n\t\t};\n\t}\n\n\tfunction callDep(name) {\n\t\tif (hasProp(waiting, name)) {\n\t\t\tvar args = waiting[name];\n\t\t\tdelete waiting[name];\n\t\t\tdefining[name] = true;\n\t\t\tmain.apply(undef, args);\n\t\t}\n\n\t\tif (!hasProp(defined, name) && !hasProp(defining, name)) {\n\t\t\tthrow new Error('No ' + name);\n\t\t}\n\t\treturn defined[name];\n\t}\n\n\t//Turns a plugin!resource to [plugin, resource]\n\t//with the plugin being undefined if the name\n\t//did not have a plugin prefix.\n\tfunction splitPrefix(name) {\n\t\tvar prefix,\n\t\t\tindex = name ? name.indexOf('!') : -1;\n\t\tif (index > -1) {\n\t\t\tprefix = name.substring(0, index);\n\t\t\tname = name.substring(index + 1, name.length);\n\t\t}\n\t\treturn [prefix, name];\n\t}\n\n\t//Creates a parts array for a relName where first part is plugin ID,\n\t//second part is resource ID. Assumes relName has already been normalized.\n\tfunction makeRelParts(relName) {\n\t\treturn relName ? splitPrefix(relName) : [];\n\t}\n\n\t/**\n\t * Makes a name map, normalizing the name, and using a plugin\n\t * for normalization if necessary. Grabs a ref to plugin\n\t * too, as an optimization.\n\t */\n\tmakeMap = function (name, relParts) {\n\t\tvar plugin,\n\t\t\tparts = splitPrefix(name),\n\t\t\tprefix = parts[0],\n\t\t\trelResourceName = relParts[1];\n\n\t\tname = parts[1];\n\n\t\tif (prefix) {\n\t\t\tprefix = normalize(prefix, relResourceName);\n\t\t\tplugin = callDep(prefix);\n\t\t}\n\n\t\t//Normalize according\n\t\tif (prefix) {\n\t\t\tif (plugin && plugin.normalize) {\n\t\t\t\tname = plugin.normalize(name, makeNormalize(relResourceName));\n\t\t\t} else {\n\t\t\t\tname = normalize(name, relResourceName);\n\t\t\t}\n\t\t} else {\n\t\t\tname = normalize(name, relResourceName);\n\t\t\tparts = splitPrefix(name);\n\t\t\tprefix = parts[0];\n\t\t\tname = parts[1];\n\t\t\tif (prefix) {\n\t\t\t\tplugin = callDep(prefix);\n\t\t\t}\n\t\t}\n\n\t\t//Using ridiculous property names for space reasons\n\t\treturn {\n\t\t\tf: prefix ? prefix + '!' + name : name, //fullName\n\t\t\tn: name,\n\t\t\tpr: prefix,\n\t\t\tp: plugin\n\t\t};\n\t};\n\n\tfunction makeConfig(name) {\n\t\treturn function () {\n\t\t\treturn (config && config.config && config.config[name]) || {};\n\t\t};\n\t}\n\n\thandlers = {\n\t\trequire: function (name) {\n\t\t\treturn makeRequire(name);\n\t\t},\n\t\texports: function (name) {\n\t\t\tvar e = defined[name];\n\t\t\tif (typeof e !== 'undefined') {\n\t\t\t\treturn e;\n\t\t\t} else {\n\t\t\t\treturn (defined[name] = {});\n\t\t\t}\n\t\t},\n\t\tmodule: function (name) {\n\t\t\treturn {\n\t\t\t\tid: name,\n\t\t\t\turi: '',\n\t\t\t\texports: defined[name],\n\t\t\t\tconfig: makeConfig(name)\n\t\t\t};\n\t\t}\n\t};\n\n\tmain = function (name, deps, callback, relName) {\n\t\tvar cjsModule, depName, ret, map, i, relParts,\n\t\t\targs = [],\n\t\t\tcallbackType = typeof callback,\n\t\t\tusingExports;\n\n\t\t//Use name if no relName\n\t\trelName = relName || name;\n\t\trelParts = makeRelParts(relName);\n\n\t\t//Call the callback to define the module, if necessary.\n\t\tif (callbackType === 'undefined' || callbackType === 'function') {\n\t\t\t//Pull out the defined dependencies and pass the ordered\n\t\t\t//values to the callback.\n\t\t\t//Default to [require, exports, module] if no deps\n\t\t\tdeps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n\t\t\tfor (i = 0; i < deps.length; i += 1) {\n\t\t\t\tmap = makeMap(deps[i], relParts);\n\t\t\t\tdepName = map.f;\n\n\t\t\t\t//Fast path CommonJS standard dependencies.\n\t\t\t\tif (depName === \"require\") {\n\t\t\t\t\targs[i] = handlers.require(name);\n\t\t\t\t} else if (depName === \"exports\") {\n\t\t\t\t\t//CommonJS module spec 1.1\n\t\t\t\t\targs[i] = handlers.exports(name);\n\t\t\t\t\tusingExports = true;\n\t\t\t\t} else if (depName === \"module\") {\n\t\t\t\t\t//CommonJS module spec 1.1\n\t\t\t\t\tcjsModule = args[i] = handlers.module(name);\n\t\t\t\t} else if (hasProp(defined, depName) ||\n\t\t\t\t\t\t   hasProp(waiting, depName) ||\n\t\t\t\t\t\t   hasProp(defining, depName)) {\n\t\t\t\t\targs[i] = callDep(depName);\n\t\t\t\t} else if (map.p) {\n\t\t\t\t\tmap.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n\t\t\t\t\targs[i] = defined[depName];\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(name + ' missing ' + depName);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tret = callback ? callback.apply(defined[name], args) : undefined;\n\n\t\t\tif (name) {\n\t\t\t\t//If setting exports via \"module\" is in play,\n\t\t\t\t//favor that over return value and exports. After that,\n\t\t\t\t//favor a non-undefined return value over exports use.\n\t\t\t\tif (cjsModule && cjsModule.exports !== undef &&\n\t\t\t\t\t\tcjsModule.exports !== defined[name]) {\n\t\t\t\t\tdefined[name] = cjsModule.exports;\n\t\t\t\t} else if (ret !== undef || !usingExports) {\n\t\t\t\t\t//Use the return value from the function.\n\t\t\t\t\tdefined[name] = ret;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (name) {\n\t\t\t//May just be an object definition for the module. Only\n\t\t\t//worry about defining if have a module name.\n\t\t\tdefined[name] = callback;\n\t\t}\n\t};\n\n\trequirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n\t\tif (typeof deps === \"string\") {\n\t\t\tif (handlers[deps]) {\n\t\t\t\t//callback in this case is really relName\n\t\t\t\treturn handlers[deps](callback);\n\t\t\t}\n\t\t\t//Just return the module wanted. In this scenario, the\n\t\t\t//deps arg is the module name, and second arg (if passed)\n\t\t\t//is just the relName.\n\t\t\t//Normalize module name, if it contains . or ..\n\t\t\treturn callDep(makeMap(deps, makeRelParts(callback)).f);\n\t\t} else if (!deps.splice) {\n\t\t\t//deps is a config object, not an array.\n\t\t\tconfig = deps;\n\t\t\tif (config.deps) {\n\t\t\t\treq(config.deps, config.callback);\n\t\t\t}\n\t\t\tif (!callback) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (callback.splice) {\n\t\t\t\t//callback is an array, which means it is a dependency list.\n\t\t\t\t//Adjust args if there are dependencies\n\t\t\t\tdeps = callback;\n\t\t\t\tcallback = relName;\n\t\t\t\trelName = null;\n\t\t\t} else {\n\t\t\t\tdeps = undef;\n\t\t\t}\n\t\t}\n\n\t\t//Support require(['a'])\n\t\tcallback = callback || function () {};\n\n\t\t//If relName is a function, it is an errback handler,\n\t\t//so remove it.\n\t\tif (typeof relName === 'function') {\n\t\t\trelName = forceSync;\n\t\t\tforceSync = alt;\n\t\t}\n\n\t\t//Simulate async callback;\n\t\tif (forceSync) {\n\t\t\tmain(undef, deps, callback, relName);\n\t\t} else {\n\t\t\t//Using a non-zero value because of concern for what old browsers\n\t\t\t//do, and latest browsers \"upgrade\" to 4 if lower value is used:\n\t\t\t//http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n\t\t\t//If want a value immediately, use require('id') instead -- something\n\t\t\t//that works in almond on the global level, but not guaranteed and\n\t\t\t//unlikely to work in other AMD implementations.\n\t\t\tsetTimeout(function () {\n\t\t\t\tmain(undef, deps, callback, relName);\n\t\t\t}, 4);\n\t\t}\n\n\t\treturn req;\n\t};\n\n\t/**\n\t * Just drops the config on the floor, but returns req in case\n\t * the config return value is used.\n\t */\n\treq.config = function (cfg) {\n\t\treturn req(cfg);\n\t};\n\n\t/**\n\t * Expose module registry for debugging and tooling\n\t */\n\trequirejs._defined = defined;\n\n\tdefine = function (name, deps, callback) {\n\t\tif (typeof name !== 'string') {\n\t\t\tthrow new Error('See almond README: incorrect module build, no module name');\n\t\t}\n\n\t\t//This module may not have dependencies\n\t\tif (!deps.splice) {\n\t\t\t//deps is not an array, so probably means\n\t\t\t//an object literal or factory function for\n\t\t\t//the value. Adjust args.\n\t\t\tcallback = deps;\n\t\t\tdeps = [];\n\t\t}\n\n\t\tif (!hasProp(defined, name) && !hasProp(waiting, name)) {\n\t\t\twaiting[name] = [name, deps, callback];\n\t\t}\n\t};\n\n\tdefine.amd = {\n\t\tjQuery: true\n\t};\n}());\n\ndefine(\"../vendor/almond\", function(){});\n\n","/**\n * Main Syncing\n * Used with models and collections for all CRUD operations\n * @type  {Object}\n * @since    3.13.0\n * @version  3.13.0\n */\ndefine( 'Mixins/Syncable',[], function() {\n\n\treturn {\n\n\t\turl: ajaxurl,\n\t\taction: 'llms_builder',\n\n\t\t/**\n\t\t * triggers AJAX call to CRUD\n\t\t * @param    {string}   method   request method [read,create,update,delete]\n\t\t * @param    {obj}      object   model or collection being synced\n\t\t * @param    {obj}      options  optional AJAX options\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tsync: function( method, object, options ) {\n\n\t\t\tif ( typeof options.data === 'undefined' ) {\n\t\t\t\toptions.data = {};\n\t\t\t}\n\n\t\t\tif ( object instanceof Backbone.Model ) {\n\t\t\t\tobject_type = 'model';\n\t\t\t\t// console.log( object.hasChanged(), object.changed );\n\t\t\t} else if ( object instanceof Backbone.Collection ) {\n\t\t\t\tobject_type = 'collection';\n\t\t\t\t// console.log( object );\n\t\t\t\t// object.each( function( model ) {\n\t\t\t\t// \tconsole.log( model.hasChanged(), model.changed );\n\t\t\t\t// } );\n\t\t\t}\n\n\t\t\toptions.data.course_id = window.llms_builder.course.id;\n\t\t\toptions.data.action_type = method;\n\t\t\toptions.data.object_type = object_type; // eg collection or model\n\t\t\toptions.data.data_type = object.type_id; // eg section or lesson\n\t\t\toptions.data._ajax_nonce = wp_ajax_data.nonce;\n\n\t\t\tif ( undefined === options.data.action && undefined !== this.action ) {\n\t\t\t\toptions.data.action = this.action;\n\t\t\t}\n\n\t\t\tif ( 'read' === method ) {\n\t\t\t\treturn Backbone.sync( method, object, options );\n\t\t\t}\n\n\t\t\tvar json = this.toJSON();\n\t\t\tvar formattedJSON = {};\n\n\t\t\tif ( json instanceof Array ) {\n\t\t\t\tformattedJSON.models = json;\n\t\t\t} else {\n\t\t\t\tformattedJSON.model = json;\n\t\t\t}\n\n\t\t\t_.extend( options.data, formattedJSON );\n\n\t\t\toptions.emulateJSON = true;\n\n\t\t\treturn Backbone.sync.call( this, 'create', object, options );\n\n\t\t}\n\t};\n\n} );\n\n","/**\n * Lesson Model\n * @since    3.13.0\n * @version  3.14.8\n */\ndefine( 'Models/Lesson',[ 'Mixins/Syncable' ], function( Syncable ) {\n\n\treturn Backbone.Model.extend( _.defaults( {\n\n\t\ttype_id: 'lesson',\n\n\t\t/**\n\t\t * New lesson defaults\n\t\t * @return   obj\n\t\t * @since    3.13.0\n\t\t * @version  3.14.8\n\t\t */\n\t\tdefaults: function() {\n\t\t\tvar order = this.collection ? this.collection.next_order() : 1,\n\t\t\t\t// section_id = App.Methods.get_last_section().id;\n\t\t\t\tsection_id = 1;\n\t\t\treturn {\n\t\t\t\ttitle: LLMS.l10n.translate( 'New Lesson' ),\n\t\t\t\ttype: 'lesson',\n\t\t\t\torder: order,\n\t\t\t\tsection_id: section_id,\n\n\t\t\t\t// urls\n\t\t\t\tedit_url: '',\n\t\t\t\tview_url: '',\n\n\t\t\t\t// icon info\n\t\t\t\tdate_available: '',\n\t\t\t\tdays_before_available: '',\n\t\t\t\tdrip_method: '',\n\t\t\t\thas_content: false,\n\t\t\t\tis_free: false,\n\t\t\t\tprerequisite: false,\n\t\t\t\tquiz: false,\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Initializer\n\t\t * @return   void\n\t\t * @since    3.14.0\n\t\t * @version  3.14.4\n\t\t */\n\t\tinitialize: function() {\n\n\t\t\tthis.listenTo( this, 'detach', this.detach );\n\n\t\t},\n\n\t\t/**\n\t\t * Detach lesson from section\n\t\t * @return   void\n\t\t * @since    3.14.4\n\t\t * @version  3.14.4\n\t\t */\n\t\tdetach: function() {\n\n\t\t\tvar id = 'detach_' + this.id;\n\n\t\t\tthis.set( 'section_id', '' );\n\t\t\tthis.collection.remove( this.id );\n\t\t\tthis.save( null, {\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\tInstance.Status.add( id );\n\t\t\t\t},\n\t\t\t\tsuccess: function( res ) {\n\t\t\t\t\tInstance.Status.remove( id );\n\t\t\t\t},\n\t\t\t} );\n\t\t},\n\n\t\t/**\n\t\t * Retrieve the parent section of the lesson\n\t\t * @return   {obj}   App.Models.Section\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tget_section: function() {\n\t\t\treturn Instance.Syllabus.collection.get( this.get( 'section_id' ) );\n\t\t},\n\n\t}, Syncable ) );\n\n} );\n\n","/**\n * Handles syncing of a sortable collections order\n * Use with a Collection\n * Used with Section and Lesson Collections\n * @type     {Object}\n * @since    3.13.0\n * @version  3.13.0\n */\ndefine( 'Mixins/SortableCollection',[], function() {\n\treturn {\n\n\t\t/**\n\t\t * Define the collections compartor\n\t\t * @type  {String}\n\t\t */\n\t\tcomparator: 'order',\n\n\t\t/**\n\t\t * DOM Events\n\t\t * @type  {Object}\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tevents: {\n\t\t\t'change:order': 'sort',\n\t\t},\n\n\t\t/**\n\t\t * Retrieve the next order in the collection\n\t\t * @return   int\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tnext_order: function() {\n\t\t\tif ( ! this.length ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn this.last().get( 'order' ) + 1;\n\t\t},\n\n\t\t/**\n\t\t * Save collection order to the DB\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tsync_order: function() {\n\t\t\tvar id = _.uniqueId( 'saving_' );\n\t\t\tthis.sync( 'update', this, {\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\twindow.llms_builder.Instance.Status.add( id );\n\t\t\t\t},\n\t\t\t\terror: function( jqxhr, status, msg ) {\n\t\t\t\t\tconsole.log( status, msg );\n\t\t\t\t},\n\t\t\t\tsuccess: function( res ) {\n\t\t\t\t\twindow.llms_builder.Instance.Status.remove( id );\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\t};\n} );\n\n","/**\n * Lessons Collection\n * @since    3.13.0\n * @version  3.13.0\n */\ndefine( 'Collections/Lessons',[ 'Models/Lesson', 'Mixins/Syncable', 'Mixins/SortableCollection' ], function( model, Syncable, SortableCollection ) {\n\n\treturn Backbone.Collection.extend( _.defaults( {\n\n\t\tmodel: model,\n\t\ttype_id: 'lesson',\n\n\t}, Syncable, SortableCollection ) );\n\n} );\n\n","/**\n * Section Model\n * @since    3.13.0\n * @version  3.14.4\n */\ndefine( 'Models/Section',[ 'Mixins/Syncable' ], function( Syncable ) {\n\n\treturn Backbone.Model.extend( _.defaults( {\n\n\t\ttype_id: 'section',\n\n\t\t/**\n\t\t * New section defaults\n\t\t * @return   obj\n\t\t * @since    3.13.0\n\t\t * @version  3.14.4\n\t\t */\n\t\tdefaults: function() {\n\t\t\tvar order = this.collection ? this.collection.next_order() : 1;\n\t\t\treturn {\n\t\t\t\tactive: false,\n\t\t\t\ttitle: 'New Section',\n\t\t\t\ttype: 'section',\n\t\t\t\tlessons: [],\n\t\t\t\torder: order,\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Retrieve the next section in the section's collection\n\t\t * @return   obj     App.Models.Section\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tget_next: function() {\n\t\t\treturn this.collection.at( this.collection.indexOf( this ) + 1 );\n\t\t},\n\n\t\t/**\n\t\t * Retrieve the prev section in the section's collection\n\t\t * @return   obj     App.Models.Section\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tget_prev: function() {\n\t\t\treturn this.collection.at( this.collection.indexOf( this ) - 1 );\n\t\t},\n\n\t}, Syncable ) );\n\n} );\n\n","/**\n * Sections Collection\n * @since    3.13.0\n * @version  3.13.0\n */\ndefine( 'Collections/Sections',[ 'Models/Section', 'Mixins/Syncable', 'Mixins/SortableCollection' ], function( model, Syncable, Sortable ) {\n\n\treturn Backbone.Collection.extend( _.defaults( {\n\n\t\tmodel: model,\n\t\ttype_id: 'section',\n\n\t\t/**\n\t\t * Parse AJAX response\n\t\t * @param    obj   response  JSON from the server\n\t\t * @return   obj             relevant data from the server\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tparse: function( response ) {\n\t\t\treturn response.data;\n\t\t},\n\n\t}, Syncable, Sortable ) );\n\n} );\n\n","define( 'Collections/loader',[ 'Collections/Lessons', 'Collections/Sections' ], function( Lessons, Sections ) {\n\n\treturn {\n\t\tLessons: Lessons,\n\t\tSections: Sections,\n\t};\n\n} );\n\n","/**\n * Course Model\n * @since    3.13.0\n * @version  3.13.0\n */\ndefine( 'Models/Course',[ 'Mixins/Syncable' ], function( Syncable ) {\n\n\treturn Backbone.Model.extend( _.defaults( {\n\n\t\ttype_id: 'course',\n\n\t\t/**\n\t\t * New Course Defaults\n\t\t * @return   obj\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tdefaults: function() {\n\t\t\treturn {\n\t\t\t\ttitle: 'New Course',\n\t\t\t\tedit_url: '',\n\t\t\t\tview_url: '',\n\t\t\t}\n\t\t},\n\n\t}, Syncable ) );\n\n} );\n\n","define( 'Models/loader',[ 'Models/Course', 'Models/Lesson', 'Models/Section' ], function( Course, Lesson, Section ) {\n\n\treturn {\n\t\tCourse: Course,\n\t\tLesson: Lesson,\n\t\tSection: Section,\n\t};\n\n} );\n\n","/**\n * Handles UX and Events for inline editing of views\n * Use with a Model's View\n * Allows editing model.title field via .llms-editable-title elements\n * @type     {Object}\n * @since    3.13.0\n * @version  3.14.1\n */\ndefine( 'Mixins/EditableView',[], function() {\n\n\treturn {\n\n\t\t/**\n\t\t * DOM Events\n\t\t * @type  {Object}\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tevents: {\n\t\t\t'focusout .llms-editable-title': 'on_blur',\n\t\t\t'keydown .llms-editable-title': 'on_keydown',\n\t\t},\n\n\t\t/**\n\t\t * Determine if changes have been made to the element\n\t\t * @param    {[obj]}   event  js event object\n\t\t * @return   {Boolean}        true when changes have been made, false otherwise\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\thas_changed: function( event ) {\n\t\t\tvar $el = $( event.target );\n\t\t\treturn ( $el.attr( 'data-original-content' ) !== $el.text() );\n\t\t},\n\n\t\t/**\n\t\t * Blur/focusout function for .llms-editable-title elements\n\t\t * Automatically saves changes if changes have been made\n\t\t * @param    obj   event  js event object\n\t\t * @return   void\n\t\t * @since    3.14.1\n\t\t * @version  3.14.1\n\t\t */\n\t\ton_blur: function( event ) {\n\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar self = this,\n\t\t\t\tchanged = this.has_changed( event );\n\n\t\t\tif ( changed ) {\n\t\t\t\tthis.save_edits( event );\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Keydown function for .llms-editable-title elements\n\t\t * Blurs\n\t\t * @param    {obj]}   event  js event object\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.14.1\n\t\t */\n\t\ton_keydown: function( event ) {\n\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar self = this,\n\t\t\t\tkey = event.which || event.keyCode;\n\n\t\t\tswitch ( key ) {\n\n\t\t\t\tcase 13: // enter\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.target.blur();\n\t\t\t\tbreak;\n\n\t\t\t\tcase 27: // escape\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tthis.revert_edits( event );\n\t\t\t\t\tevent.target.blur();\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Helper to undo changes\n\t\t * Bound to \"escape\" key via on_keydwon function\n\t\t * @param    {[type]}   event  js event object\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\trevert_edits: function( event ) {\n\t\t\tvar $el = $( event.target ),\n\t\t\t\tval = $el.attr( 'data-original-content' );\n\t\t\t$el.text( val );\n\t\t},\n\n\t\t/**\n\t\t * Sync chages to the model and DB\n\t\t * @param    {obj}   event  js event object\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  [version]\n\t\t */\n\t\tsave_edits: function( event ) {\n\n\t\t\tvar $el = $( event.target ),\n\t\t\t\tval = $el.text(),\n\t\t\t\tsave_id = 'edit_' + this.model.id;\n\n\t\t\tthis.model.set( 'title', val ).save( null, {\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\twindow.llms_builder.Instance.Status.add( save_id );\n\t\t\t\t},\n\t\t\t\terror: function( res ) {\n\t\t\t\t\tconsole.log( res );\n\t\t\t\t},\n\t\t\t\tsuccess: function( res ) {\n\t\t\t\t\twindow.llms_builder.Instance.Status.remove( save_id );\n\t\t\t\t},\n\t\t\t} );\n\n\t\t},\n\n\t};\n\n} );\n\n","/**\n * Single Course View\n * @since    3.13.0\n * @version  3.14.0\n */\ndefine( 'Views/Course',[ 'Mixins/EditableView' ], function( Editable ) {\n\n\treturn Backbone.View.extend( _.defaults( {\n\n\t\t/**\n\t\t * Get default attributes for the html wrapper element\n\t\t * @return   obj\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tattributes: function() {\n\t\t\treturn {\n\t\t\t\t'data-id': this.model.id,\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * HTML class names\n\t\t * @type  {String}\n\t\t */\n\t\tclassName: 'llms-builder-item llms-lesson',\n\n\t\t/**\n\t\t * HTML element selector\n\t\t * @type  {String}\n\t\t */\n\t\tel: '#llms-course-info',\n\n\t\t/**\n\t\t * HTML element wrapper ID attribute\n\t\t * @return   string\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tid: function() {\n\t\t\treturn 'llms-course-' + this.model.id;\n\t\t},\n\n\t\t/**\n\t\t * Wrapper Tag name\n\t\t * @type  {String}\n\t\t */\n\t\ttagName: 'div',\n\n\t\t/**\n\t\t * Get the underscore template\n\t\t * @type  {[type]}\n\t\t */\n\t\ttemplate: wp.template( 'llms-course-template' ),\n\n\t\t/**\n\t\t * Initialization callback func (renders the element on screen)\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tinitialize: function() {\n\t\t\tthis.render();\n\t\t\tthis.listenTo( this.model, 'sync', this.render );\n\t\t},\n\n\t\t/**\n\t\t * Compiles the template and renders the view\n\t\t * @return   self (for chaining)\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\trender: function() {\n\t\t\tthis.$el.html( this.template( this.model.toJSON() ) );\n\t\t\treturn this;\n\t\t},\n\n\t}, Editable ) );\n\n} );\n\n","/**\n * Handles UX and Events for shifting views up and down\n * Use with a Model's View\n * Used with Section and Lesson views\n * @type     {Object}\n * @since    3.13.0\n * @version  3.13.0\n */\ndefine( 'Mixins/ShiftableView',[], function() {\n\n\treturn {\n\n\t\t/**\n\t\t * DOM Events\n\t\t * @type  {Object}\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tevents: {\n\t\t\t'click .llms-action-icon.shift-down': 'shift_down',\n\t\t\t'click .llms-action-icon.shift-up': 'shift_up',\n\t\t},\n\n\t\t/**\n\t\t * Shift model one space down (to the right or +1) in it's collection\n\t\t * automatically resorts other items in collection and syncs collection to db\n\t\t * @param    obj   e  js event object\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tshift_down: function( e ) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tthis.$el.trigger( 'update-sort', [ this.model, this.model.get( 'order' ) + 1, this.model.collection ] );\n\t\t},\n\n\t\t/**\n\t\t * Shift model one space up (to the right or -1) in it's collection\n\t\t * automatically resorts other items in collection and syncs collection to db\n\t\t * @param    obj   e  js event object\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tshift_up: function( e ) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tthis.$el.trigger( 'update-sort', [ this.model, this.model.get( 'order' ) - 1, this.model.collection ] );\n\t\t},\n\n\t};\n\n} );\n\n","/**\n * Single Lesson View\n * @since    3.13.0\n * @version  3.14.4\n */\n\ndefine( 'Views/Lesson',[ 'Mixins/EditableView', 'Mixins/ShiftableView' ], function( Editable, Shiftable ) {\n\n\treturn Backbone.View.extend( _.defaults( {\n\n\t\t/**\n\t\t * Get default attributes for the html wrapper element\n\t\t * @return   obj\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tattributes: function() {\n\t\t\treturn {\n\t\t\t\t'data-id': this.model.id,\n\t\t\t\t'data-section-id': this.model.get( 'section_id' ),\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * HTML class names\n\t\t * @type  {String}\n\t\t */\n\t\tclassName: 'llms-builder-item llms-lesson',\n\n\t\t/**\n\t\t * DOM Events\n\t\t * @type     obj\n\t\t * @since    3.13.0\n\t\t * @version  3.14.4\n\t\t */\n\t\tevents: _.defaults( {\n\t\t\t'drop-lesson': 'drop',\n\t\t\t'update-parent': 'update_parent',\n\t\t\t'click .llms-action-icon.section-prev': 'section_prev',\n\t\t\t'click .llms-action-icon.section-next': 'section_next',\n\t\t\t'click .llms-action-icon.trash': 'delete_lesson',\n\t\t\t'click .llms-action-icon.detach': 'detach_lesson',\n\t\t}, Editable.events, Shiftable.events ),\n\n\t\t/**\n\t\t * HTML element wrapper ID attribute\n\t\t * @return   string\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tid: function() {\n\t\t\treturn 'llms-lesson-' + this.model.id;\n\t\t},\n\n\t\t/**\n\t\t * Wrapper Tag name\n\t\t * @type  {String}\n\t\t */\n\t\ttagName: 'li',\n\n\t\t/**\n\t\t * Get the underscore template\n\t\t * @type  {[type]}\n\t\t */\n\t\ttemplate: wp.template( 'llms-lesson-template' ),\n\n\t\t/**\n\t\t * Event handler for lesson deletion\n\t\t * requires a confirmation before removing from collection & syncing\n\t\t * @param    {obj}   event  js event object\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tdelete_lesson: function( event ) {\n\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tvar msg = LLMS.l10n.translate( 'Are you sure you want to permanently delete this lesson?' );\n\n\t\t\tif ( ! window.confirm( msg ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar del_id = 'delete_' + this.model.id;\n\n\t\t\tthis.model.destroy( {\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\tInstance.Status.add( del_id );\n\t\t\t\t},\n\t\t\t\tsuccess: function( res ) {\n\t\t\t\t\tInstance.Status.remove( del_id );\n\t\t\t\t},\n\t\t\t} );\n\n\t\t},\n\n\t\t/**\n\t\t * Removes a lesson from the course (turns it into an orphan)\n\t\t * @param    obj   event  js event obj\n\t\t * @return   void\n\t\t * @since    3.14.4\n\t\t * @version  3.14.4\n\t\t */\n\t\tdetach_lesson: function( event ) {\n\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\t\t\tthis.model.trigger( 'detach' );\n\n\t\t},\n\n\t\t/**\n\t\t * Draggable/Sortable DROP event\n\t\t * @param    {obj}   event            js event obj\n\t\t * @param    {obj}   $item            jQuery obj of the dropped item\n\t\t * @param    {int}   to_section_id    id of the section the lesson was dropped into\n\t\t * @param    {int}   from_section_id  id of the section the lesson came from (may be undefined)\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tdrop: function( event, $item, to_section_id, from_section_id ) {\n\n\t\t\tvar self = this,\n\t\t\t\tto_collection = Instance.Syllabus.collection.get( to_section_id ).Lessons.collection,\n\t\t\t\tfrom_collection = ! this.model.collection ? null : Instance.Syllabus.collection.get( from_section_id ).Lessons.collection,\n\t\t\t\tauto_save = true;\n\n\t\t\t// create if the model doesn't have a collection\n\t\t\tif ( ! this.model.collection ) {\n\t\t\t\tvar id = self.model.id;\n\t\t\t\tauto_save = false;\n\t\t\t\tself.model.set( 'section_id', to_section_id );\n\t\t\t\tto_collection.create( self.model, {\n\t\t\t\t\tbeforeSend: function() {\n\t\t\t\t\t\tInstance.Status.add( id );\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function( res ) {\n\t\t\t\t\t\tInstance.Status.remove( id );\n\t\t\t\t\t\tself.model.collection.sync_order();\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tthis.$el.trigger( 'update-sort', [ this.model, $item.index() + 1, to_collection, from_collection, auto_save ] );\n\n\t\t},\n\n\t\t/**\n\t\t * Initialization callback func (renders the element on screen)\n\t\t * @return   void\n\t\t * @since    3.14.1\n\t\t * @version  3.14.1\n\t\t */\n\t\tinitialize: function() {\n\t\t\tthis.listenTo( this.model, 'sync', this.render );\n\t\t},\n\n\t\t/**\n\t\t * Compiles the template and renders the view\n\t\t * @return   self (for chaining)\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\trender: function() {\n\t\t\tif ( ! this.model.get( 'section_id' ) ) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tthis.$el.html( this.template( this.model.toJSON() ) );\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Event handler for moving a lesson to the next section in the sections collection\n\t\t * this moves lesson DOWN a section\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tsection_next: function() {\n\n\t\t\tvar from_section = this.model.get_section(),\n\t\t\t\tto_section = from_section.get_next(),\n\t\t\t\tfrom_collection = from_section.Lessons.collection\n\t\t\t\tto_collection = to_section.Lessons.collection,\n\n\t\t\t$( '#llms-section-' + to_section.id ).addClass( 'opened' );\n\n\t\t\t// update the parent\n\t\t\tthis.model.set( 'section_id', to_section.id );\n\n\t\t\t// trigger resorts on the collections\n\t\t\tthis.$el.trigger( 'update-sort', [ this.model, 1, to_collection, from_collection ] );\n\n\t\t},\n\n\t\t/**\n\t\t * Event handler for moving a lesson to the previous section in the sections collection\n\t\t * this moves lesson UP a section\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tsection_prev: function() {\n\n\t\t\tvar from_section = this.model.get_section(),\n\t\t\t\tto_section = from_section.get_prev(),\n\t\t\t\tfrom_collection = from_section.Lessons.collection\n\t\t\t\tto_collection = to_section.Lessons.collection,\n\n\t\t\t$( '#llms-section-' + to_section.id ).addClass( 'opened' );\n\n\t\t\t// update the parent\n\t\t\tthis.model.set( 'section_id', to_section.id );\n\n\t\t\t// trigger resorts on the collections\n\t\t\tthis.$el.trigger( 'update-sort', [ this.model, to_collection.next_order(), to_collection, from_collection ] );\n\n\t\t},\n\n\t\t/**\n\t\t * jQuery UI sortable \"receieve\" callback\n\t\t * when a lesson is moved to a new section the drop event handles most stuff\n\t\t * but this updates the section_id attribute on the lesson\n\t\t * @param    {obj}   event  js event object\n\t\t * @param    {obj}   item   jQuery ui sortable item object\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tupdate_parent: function( event, item ) {\n\t\t\tthis.model.set( 'section_id', $( item ).closest( '.llms-section' ).attr( 'data-id' ) );\n\t\t},\n\n\t}, Editable, Shiftable ) );\n\n} );\n\n","/**\n * Handles UX and Events for sorting models via jQuery UI Sortable\n * Use with a Collection's View\n * Used with Section and Lesson List (collection) views\n * @type     {Object}\n * @since    3.13.0\n * @version  3.13.0\n */\ndefine( 'Mixins/SortableView',[], function() {\n\n\treturn {\n\n\t\t/**\n\t\t * DOM Events\n\t\t * @type  {Object}\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tevents: {\n\t\t\t'update-sort': 'update_sort',\n\t\t},\n\n\t\t/**\n\t\t * Resorst an out-of-order collection by the order property on its models\n\t\t * Rerenders the view when completed\n\t\t * @param    {obj}   collection  a backbone collection with models that have an \"order\" prop\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tsort_collection: function( collection ) {\n\n\t\t\tif ( collection.length ) {\n\n\t\t\t\tcollection.each( function( model, index ) {\n\t\t\t\t\tmodel.set( 'order', index + 1 );\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tcollection.trigger( 'rerender' );\n\n\t\t},\n\n\t\t/**\n\t\t * Triggered by element dropping event\n\t\t * Moves models into the new collection, resorts collections, and optionally syncs data to DB\n\t\t * @param    {obj}    event            js event object\n\t\t * @param    {obj}    model            model being moved\n\t\t * @param    {obj}    order            new order (not index) of the model\n\t\t * @param    {obj}    to_collection    collection the model is to be added to\n\t\t * @param    {obj}    from_collection  collection the model is coming from\n\t\t *                                       \tnew items don't have a from collection\n\t\t *                                        \tthis will be the same if it's a reorder and not moving to a new collection\n\t\t * @param    {bool}   auto_save        when true, saves to the database\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tupdate_sort: function ( event, model, order, to_collection, from_collection, auto_save ) {\n\n\t\t\tevent.stopPropagation();\n\n\t\t\tauto_save = undefined === auto_save ? true : auto_save;\n\n\t\t\tvar to_self = ( ! from_collection || to_collection === from_collection )\n\t\t\t\tremove_from_collection = to_self ? to_collection : from_collection;\n\n\t\t\t// dropped items won't have a collection yet...\n\t\t\tif ( remove_from_collection ) {\n\t\t\t\tremove_from_collection.remove( model );\n\t\t\t}\n\n\t\t\t// when moving lessons to a new section we need to update the old collection\n\t\t\tif ( remove_from_collection && ! to_self ) {\n\t\t\t\tthis.sort_collection( from_collection );\n\t\t\t\tfrom_collection.sync_order();\n\t\t\t}\n\n\t\t\tto_collection.add( model, { at: order - 1 } );\n\t\t\tthis.sort_collection( to_collection );\n\n\t\t\tif ( auto_save ) {\n\t\t\t\tto_collection.sync_order();\n\t\t\t}\n\n\t\t},\n\n\t};\n\n} );\n\n","/**\n * Lesson List (collection) view\n * @since    3.13.0\n * @version  3.13.0\n */\ndefine( 'Views/LessonList',[ 'Mixins/SortableView', 'Views/Lesson' ], function( Sortable, LessonView ) {\n\n\treturn  Backbone.View.extend( _.defaults( {\n\n\t\t/**\n\t\t * Add a lesson to the collection\n\t\t * @param    {obj}   lesson  model of the lesson\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tadd_one: function( lesson ) {\n\t\t\tvar view = new LessonView( { model: lesson } );\n\t\t\tthis.$el.append( view.render().el );\n\t\t},\n\n\t\t/**\n\t\t * Initializer\n\t\t * Bind collection events\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.14.4\n\t\t */\n\t\tinitialize: function() {\n\n\t\t\tthis.listenTo( this.collection, 'add', this.add_one );\n\t\t\tthis.listenTo( this.collection, 'destroy', this.remove_one );\n\t\t\tthis.listenTo( this.collection, 'remove', this.remove_one );\n\t\t\tthis.listenTo( this.collection, 'rerender', this.render );\n\n\t\t},\n\n\t\t/**\n\t\t * Remove a lesson from a collection\n\t\t * @param    {obj}      lesson      model of the lesson to remove\n\t\t * @param    {obj}      collection  collection to remove the lesson from\n\t\t * @return   void\n\t\t * @since    3.14.4\n\t\t * @version  3.14.4\n\t\t */\n\t\tremove_one: function( lesson, collection ) {\n\t\t\tthis.sort_collection( collection );\n\t\t\tcollection.sync_order();\n\t\t},\n\n\n\t\t/**\n\t\t * Render the view\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.14.4\n\t\t */\n\t\trender: function() {\n\t\t\tthis.$el.children().remove();\n\t\t\tthis.collection.each( this.add_one, this );\n\t\t\t// App.Methods.sortable();\n\t\t\treturn this;\n\t\t},\n\n\t}, Sortable ) );\n\n} );\n\n","/**\n * Existing Lesson Popover content View\n * @since    3.13.0\n * @version  3.14.0\n */\ndefine( 'Views/LessonSearchPopover',[], function() {\n\n\treturn Backbone.View.extend( {\n\n\t\t/**\n\t\t * DOM Events\n\t\t * @type     obj\n\t\t * @since    3.14.4\n\t\t * @version  3.14.4\n\t\t */\n\t\tevents: {\n\t\t\t'select2:select': 'add_lesson',\n\t\t},\n\n\t\t/**\n\t\t * Wrapper Tag name\n\t\t * @type  {String}\n\t\t */\n\t\ttagName: 'select',\n\n\t\t/**\n\t\t * Select event, adds the existing lesson to the course\n\t\t * @param    obj   event  select2:select event object\n\t\t * @since    3.14.4\n\t\t * @version  3.14.4\n\t\t */\n\t\tadd_lesson: function( event ) {\n\n\t\t\tWebuiPopovers.hide( $( '#llms-existing-lesson' ) );\n\n\t\t\tInstance.Tools.create_item( 'lesson', {\n\t\t\t\tid: event.params.data.id,\n\t\t\t\ttitle: event.params.data.title\n\t\t\t} );\n\n\t\t\tthis.$el.val( null ).trigger( 'change' );\n\n\t\t},\n\n\t\t/**\n\t\t * Render the section\n\t\t * Initalizes a new collection and views for all lessons in the section\n\t\t * @return   void\n\t\t * @since    3.14.4\n\t\t * @version  3.14.4\n\t\t */\n\t\trender: function() {\n\t\t\tvar self = this;\n\t\t\tsetTimeout( function () {\n\t\t\t\tself.$el.llmsSelect2( {\n\t\t\t\t\tajax: {\n\t\t\t\t\t\tdataType: 'JSON',\n\t\t\t\t\t\tdelay: 250,\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\turl: window.ajaxurl,\n\t\t\t\t\t\tdata: function( params ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\taction: 'llms_builder',\n\t\t\t\t\t\t\t\taction_type: 'search',\n\t\t\t\t\t\t\t\tcourse_id: window.llms_builder.course.id,\n\t\t\t\t\t\t\t\tterm: params.term,\n\t\t\t\t\t\t\t\tpage: params.page,\n\t\t\t\t\t\t\t\t_ajax_nonce: wp_ajax_data.nonce,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},\n\t\t\t\t\t\t// error: function( xhr, status, error ) {\n\t\t\t\t\t\t// \tconsole.log( status, error );\n\t\t\t\t\t\t// },\n\t\t\t\t\t},\n\t\t\t\t\tplaceholder: LLMS.l10n.translate( 'Search for existing lessons...' ),\n\t\t\t\t\tdropdownParent: $( '.webui-popover-inner' ),\n\t\t\t\t\twidth: '100%',\n\t\t\t\t} );\n\t\t\t}, 0 );\n\t\t\treturn this;\n\n\t\t},\n\n\t} );\n\n} );\n\n","/**\n * Main Builder Area View\n * @since    [version]\n * @version  [version]\n */\ndefine( 'Views/Main',[], function() {\n\n\treturn Backbone.View.extend( {\n\n\t\t/**\n\t\t * HTML element selector\n\t\t * @type  {String}\n\t\t */\n\t\tel: $( '#llms-builder-main' ),\n\n\t\tinitialize: function() {\n\n\t\t\tvar self = this;\n\n\t\t\tBackbone.pubSub.on( 'rebind', this.bind_all, this );\n\t\t\tBackbone.pubSub.on( 'lock', this.loading_start, this );\n\t\t\tBackbone.pubSub.on( 'unlock', this.loading_stop, this );\n\n\t\t\tBackbone.pubSub.on( 'init-complete', function() {\n\n\t\t\t\tself.bind_all();\n\t\t\t\t// start the mini spinner that never stops\n\t\t\t\tLLMS.Spinner.start( $( '#llms-spinner-el' ), 'small' );\n\n\t\t\t}, this );\n\n\n\t\t},\n\n\t\tbind_all: function() {\n\n\t\t\tthis.draggable();\n\t\t\tthis.sortable();\n\n\t\t},\n\n\t\t/**\n\t\t * Bind Draggable Events\n\t\t * Powers draggable items in the tools sidebar\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tdraggable: function() {\n\t\t\t$( '#llms-new-section' ).draggable( {\n\t\t\t\tcancel: false,\n\t\t\t\tconnectToSortable: '.llms-sections',\n\t\t\t\thelper: function() {\n\t\t\t\t\tvar section = new Models.Section( {\n\t\t\t\t\t\tid: _.uniqueId( 'section_temp_' ),\n\t\t\t\t\t} );\n\t\t\t\t\treturn new Views.Section( { model: section } ).render().$el;\n\t\t\t\t},\n\t\t\t\tstart: function() {\n\t\t\t\t\t$( '.llms-sections' ).addClass( 'dragging' );\n\t\t\t\t},\n\t\t\t\tstop: function() {\n\t\t\t\t\t$( '.llms-sections' ).removeClass( 'dragging' );\n\t\t\t\t},\n\t\t\t} );\n\t\t\t$( '#llms-new-lesson' ).draggable( {\n\t\t\t\tcancel: false,\n\t\t\t\tconnectToSortable: '.llms-lessons',\n\t\t\t\thelper: function() {\n\t\t\t\t\tvar lesson = new Models.Lesson( {\n\t\t\t\t\t\tid: _.uniqueId( 'lesson_temp_' ),\n\t\t\t\t\t} );\n\t\t\t\t\treturn new Views.Lesson( { model: lesson } ).render().$el;\n\t\t\t\t},\n\t\t\t\tstart: function() {\n\t\t\t\t\t$( '.llms-lessons' ).addClass( 'dragging' );\n\t\t\t\t},\n\t\t\t\tstop: function() {\n\t\t\t\t\t$( '.llms-lessons' ).removeClass( 'dragging' );\n\t\t\t\t},\n\t\t\t} );\n\t\t},\n\n\t\tloading_start: function() {\n\n\t\t\tthis.$el.addClass( 'loading' );\n\t\t\tLLMS.Spinner.start( this.$el );\n\n\t\t},\n\n\t\tloading_stop: function() {\n\n\t\t\tthis.$el.removeClass( 'loading' );\n\t\t\tLLMS.Spinner.stop( this.$el );\n\n\t\t},\n\n\t\t/**\n\t\t * Bind jQuery UI Sortable events\n\t\t * Powers draggable course elements in the syllabus area\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tsortable: function() {\n\t\t\t$( '.llms-sections' ).sortable( {\n\t\t\t\tcursor: 'move',\n\t\t\t\tcursorAt: {\n\t\t\t\t\ttop: 10,\n\t\t\t\t\tleft: 10,\n\t\t\t\t},\n\t\t\t\thandle: '.drag-section',\n\t\t\t\titems: '.llms-section',\n\t\t\t\tplaceholder: 'llms-section llms-sortable-placeholder',\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tstart: function( event, ui ) {\n\t\t\t\t\tui.item.css( 'height', 'auto' );\n\t\t\t\t\t$( '.llms-sections' ).addClass( 'dragging' );\n\t\t\t\t},\n\t\t\t\tstop: function( event, ui ) {\n\t\t\t\t\tui.item.trigger( 'drop-section', ui.item.index() );\n\t\t\t\t\t$( '.llms-sections' ).removeClass( 'dragging' );\n\t\t\t\t},\n\t\t\t} );\n\n\t\t\t$( '.llms-lessons' ).sortable( {\n\t\t\t\tcursor: 'move',\n\t\t\t\tcursorAt: {\n\t\t\t\t\ttop: 10,\n\t\t\t\t\tleft: 10,\n\t\t\t\t},\n\t\t\t\tconnectWith: '.llms-lessons',\n\t\t\t\thandle: '.drag-lesson',\n\t\t\t\titems: '.llms-lesson',\n\t\t\t\tplaceholder: 'llms-lesson llms-sortable-placeholder',\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tstart: function( event, ui ) {\n\t\t\t\t\t$( '.llms-lessons' ).addClass( 'dragging' );\n\t\t\t\t},\n\t\t\t\tstop: function( event, ui ) {\n\n\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\tvar from_section = ui.item.attr( 'data-section-id' ),\n\t\t\t\t\t\tcurr_section = ui.item.closest( '.llms-section' ).attr( 'data-id' );\n\n\t\t\t\t\tui.item.trigger( 'drop-lesson', [ ui.item, curr_section, from_section ] );\n\n\t\t\t\t\tui.item.removeAttr( 'style' )\n\t\t\t\t\t\t.closest( '.llms-section' ).addClass( 'opened' );\n\n\t\t\t\t\t$( '.llms-lessons' ).removeClass( 'dragging' );\n\n\t\t\t\t},\n\t\t\t\treceive: function( event, ui ) {\n\t\t\t\t\tui.item.trigger( 'update-parent', ui.item );\n\t\t\t\t\tui.item.removeAttr( 'style' )\n\t\t\t\t\t\t.closest( '.llms-section' ).addClass( 'opened' );\n\t\t\t\t},\n\t\t\t\tover: function( event, ui ) {\n\t\t\t\t\t$( '#' + event.target.offsetParent.id ).addClass( 'hover-opened' );\n\t\t\t\t},\n\t\t\t\tout: function( event, ui ) {\n\t\t\t\t\t$( '#' + event.target.offsetParent.id ).removeClass( 'hover-opened' );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t} );\n\n} );\n\n","/**\n * \"Tools\" sidebar view\n * @since    3.13.0\n * @version  [version]\n */\ndefine( 'Views/Tools',[], function() {\n\n\treturn Backbone.View.extend( {\n\n\t\t/**\n\t\t * Dom Element\n\t\t * @type  {obj}\n\t\t */\n\t\tel: $( '#llms-builder-tools' ),\n\n\t\t/**\n\t\t * Dom Events\n\t\t * @type     {Object}\n\t\t * @since    3.13.0\n\t\t * @version  3.14.4\n\t\t */\n\t\tevents: {\n\t\t\t'click button.llms-add-item': 'add_item',\n\t\t\t'click button#llms-existing-lesson': 'show_search_popover',\n\t\t\t'click a.bulk-toggle': 'bulk_toggle',\n\t\t},\n\n\t\t/**\n\t\t * Initializer\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tinitialize: function() {\n\n\t\t\t// this.listenTo( Instance.Syllabus.collection, 'add', this.maybe_disable );\n\t\t\t// this.listenTo( Instance.Syllabus.collection, 'remove', this.maybe_disable );\n\t\t\t// this.listenTo( Instance.Syllabus.collection, 'sync', this.maybe_disable );\n\n\t\t},\n\n\t\t/**\n\t\t * Add a new item to the syllabus (section or lesson)\n\t\t * @param    {obj}   event  js event object\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tadd_item: function( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t\tvar $btn = $( event.target ),\n\t\t\t\ttype = $btn.attr( 'data-model' );\n\n\t\t\tthis.create_item( type, {\n\t\t\t\tid: _.uniqueId( type + '_temp_' )\n\t\t\t} );\n\n\t\t},\n\n\t\t/**\n\t\t * Bulk expan and collapse the syllabus via click events\n\t\t * @param    {obj}   event  js event object\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tbulk_toggle: function( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tvar $btn = $( event.target ),\n\t\t\t\twhich = $btn.attr( 'data-action' );\n\t\t\t$( '.llms-section .llms-action-icon.' + which ).trigger( 'click' );\n\n\t\t},\n\n\t\t/**\n\t\t * Creates a model (section or lesson)\n\t\t * @param    string   type   model type [section or lesson]\n\t\t * @param    obj      model  model object\n\t\t * @return   void\n\t\t * @since    3.14.4\n\t\t * @version  3.14.4\n\t\t */\n\t\tcreate_item: function( type, model ) {\n\n\t\t\tvar collection = 'section' === type ? Instance.Syllabus.collection : App.Methods.get_last_section().Lessons.collection;\n\n\t\t\tcollection.create( model, {\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\tInstance.Status.add( model.id );\n\t\t\t\t},\n\t\t\t\tsuccess: function( res ) {\n\t\t\t\t\tInstance.Status.remove( model.id );\n\t\t\t\t},\n\t\t\t} );\n\n\t\t\tvar $el = $( '#llms-' + type + '-' + model.id );\n\t\t\t$el.addClass( 'brand-new' );\n\n\t\t\tsetTimeout( function() {\n\t\t\t\t$el.removeClass( 'brand-new' );\n\t\t\t}, 10 );\n\n\t\t\t// open section\n\t\t\tif ( 'lesson' === type ) {\n\t\t\t\t$el.closest( '.llms-section' ).addClass( 'opened' );\n\t\t\t}\n\n\t\t\t// scroll to bottom\n\t\t\tvar $wrap = $( '#llms-course-syllabus' );\n\t\t\t$wrap.animate( {\n\t\t\t\tscrollTop: $wrap[0].scrollHeight - $wrap[0].clientHeight,\n\t\t\t}, 200 );\n\n\t\t\tApp.Methods.sortable();\n\n\t\t},\n\n\t\t/**\n\t\t * Disable the lesson tools when there's no section in the course\n\t\t * @return   void\n\t\t * @since    3.14.4\n\t\t * @version  3.14.4\n\t\t */\n\t\tmaybe_disable: function() {\n\n\t\t\tvar $btns = $( '#llms-new-lesson, #llms-existing-lesson' );\n\n\t\t\tif ( ! Instance.Syllabus.collection.length ) {\n\t\t\t\t$btns.attr( 'disabled', 'disabled' );\n\t\t\t} else {\n\t\t\t\t$btns.removeAttr( 'disabled' );\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Show a popover to select an existing lesson\n\t\t * @param    obj   e  js click event obj\n\t\t * @return   void\n\t\t * @since    3.14.4\n\t\t * @version  [version]\n\t\t */\n\t\tshow_search_popover: function( e ) {\n\n\t\t\tWebuiPopovers.show( e.target, {\n\t\t\t\tanimation: 'pop',\n\t\t\t\tbackdrop: true,\n\t\t\t\tcontent: new Views.LessonSearchPopover().render().$el,\n\t\t\t\tcloseable: true,\n\t\t\t\tdismissible: true,\n\t\t\t\tmulti: false,\n\t\t\t\tplacement: 'left',\n\t\t\t\ttitle: LLMS.l10n.translate( 'Add an Existing Lesson' ),\n\t\t\t\ttrigger: 'manual',\n\t\t\t\twidth: 480,\n\t\t\t\tonShow: function( $popover ) {\n\t\t\t\t\t$( '.webui-popover-backdrop' ).one( 'click', function() {\n\t\t\t\t\t\tWebuiPopovers.hide( e.target );\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t} );\n\n\t\t},\n\n\t} );\n\n} );\n\n","/**\n * Tutorial Walkthrough View\n * @since    3.13.0\n * @version  3.14.0\n */\ndefine( 'Views/Tutorial',[], function() {\n\n\treturn Backbone.View.extend( {\n\n\t\t/**\n\t\t * HTML element selector\n\t\t * @type  {String}\n\t\t */\n\t\tel: '#llms-builder-tutorial',\n\n\t\t/**\n\t\t * Dom Events\n\t\t * @type     {Object}\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tevents: {\n\t\t\t'click #llms-start-tut': 'start',\n\t\t},\n\n\t\t/**\n\t\t * Get the underscore template\n\t\t * @type  {[type]}\n\t\t */\n\t\ttemplate: wp.template( 'llms-builder-tutorial-template' ),\n\n\t\tis_active: false,\n\t\tcurrent_step: 0,\n\t\tsteps: [],\n\n\t\t/**\n\t\t * Get object of current step data\n\t\t * @return   obj\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tget_current_step: function() {\n\t\t\treturn this.steps[ this.current_step ];\n\t\t},\n\n\t\t/**\n\t\t * Initializer\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tinitialize: function() {\n\n\t\t\t// this.listenTo( Instance.Syllabus.collection, 'add', this.maybe_render );\n\t\t\t// this.listenTo( Instance.Syllabus.collection, 'remove', this.maybe_render );\n\t\t\t// this.listenTo( Instance.Syllabus.collection, 'sync', this.maybe_render );\n\n\t\t\tthis.steps = window.llms_builder.tutorial;\n\n\t\t},\n\n\t\t/**\n\t\t * Enables / Disables the tutorial box\n\t\t * Shows the tutorial when there's no sections in the course\n\t\t * Hides when there are sectiosn in the course\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tmaybe_render: function() {\n\n\t\t\tif ( ! Instance.Syllabus.collection.length ) {\n\t\t\t\tthis.render();\n\t\t\t} else {\n\t\t\t\tthis.$el.fadeOut( 200 );\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Render the section\n\t\t * Initalizes a new collection and views for all lessons in the section\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\trender: function() {\n\t\t\tthis.$el.html( this.template() );\n\t\t\tthis.$el.fadeIn( 200 );\n\t\t\treturn this;\n\n\t\t},\n\n\t\t/**\n\t\t * Start the popover tutorial walkthrough\n\t\t * @param    obj   e  js event object\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tstart: function( e ) {\n\t\t\te.preventDefault();\n\t\t\tthis.show_next_step( 0 );\n\t\t},\n\n\t\t/**\n\t\t * Show a popover for the next step and bind necessary one-time events\n\t\t * @param    int   next_step  step index\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tshow_next_step: function( next_step ) {\n\n\t\t\tthis.current_step = next_step;\n\n\t\t\tvar self = this,\n\t\t\t\tstep = this.get_current_step(),\n\t\t\t\t$content = $( '<div class=\"llms-tutorial-content\" />' );\n\n\t\t\t$content.append( '<p>' + step.content_main + '</p>' );\n\t\t\tif ( step.content_action ) {\n\t\t\t\t$content.append( '<p><strong>' + step.content_action + '</strong></p>' );\n\t\t\t}\n\n\t\t\tif ( step.buttons ) {\n\t\t\t\t$.each( step.buttons, function( type, text ) {\n\t\t\t\t\tvar $btn = $( '<button class=\"llms-button-primary small\" type=\"button\">' + text + '</button>' );\n\t\t\t\t\t$content.append( $btn );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tWebuiPopovers.show( step.el, {\n\t\t\t\tanimation: 'pop',\n\t\t\t\t// backdrop: true,\n\t\t\t\tcontent: $content,\n\t\t\t\tcloseable: true,\n\t\t\t\t// container: '.wrap.llms-course-builder',\n\t\t\t\t// multi: true,\n\t\t\t\tplacement: step.placement || 'auto',\n\t\t\t\ttitle: ( this.current_step + 1 ) + '. ' + step.title,\n\t\t\t\ttrigger: 'manual',\n\t\t\t\twidth: 340,\n\t\t\t\tonShow: function( $el ) {\n\n\t\t\t\t\tself.is_active = true;\n\n\t\t\t\t\t$( step.el ).add( $el.find( 'button' ) ).one( 'click', function() {\n\t\t\t\t\t\t$el.remove();\n\t\t\t\t\t\tif ( self.current_step < self.steps.length - 1 ) {\n\t\t\t\t\t\t\tself.show_next_step( self.current_step + 1 );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself.is_active = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t},\n\t\t\t\tonHide: function() {\n\n\t\t\t\t\tself.is_active = false;\n\n\t\t\t\t},\n\t\t\t} );\n\n\t\t},\n\n\t} );\n\n} );\n\n","/**\n * Single Section View\n * @since    3.13.0\n * @version  3.14.0\n */\ndefine( 'Views/Section',[ 'Collections/Lessons', 'Mixins/EditableView', 'Mixins/ShiftableView', 'Views/LessonList' ], function( LessonCollection, Editable, Shiftable, LessonListView ) {\n\n\treturn Backbone.View.extend( _.defaults( {\n\n\t\t/**\n\t\t * Get default attributes for the html wrapper element\n\t\t * @return   obj\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tattributes: function() {\n\t\t\treturn {\n\t\t\t\t'data-id': this.model.id,\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Return CSS classes for the html wrapper element\n\t\t * @return   string\n\t\t * @since    3.14.5\n\t\t * @version  3.14.5\n\t\t */\n\t\tclassName: function() {\n\t\t\tvar classes = [ 'llms-builder-item', 'llms-section' ];\n\t\t\tif ( this.model.get( 'opened' ) ) {\n\t\t\t\tclasses.push( 'opened' );\n\t\t\t}\n\t\t\treturn classes.join( ' ' );\n\t\t},\n\n\t\t/**\n\t\t * DOM Events\n\t\t * @type     obj\n\t\t * @since    3.13.0\n\t\t * @version  3.14.0\n\t\t */\n\t\tevents: _.defaults( {\n\t\t\t'click .llms-action-icon.expand': 'lessons_show',\n\t\t\t'click .llms-action-icon.collapse': 'lessons_hide',\n\t\t\t'click .llms-action-icon.trash': 'delete_section',\n\t\t\t'drop-section': 'drop',\n\t\t}, Editable.events, Shiftable.events ),\n\n\t\t/**\n\t\t * HTML element wrapper ID attribute\n\t\t * @return   string\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tid: function() {\n\t\t\treturn 'llms-section-' + this.model.id;\n\t\t},\n\n\t\t/**\n\t\t * Wrapper Tag name\n\t\t * @type  {String}\n\t\t */\n\t\ttagName: 'li',\n\n\t\t/**\n\t\t * Get the underscore template\n\t\t * @type  {[type]}\n\t\t */\n\t\ttemplate: wp.template( 'llms-section-template' ),\n\n\t\t/**\n\t\t * Handles deletion of a section\n\t\t * Will only delete empty sections\n\t\t * @param    {obj}   event  js event object\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tdelete_section: function( event ) {\n\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\t// can't delete sections with lessons\n\t\t\tif ( this.model.Lessons.collection.length ) {\n\t\t\t\talert( LLMS.l10n.translate( 'You must remove all lessons before deleting a section.' ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar del_id = 'delete_' + this.model.id;\n\n\t\t\tthis.model.destroy( {\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\tInstance.Status.add( del_id );\n\t\t\t\t},\n\t\t\t\tsuccess: function( res ) {\n\t\t\t\t\tInstance.Status.remove( del_id );\n\t\t\t\t},\n\t\t\t} );\n\n\t\t},\n\n\t\t/**\n\t\t * jQuery UI sortable drop event handler\n\t\t * @param    {obj}   event  js event object\n\t\t * @param    {int}   index  new index of the dropped element\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tdrop: function( event, index ) {\n\n\t\t\tvar self = this,\n\t\t\t\tauto_save = true;\n\n\t\t\t// create if the model doesn't have a collection\n\t\t\tif ( ! this.model.collection ) {\n\t\t\t\tvar id = self.model.id;\n\t\t\t\tauto_save = false;\n\t\t\t\tInstance.Syllabus.collection.create( self.model, {\n\t\t\t\t\tbeforeSend: function() {\n\t\t\t\t\t\tInstance.Status.add( id );\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function( res ) {\n\t\t\t\t\t\tInstance.Status.remove( id );\n\t\t\t\t\t\tself.model.collection.sync_order();\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tself.$el.trigger( 'update-sort', [ self.model, index + 1, self.model.collection, null, auto_save ] );\n\n\t\t},\n\n\t\t/**\n\t\t * Initialization callback func (renders the element on screen)\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.14.5\n\t\t */\n\t\tinitialize: function() {\n\n\t\t\t// this.listenTo( this.model, 'sync', this.render );\n\n\t\t\tif ( ! this.model.Lessons ) {\n\n\t\t\t\t// setup lessons child view & collection\n\t\t\t\tthis.model.Lessons = new LessonListView( {\n\t\t\t\t\tcollection: new LessonCollection,\n\t\t\t\t} );\n\t\t\t\tthis.model.Lessons.collection.add( this.model.get( 'lessons' ) );\n\n\t\t\t}\n\n\n\t\t},\n\n\t\t/**\n\t\t * Hide lessons in the section\n\t\t * @param    {obj}   e  js event object\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.14.5\n\t\t */\n\t\tlessons_hide: function( e ) {\n\t\t\te.preventDefault();\n\t\t\tthis.$el.removeClass( 'opened' );\n\t\t\tthis.model.set( 'opened', false );\n\t\t},\n\n\t\t/**\n\t\t * Show lessons in the section\n\t\t * @param    {obj}   e  js event object\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.14.5\n\t\t */\n\t\tlessons_show: function( e ) {\n\t\t\te.preventDefault();\n\t\t\tthis.$el.addClass( 'opened' );\n\t\t\tthis.model.set( 'opened', true );\n\t\t},\n\n\t\t/**\n\t\t * Render the section\n\t\t * Initalizes a new collection and views for all lessons in the section\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.14.4\n\t\t */\n\t\trender: function() {\n\n\t\t\t// render inside\n\t\t\tthis.$el.html( this.template( this.model.toJSON() ) );\n\n\t\t\tthis.model.Lessons.setElement( this.$el.find( '.llms-lessons' ) ).render();\n\n\t\t\t// if the id has changed (when creating a new section for example) update the attributes and id\n\t\t\tif ( this.$el.attr( 'id' ) != this.model.id ) {\n\t\t\t\tthis.$el.attr( 'id', this.id() );\n\t\t\t\tthis.$el.attr( this.attributes() );\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t}, Editable, Shiftable ) );\n\n} );\n\n","/**\n * Section list (colletion) view\n * @return   void\n * @since    3.13.0\n * @version  [version]\n */\ndefine( 'Views/SectionList',[ 'Collections/Sections', 'Mixins/SortableView', 'Views/Section' ], function( collection, Sortable, SectionView ) {\n\n\treturn Backbone.View.extend( _.defaults( {\n\n\t\t/**\n\t\t * DOM element for the view to be added within\n\t\t * @type  {obj}\n\t\t */\n\t\tel: $( '#llms-sections' ),\n\n\t\t/**\n\t\t * collection association\n\t\t * @type  {obj}\n\t\t */\n\t\tcollection: new collection,\n\n\t\t/**\n\t\t * Add a section to the collection\n\t\t * @param    {obj}   section  a section model\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tadd_one: function( section ) {\n\t\t\tvar view = new SectionView( { model: section } );\n\t\t\tthis.$el.append( view.render().el );\n\t\t},\n\n\t\t/**\n\t\t * Delete a section from the collection\n\t\t * @param    {obj}   section     a model of the section\n\t\t * @param    {obj}   collection  the collection to remove it from\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tdestroy_one: function( section, collection ) {\n\t\t\tthis.sort_collection( collection );\n\t\t\tcollection.sync_order();\n\t\t},\n\n\t\t/**\n\t\t * Initializer\n\t\t * Setup dom event\n\t\t * & fetch the starting data for the collection\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  [version]\n\t\t */\n\t\tinitialize: function() {\n\n\t\t\tvar self = this;\n\n\t\t\tthis.listenTo( this.collection, 'add', this.add_one );\n\t\t\tthis.listenTo( this.collection, 'destroy', this.destroy_one );\n\t\t\tthis.listenTo( this.collection, 'rerender', this.render );\n\n\t\t\tthis.collection.fetch( {\n\n\t\t\t\tbeforeSend: function() {\n\n\t\t\t\t\tBackbone.pubSub.trigger( 'lock' );\n\n\t\t\t\t},\n\t\t\t\tsuccess: function( res ) {\n\n\t\t\t\t\tBackbone.pubSub.trigger( 'unlock' );\n\t\t\t\t\tBackbone.pubSub.trigger( 'init-complete' );\n\n\t\t\t\t},\n\n\t\t\t} );\n\n\t\t},\n\n\t\t/**\n\t\t * Render the view\n\t\t * @return   void\n\t\t * @since    3.13.0\n\t\t * @version  3.14.5\n\t\t */\n\t\trender: function() {\n\n\t\t\tthis.$el.children().remove();\n\n\t\t\tif ( this.collection.length ) {\n\t\t\t\tthis.collection.each( this.add_one, this );\n\t\t\t}\n\n\t\t\tBackbone.pubSub.trigger( 'rebind' );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t}, Sortable ) );\n\n} );\n\n","define( 'Views/loader',[\n\t\t'Views/Course',\n\t\t'Views/Lesson',\n\t\t'Views/LessonList',\n\t\t'Views/LessonSearchPopover',\n\t\t'Views/Main',\n\t\t'Views/Tools',\n\t\t'Views/Tutorial',\n\t\t'Views/Section',\n\t\t'Views/SectionList',\n\t], function(\n\t\tCourse,\n\t\tLesson,\n\t\tLessonList,\n\t\tLessonSearchPopover,\n\t\tMain,\n\t\tTools,\n\t\tTutorial,\n\t\tSection,\n\t\tSectionList\n\t) {\n\n\treturn {\n\t\tCourse: Course,\n\t\tLesson: Lesson,\n\t\tLessonList: LessonList,\n\t\tLessonSearchPopover: LessonSearchPopover,\n\t\tMain: Main,\n\t\tTools: Tools,\n\t\tTutorial: Tutorial,\n\t\tSection: Section,\n\t\tSectionList: SectionList,\n\t};\n\n} );\n\n","( function( $ ) {\n\n\tBackbone.pubSub = _.extend( {}, Backbone.Events );\n\n\trequire( [ 'Collections/loader', 'Models/loader', 'Views/loader' ], function( Collections, Models, Views ) {\n\n\t\t/**\n\t\t * Main Application Object\n\t\t * @type     {Object}\n\t\t * @since    3.13.0\n\t\t * @version  [version]\n\t\t */\n\t\tvar App = {\n\n\t\t\t$elements: {\n\t\t\t\t$main: $( '.llms-builder-main' ),\n\t\t\t},\n\n\t\t\tViews: {},\n\n\t\t\t/**\n\t\t\t * Various Application Methods\n\t\t\t * @type  {Object}\n\t\t\t */\n\t\t\tMethods: {\n\n\t\t\t\t/**\n\t\t\t\t * Retrieve the last section in the current instance\n\t\t\t\t * @return   obj     App.Models.Section\n\t\t\t\t * @since    3.13.0\n\t\t\t\t * @version  3.13.0\n\t\t\t\t */\n\t\t\t\tget_last_section: function() {\n\t\t\t\t\treturn Instance.Syllabus.collection.at( Instance.Syllabus.collection.length - 1 );\n\t\t\t\t},\n\n\t\t\t},\n\n\t\t};\n\n\t\t/**\n\t\t * Main Instance\n\t\t * @type     {Object}\n\t\t * @since    3.13.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tvar Instance = {\n\t\t\tCourse: new Views.Course( {\n\t\t\t\tmodel: new Models.Course( window.llms_builder.course ),\n\t\t\t} ),\n\t\t\tMain: new Views.Main,\n\t\t\tSyllabus: new Views.SectionList,\n\t\t\tStatus: {\n\t\t\t\tsaving: [],\n\t\t\t\tadd: function( id ) {\n\t\t\t\t\tthis.saving.push( id );\n\t\t\t\t\tthis.update_dom();\n\t\t\t\t},\n\t\t\t\tremove: function( id ) {\n\t\t\t\t\tthis.saving = _.without( this.saving, id );\n\t\t\t\t\tthis.update_dom();\n\t\t\t\t},\n\t\t\t\tupdate_dom: function() {\n\t\t\t\t\tvar status = this.saving.length ? 'saving' : 'complete';\n\t\t\t\t\t$( '#save-status' ).attr( 'data-status', status );\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tInstance.Tools = new Views.Tools;\n\t\tInstance.Tutorial = new Views.Tutorial;\n\n\t\t// prevent actions outside the intended tutorial action (when the tutorial is active)\n\t\t$( '.wrap.llms-course-builder' ).on( 'click', 'a, button', function( event ) {\n\t\t\tvar $el = $( this );\n\t\t\tif ( Instance.Tutorial.is_active ) {\n\t\t\t\tvar step = Instance.Tutorial.get_current_step();\n\t\t\t\tif ( $( step.el ) !== $el ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t$( step.el ).fadeOut( 100 ).fadeIn( 300 );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * Set the fixed height of the builder area\n\t\t * @return   void\n\t\t * @since    3.14.2\n\t\t * @version  3.14.2\n\t\t */\n\t\tfunction resize_builder() {\n\t\t\t$( '.llms-course-builder' ).height( $( window ).height() - 62 ); // @shame magic numbers...\n\t\t}\n\n\t\tvar resize_timeout;\n\t\t$( window ).on( 'resize', function() {\n\n\t\t\tclearTimeout( resize_timeout );\n\t\t\tresize_timeout = setTimeout( function() {\n\t\t\t\tresize_builder();\n\t\t\t}, 250 );\n\n\t\t} );\n\n\t\t// resize on page load\n\t\tresize_builder();\n\n\t\t// warn during unloads while we're still processing saves\n\t\t$( window ).on( 'beforeunload', function( e ) {\n\t\t\tif ( Instance.Status.saving.length ) {\n\t\t\t\treturn LLMS.l10n.translate( 'If you leave now your changes may not be saved!' );\n\t\t\t}\n\t\t} );\n\n\t\t// expose the instance to the window\n\t\twindow.llms_builder.Instance = Instance;\n\n\t} );\n\n} )( jQuery );\n\ndefine(\"main\", function(){});\n\n"]}