!function(t){var i=function(){function i(){t("body").on("click",".llms-notification-dismiss",function(){a.dismiss(t(this).closest(".llms-notification"))})}function n(){clearInterval(e)}function s(t){pump(function(){t&&"unload"===t||!a.has_notifications||a.show_all()})}function o(){e=setInterval(s,r)}var e,a=this,r=1e4,u=[],l=[];return pump=function(t){LLMS.Ajax.call({data:{action:"notifications_heartbeart",dismissals:l},beforeSend:function(){return a.block_ajax?(a.restart_heartbeat=!0,n(),t(),!1):void(a.block_ajax=!0)},complete:function(){a.restart_heartbeat&&(a.restart_heartbeat=!1,o()),a.block_ajax=!1},success:function(i){l=[],i.success&&i.data&&a.queue(i.data["new"]),t()}})},this.block_ajax=!1,this.restart_heartbeat=!1,this.init=function(){this.is_user_logged_in()&&(window.onbeforeunload=function(){s("unload")},i(),s(),o())},this.queue=function(t){var i=this;for(var n in t)t.hasOwnProperty(n)&&!1===i.notification_exists(t[n].id)&&u.push(t[n])},this.dismiss=function(t){var i=this;t.removeClass("visible"),l.push(t.attr("data-id")),setTimeout(function(){i.reposition(t.next(".llms-notification.visible"))},10)},this.notification_exists=function(t){for(var i in u)if(u.hasOwnProperty(i)&&t===u[i].id)return i;return!1},this.get_offset=function(i){var n=12;if(i||(i=t(".llms-notification.visible").last()),!i.offset())return 24;var s=i.offset().top,o=i.outerHeight();return s+o+n},this.has_notifications=function(){return u.length},this.is_user_logged_in=function(){return t("body").hasClass("logged-in")},this.reposition=function(i){var n,s=this,o=".llms-notification.visible";i.length||(i=t(o).first()),i.css("top",s.get_offset(i.prevAll(o).first())),n=i.next(o),n.length&&setTimeout(function(){s.reposition(n)},150)},this.show_all=function(){var t,i=this,n=0;t=setInterval(function(){n<u.length?(u[n].shown||(u[n].shown=!0,i.show_one(u[n])),n++):clearInterval(t)},100)},this.show_one=function(i){var n=this,s=t(i.html);t("body").append(s),s.css("top",n.get_offset()),setTimeout(function(){s.addClass("visible")},1),s.attr("data-auto-dismiss")&&setTimeout(function(){n.dismiss(s)},s.attr("data-auto-dismiss"))},this.init(),this};window.llms=window.llms||{},window.llms.notifications=new i}(jQuery);