!function(t){var i=function(){function i(){t("body").on("click",".llms-notification",function(){a.dismiss(t(this))})}function n(){clearInterval(e)}function s(){pump(function(){a.has_notifications&&a.show_all()})}function o(){e=setInterval(s,l)}var e,a=this,l=1e4,r=[],c=[];return pump=function(t){LLMS.Ajax.call({data:{action:"notifications_heartbeart",dismissals:c},beforeSend:function(){return a.block_ajax?(a.restart_heartbeat=!0,n(),t(),!1):void(a.block_ajax=!0)},complete:function(){a.restart_heartbeat&&(a.restart_heartbeat=!1,o()),a.block_ajax=!1},success:function(i){c=[],i.success&&i.data&&a.queue(i.data["new"]),t()}})},this.block_ajax=!1,this.restart_heartbeat=!1,this.init=function(){this.is_user_logged_in()&&(window.onbeforeunload=function(){s()},i(),s(),o())},this.queue=function(t){var i=this;for(var n in t)t.hasOwnProperty(n)&&!1===i.notification_exists(t[n].id)&&r.push(t[n])},this.dismiss=function(t){var i=this;t.removeClass("visible"),c.push(t.attr("data-id")),setTimeout(function(){i.reposition(t.next(".llms-notification.visible"))},10)},this.notification_exists=function(t){for(var i in r)if(r.hasOwnProperty(i)&&t===r[i].id)return i;return!1},this.get_offset=function(i){var n=12;if(i||(i=t(".llms-notification.visible").last()),!i.offset())return 24;var s=i.offset().top,o=i.outerHeight();return s+o+n},this.get_html=function(i){var n=t('<div class="llms-notification llms-notification--'+i.type+'" data-id="'+i.id+'">');return i.icon&&n.append('<img class="llms-notification-icon" alt="'+i.title+'" src="'+i.icon+'">'),i.title&&n.append('<h4 class="llms-notification-title">'+i.title+"</h4>"),i.body&&n.append('<div class="llms-notification-body">'+i.body+"</div>"),n.append('<i class="llms-notification-dismiss fa fa-times-circle" aria-hidden="true"></i>'),n},this.has_notifications=function(){return r.length},this.is_user_logged_in=function(){return t("body").hasClass("logged-in")},this.reposition=function(i){var n,s=this,o=".llms-notification.visible";i.length||(i=t(o).first()),i.css("top",s.get_offset(i.prevAll(o).first())),n=i.next(o),n.length&&setTimeout(function(){s.reposition(n)},150)},this.show_all=function(){var t,i=this,n=0;t=setInterval(function(){n<r.length?(r[n].shown||(r[n].shown=!0,i.show_one(r[n])),n++):clearInterval(t)},100)},this.show_one=function(i){var n=this,s=this.get_html(i);t("body").append(s),s.css("top",n.get_offset()),setTimeout(function(){s.addClass("visible")},1)},this.init(),this};window.llms=window.llms||{},window.llms.notifications=new i}(jQuery);