var LLMS=window.LLMS||{};!function(t){"use strict";LLMS.Achievements={init:function(){var e=this;t(".llms-achievement")&&t(document).on("ready",function(){e.bind(),e.maybe_open()})},bind:function(){var e=this;t(".llms-achievement").each(function(){e.create_modal(t(this))}),t(".llms-achievement").on("click",function(){var n=t(this),i="achievement-"+n.attr("data-id"),s=t("#"+i);s.length||e.create_modal(n),s.iziModal("open")})},create_modal:function(e){var n="achievement-"+e.attr("data-id"),i=t("#"+n);i.length||(i=t('<div class="llms-achievement-modal" id="'+n+'" />'),t("body").append(i)),i.iziModal({headerColor:"#3a3a3a",group:"achievements",history:!0,loop:!0,overlayColor:"rgba( 0, 0, 0, 0.6 )",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",width:340,onOpening:function(t){t.setTitle(e.find(".llms-achievement-title").html()),t.setSubtitle(e.find(".llms-achievement-date").html()),t.setContent('<div class="llms-achievement">'+e.html()+"</div>")},onClosing:function(){window.history.pushState("",document.title,window.location.pathname+window.location.search)}})},maybe_open:function(){var e=window.location.hash;e&&-1!==e.indexOf("achievement-")&&t('a[href="'+e+'"]').first().trigger("click")}},LLMS.Ajax={url:window.ajaxurl||window.llms.ajaxurl,type:"post",data:[],cache:!1,dataType:"json",async:!0,response:[],init:function(e){if(null===e||"object"!=typeof e)return!1;e.url="url"in e?e.url:this.url,e.type="type"in e?e.type:this.type,e.data="data"in e?e.data:this.data,e.cache="cache"in e?e.cache:this.cache,e.dataType="dataType"in e?e.dataType:this.dataType,e.async="async"in e?e.async:this.async,e.data._ajax_nonce=wp_ajax_data.nonce;var n=LLMS.Rest,i=n.get_query_vars();return e.data.post_id="post"in i?i.post:null,!e.data.post_id&&t("input#post_ID").length&&(e.data.post_id=t("input#post_ID").val()),e},call:function(t){var e=this.init(t);return!!e&&(this.request(e),this)},request:function(e){return t.ajax(e),this}},LLMS.Donut=function(e){function n(e){this.settings=t.extend({element:e.element,percent:100},e),this.circle=this.settings.element.find("path"),this.settings.stroke_width=parseInt(this.circle.css("stroke-width")),this.radius=(parseInt(this.settings.element.css("width"))-this.settings.stroke_width)/2,this.angle=-97.5,this.i=Math.round(.75*this.settings.percent),this.first=!0,this.animate=function(){this.timer=setInterval(this.loop.bind(this),10)},this.loop=function(){this.angle+=5,this.angle%=360;var t,e=this.angle/180*Math.PI,n=this.radius+this.settings.stroke_width/2+Math.cos(e)*this.radius,i=this.radius+this.settings.stroke_width/2+Math.sin(e)*this.radius;this.first===!0?(t=this.circle.attr("d")+" M "+n+" "+i,this.first=!1):t=this.circle.attr("d")+" L "+n+" "+i,this.circle.attr("d",t),this.i--,this.i<=0&&clearInterval(this.timer)}}function i(t){var e='<path d="M100,100" />';t.append('<svg preserveAspectRatio="xMidYMid" xmlns:xlink="http://www.w3.org/1999/xlink">'+e+"</svg>");var i=new n({element:t,percent:t.attr("data-perc")});i.animate()}i(e)},LLMS.Forms={locale:{},locale_defaults:{},$countries:null,$states:null,$states_holder:null,init:function(){if(!t("body").hasClass("wp-admin")){var e=this;e.bind_matching_fields(),e.bind_voucher_field(),e.bind_edit_account(),LLMS.wait_for(function(){return void 0!==t.fn.llmsSelect2},function(){e.bind_l10n_selects()})}},bind_edit_account:function(){t("form.llms-person-form.edit-account").length&&(this.setup_toggle_field(t("#email_address, #email_address_confirm")),this.setup_toggle_field(t("#password, #password_confirm, #password_current, #llms-password-strength-meter")))},bind_l10n_selects:function(){var e=this;e.$countries=t(".llms-l10n-country-select select"),e.$states=t(".llms-l10n-state-select select"),e.$zips=t("#llms_billing_zip"),e.$countries.length&&(e.$states.length&&e.prep_state_field(),e.$countries.add(e.$states).llmsSelect2({width:"100%"}),window.llms.locale&&(e.locale=JSON.parse(window.llms.locale),e.locale_defaults={state:function(){return e.get_label_text(e.get_field_parent(e.$states).find("label"))}()}),e.$countries.on("change",function(){var n=t(this).val();e.update_state_options(n),e.update_locale_info(n)}).trigger("change"))},bind_matching_fields:function(){var e=t("input[data-match]").not('[type="password"]');e.each(function(){var e,n=t(this),i=t("#"+n.attr("data-match"));i.length&&(e=n.closest(".llms-form-field").add(i.closest(".llms-form-field")),n.on("input change",function(){var t=n.val(),s=i.val();t&&s&&t!==s?e.addClass("invalid"):e.removeClass("invalid")}))})},bind_voucher_field:function(){t("#llms-voucher-toggle").on("click",function(e){e.preventDefault(),t("#llms_voucher").toggle()})},get_field_parent:function(t){var e=t.closest(".wp-block-column");return e.length?e:t.closest(".llms-form-field")},get_label_text:function(t){var e=t.clone();return e.find("*").remove(),e.text().trim()},prep_state_field:function(){var e=this.$states.closest(".llms-form-field");this.$holder=t('<select disabled style="display:none !important;" />'),this.$holder.appendTo(e),this.$states.find("optgroup").appendTo(this.$holder)},setup_toggle_field:function(e){function n(){l.text(h),e.each(function(){s.get_field_parent(t(this)).show(),t(this).attr("required","required"),t(this).removeAttr("disabled")})}function i(){l.text(c),e.each(function(){s.get_field_parent(t(this)).hide(),t(this).removeAttr("required"),t(this).attr("disabled","disabled")})}var s=this,o=t(e[0]),a=this.get_field_parent(o),l=t('<a href="#"></a>'),r=t('<div class="llms-form-field type-html llms-cols-12 llms-cols-last"></div>'),c=LLMS.l10n.replace("Change your %s",{"%s":this.get_label_text(a.find("label")).toLowerCase()}),h=LLMS.l10n.replace("Cancel %s change",{"%s":this.get_label_text(a.find("label")).toLowerCase()}),d=e.length>2?this.get_field_parent(t(e[e.length-1])):a,u=d.hasClass("wp-block-column")?d.parent():d;l.on("click",function(t){t.preventDefault(),a.is(":visible")?i():n()}),r.append(l),u.after('<div class="clear"></div>'),u.after(r),i()},update_label:function(t,e){var n=this.get_field_parent(t).find("label"),i=n.find(".llms-required").clone();n.html(e),n.append(i)},update_locale_info:function(t){if(this.locale&&this.locale[t]){var e=this.locale[t],n=e.state?e.state:this.locale_defaults.state;this.update_label(this.$states,n);var i=this.get_field_parent(this.$zips);this.$zips.removeAttr("disabled"),e.zip?(this.update_label(this.$zips,e.zip),i.show()):(this.$zips.attr("disabled","disabled"),i.hide())}},update_state_options:function(t){if(this.$states.length){var e=this.$holder.find('optgroup[data-key="'+t+'"] option').clone(),n=this.get_field_parent(this.$states);e.length?(this.$states.html(e),this.$states.removeAttr("disabled"),n.show()):(this.$states.html("<option>&nbsp</option>"),this.$states.attr("disabled","disabled"),n.hide())}}},LLMS.Instructors={init:function(){var e=this;t("body").hasClass("wp-admin")||t(".llms-instructors").length&&LLMS.wait_for_matchHeight(function(){e.bind()})},bind:function(){t(".llms-instructors .llms-author").matchHeight()}},LLMS.l10n=LLMS.l10n||{},LLMS.l10n.translate=function(t){var e=this;return e.strings[t]?e.strings[t]:t},LLMS.l10n.replace=function(e,n){var i=this.translate(e);return t.each(n,function(t,e){-1!==t.indexOf("s")?e=e.toString():-1!==t.indexOf("d")&&(e=1*e),i=i.replace(t,e)}),i},LLMS.LessonPreview={$els:null,init:function(){var e=this;this.$locked=t('a[href="#llms-lesson-locked"]'),this.$locked.length&&e.bind(),t(".llms-course-navigation").length&&LLMS.wait_for_matchHeight(function(){e.match_height()})},bind:function(){var e=this;this.$locked.on("click",function(){return!1}),this.$locked.on("mouseenter",function(){var n=t(this).find(".llms-tooltip");if(!n.length){var i=t(this).attr("data-tooltip-msg");i||(i=LLMS.l10n.translate("You do not have permission to access this content")),n=e.get_tooltip(i),t(this).append(n)}setTimeout(function(){n.addClass("show")},10)}),this.$locked.on("mouseleave",function(){var e=t(this).find(".llms-tooltip");e.removeClass("show")})},match_height:function(){t(".llms-course-navigation .llms-lesson-link").matchHeight()},get_tooltip:function(e){var n=t('<div class="llms-tooltip" />');return n.append('<div class="llms-tooltip-content">'+e+"</div>"),n}},LLMS.Loops={init:function(){var e=this;t(".llms-loop").length&&LLMS.wait_for_matchHeight(function(){e.match_height()})},match_height:function(){t(".llms-loop-item .llms-loop-item-content").matchHeight(),t(".llms-achievement-loop-item .llms-achievement").matchHeight(),t(".llms-certificate-loop-item .llms-certificate").matchHeight()}},LLMS.OutlineCollapse={$outlines:null,init:function(){this.$outlines=t(".llms-widget-syllabus--collapsible"),this.$outlines.length&&this.bind()},bind:function(){var e=this;this.$outlines.each(function(){var n=t(this),i=n.find(".llms-section .section-header");i.on("click",function(n){n.preventDefault();var i=t(this),s=i.closest(".llms-section"),o=e.get_section_state(s);switch(o){case"closed":e.open_section(s);break;case"opened":e.close_section(s)}}),n.find(".llms-collapse-toggle").on("click",function(n){n.preventDefault();var s=t(this),o=s.attr("data-action"),a="close"===o?"opened":"closed";i.each(function(){var n=t(this).closest(".llms-section"),i=e.get_section_state(n);if(a!==i)return!0;switch(i){case"closed":e.close_section(n);break;case"opened":e.open_section(n)}t(this).trigger("click")})})})},close_section:function(t){t.removeClass("llms-section--opened").addClass("llms-section--closed")},open_section:function(t){t.removeClass("llms-section--closed").addClass("llms-section--opened")},get_section_state:function(t){return t.hasClass("llms-section--opened")?"opened":"closed"}},t.extend(LLMS.PasswordStrength,{$meter:t(".llms-password-strength-meter"),$pass:null,$conf:null,$form:null,init:function(){if(!t("body").hasClass("wp-admin")&&this.setup_references()){var e=this;LLMS.wait_for(function(){return"undefined"!=typeof wp&&"undefined"!=typeof wp.passwordStrength},function(){e.bind(),e.$form.trigger("llms-password-strength-ready")})}},bind:function(){var t=this;this.$form.hasClass("llms-checkout")||t.$form.on("submit",t,t.submit),t.$pass.add(t.$conf).on("keyup",function(){t.check_strength()})},check_strength:function(){var t=this.$pass.closest(".llms-form-field"),e=this.$conf.closest(".llms-form-field"),n=this.$pass.val().length,i=this.$conf.length?this.$conf.val().length:0;return n||i?(this.get_current_strength_status()?(t.removeClass("invalid").addClass("valid"),i&&e.removeClass("invalid").addClass("valid")):(t.removeClass("valid").addClass("invalid"),i&&e.removeClass("valid").addClass("invalid")),this.$meter.removeClass("too-short very-weak weak medium strong mismatch"),this.$meter.show().addClass(this.get_current_strength("slug")),void this.$meter.html(this.get_current_strength("text"))):(t.removeClass("valid invalid"),e.removeClass("valid invalid"),void this.$meter.hide())},checkout:function(t,e){e(t.get_current_strength_status()?!0:LLMS.l10n.translate("There is an issue with your chosen password."))},get_blacklist:function(){var e=wp.passwordStrength.userInputBlacklist().concat(this.get_setting("blacklist",[]));return this.$form.find('input[type="text"], input[type="email"], input[type="tel"], input[type="number"]').each(function(){var n=t(this).val();n&&e.push(n)}),e},get_current_strength:function(t){t=t||"int";var e,n=this.$pass.val(),i=this.$conf.val();return n.length<this.get_setting("min_length",6)?e=-1:(e=wp.passwordStrength.meter(n,this.get_blacklist(),i),0===e&&(e=1)),"slug"===t?this.get_strength_slug(e):"text"===t?this.get_strength_text(e):e},get_current_strength_status:function(){var t=this.get_current_strength(),e=this.get_strength_value(this.get_minimum_strength());return 5!==t&&t>=e},get_minimum_strength:function(){return this.get_setting("min_strength","strong")},get_setting:function(t,e){var n=this.get_settings();return n[t]?n[t]:e},get_strength_slug:function(t){var e={"-1":"too-short",1:"very-weak",2:"weak",3:"medium",4:"strong",5:"mismatch"};return e[t]?e[t]:e[5]},get_strength_text:function(t){var e={"-1":LLMS.l10n.translate("Too Short"),1:LLMS.l10n.translate("Very Weak"),2:LLMS.l10n.translate("Weak"),3:LLMS.l10n.translate("Medium"),4:LLMS.l10n.translate("Strong"),5:LLMS.l10n.translate("Mismatch")};return e[t]?e[t]:e[5]},get_strength_value:function(t){var e={"too-short":-1,"very-weak":1,weak:2,medium:3,strong:4,mismatch:5};return e[t]?e[t]:e.mismatch},setup_references:function(){return!!this.$meter.length&&(this.$form=this.$meter.closest("form"),this.$pass=this.$form.find("input#password"),this.$pass.length&&this.$pass.attr("data-match")&&(this.$conf=this.$form.find("#"+this.$pass.attr("data-match"))),this.$pass.length>0)},submit:function(e){var n=e.data;e.preventDefault(),n.$pass.trigger("keyup"),n.get_current_strength_status()||n.$form.hasClass("edit-account")&&"disabled"===n.$pass.attr("disabled")?(n.$form.off("submit",n.submit),n.$form.trigger("submit")):(t("html, body").animate({scrollTop:n.$meter.offset().top-100},200),n.$meter.hide(),setTimeout(function(){n.$meter.fadeIn(400)},220))}}),LLMS.Pricing_Tables={init:function(){var e=this;t("body").hasClass("wp-admin")||t(".llms-access-plans").length&&(LLMS.wait_for_matchHeight(function(){e.bind()}),this.$locked=t('a[href="#llms-plan-locked"]'),this.$locked.length&&LLMS.wait_for_popover(function(){e.bind_locked()}))},bind:function(){t(".llms-access-plan-content").matchHeight(),t(".llms-access-plan-pricing.trial").matchHeight()},bind_locked:function(){this.$locked.each(function(){t(this).webuiPopover({animation:"pop",closeable:!0,content:function(e){var n=t('<div class="llms-members-only-restrictions" />');return n.append(e.$element.closest(".llms-access-plan").find(".llms-access-plan-restrictions ul").clone()),n},placement:"top",style:"inverse",title:LLMS.l10n.translate("Members Only Pricing"),width:"280px"})})}},LLMS.Review={init:function(){this.bind()},bind:function(){t("#llms_review_submit_button").click(function(){""!==t("#review_title").val()&&""!==t("#review_text").val()?jQuery.ajax({type:"post",dataType:"json",url:window.llms.ajaxurl,data:{action:"LLMSSubmitReview",review_title:t("#review_title").val(),review_text:t("#review_text").val(),pageID:t("#post_ID").val()},success:function(){console.log("Review success"),t("#review_box").hide("swing"),t("#thank_you_box").show("swing")},error:function(t,e,n){console.log(t),console.log(e),console.log(n)}}):(""===t("#review_title").val()?t("#review_title_error").show("swing"):t("#review_title_error").hide("swing"),""===t("#review_text").val()?t("#review_text_error").show("swing"):t("#review_text_error").hide("swing"))}),t("#_llms_display_reviews").attr("checked")?(t(".llms-num-reviews-top").addClass("top"),t(".llms-num-reviews-bottom").show()):t(".llms-num-reviews-bottom").hide(),t("#_llms_display_reviews").change(function(){t("#_llms_display_reviews").attr("checked")?(t(".llms-num-reviews-top").addClass("top"),t(".llms-num-reviews-bottom").show()):(t(".llms-num-reviews-top").removeClass("top"),t(".llms-num-reviews-bottom").hide())})}},LLMS.Spinner={get:function(e,n){var i=e.find(".llms-spinning").first();return i.length||(n=n?n:"default",i=t('<div class="llms-spinning"><i class="llms-spinner '+n+'"></i></div>'),e.append(i)),i},start:function(e,n){var i=this;e.each(function(){i.get(t(this),n).show()})},stop:function(e){var n=this;e.each(function(){n.get(t(this)).hide()})}},function(t){var e;if("function"==typeof define&&define.amd&&(define(t),e=!0),"object"==typeof exports&&(module.exports=t(),e=!0),!e){var n=window.Cookies,i=window.Cookies=t();i.noConflict=function(){return window.Cookies=n,i}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(i){function s(){}function o(e,n,o){if("undefined"!=typeof document){o=t({path:"/"},s.defaults,o),"number"==typeof o.expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(l){}n=i.write?i.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r="";for(var c in o)o[c]&&(r+="; "+c,o[c]!==!0&&(r+="="+o[c].split(";")[0]));return document.cookie=e+"="+n+r}}function a(t,n){if("undefined"!=typeof document){for(var s={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var l=o[a].split("="),r=l.slice(1).join("=");n||'"'!==r.charAt(0)||(r=r.slice(1,-1));try{var c=e(l[0]);if(r=(i.read||i)(r,c)||e(r),n)try{r=JSON.parse(r)}catch(h){}if(s[c]=r,t===c)break}catch(h){}}return t?s[t]:s}}return s.set=o,s.get=function(t){return a(t,!1)},s.getJSON=function(t){return a(t,!0)},s.remove=function(e,n){o(e,"",t(n,{expires:-1}))},s.defaults={},s.withConverter=n,s}return n(function(){})}),LLMS.Storage=function(t){var e=this,n=Cookies.noConflict();this.clearAll=function(){n.remove(t)},this.clear=function(i){var s=e.getAll();return delete s[i],n.set(t,s)},this.getAll=function(){return n.getJSON(t)||{}},this.get=function(t,n){var i=e.getAll();return i[t]?i[t]:n},this.set=function(i,s){var o=e.getAll();return o[i]=s,n.set(t,o)}},LLMS.StudentDashboard={screen:"",init:function(){t(".llms-student-dashboard").length&&(this.bind(),"orders"===this.get_screen()&&this.bind_orders())},bind:function(){t(".llms-donut").each(function(){LLMS.Donut(t(this))})},bind_orders:function(){t("#llms-cancel-subscription-form").on("submit",this.order_cancel_warning),t("#llms_update_payment_method").on("click",function(){t('input[name="llms_payment_gateway"]:checked').trigger("change"),t(this).closest("form").find(".llms-switch-payment-source-main").slideToggle("200")})},get_screen:function(){return this.screen||(this.screen=t(".llms-student-dashboard").attr("data-current")),this.screen},order_cancel_warning:function(e){e.preventDefault();var n=LLMS.l10n.translate("Are you sure you want to cancel your subscription?");window.confirm(LLMS.l10n.translate(n))&&(t(this).off("submit",this.order_cancel_warning),t(this).submit())}},LLMS.Tracking=function(e){function n(){e.nonce&&l.set("nonce",e.nonce),a.addEvent("page.load"),window.addEventListener("beforeunload",i),window.addEventListener("unload",s),document.addEventListener("visibilitychange",o)}function i(t){document.removeEventListener("visibilitychange",o)}function s(t){a.addEvent("page.exit")}function o(t){var e=document.hidden?"page.blur":"page.focus";a.addEvent(e)}e=e||{};var a=this,l=new LLMS.Storage("llms-tracking");e="string"==typeof e?JSON.parse(e):e,this.addEvent=function(t,n){if(n=n||{},"string"==typeof t&&(n.event=t),e.events&&-1!==e.events.indexOf(n.event)){t=a.makeEventObj(n);var i=l.get("events",[]);i.push(t),l.set("events",i),l.set("nonce",e.nonce)}},this.getSettings=function(){return e},this.makeEventObj=function(t){return Object.assign(t,{url:window.location.href,time:Math.round((new Date).getTime()/1e3)})},t("body").hasClass("wp-admin")||n()},llms.tracking=new LLMS.Tracking(llms.tracking),LLMS.Rest={init:function(){this.bind()},bind:function(){},is_path:function(t){for(var e=!1,n=window.location.href,i=0;i<t.length;i++)n.search(t[i])>0&&!e&&(e=!0);return e},get_query_vars:function(){for(var t,e=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<n.length;i++)t=n[i].split("="),e.push(t[0]),e[t[0]]=t[1];return e}},LLMS.init=function(){for(var t in LLMS)"object"==typeof LLMS[t]&&null!==LLMS[t]&&void 0!==LLMS[t].init&&"function"==typeof LLMS[t].init&&LLMS[t].init()},LLMS.is_touch_device=function(){var t=" -webkit- -moz- -o- -ms- ".split(" "),e=function(t){return window.matchMedia(t).matches};if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var n=["(",t.join("touch-enabled),("),"heartz",")"].join("");return e(n)},LLMS.wait_for_matchHeight=function(e){this.wait_for(function(){return void 0!==t.fn.matchHeight},e)},LLMS.wait_for_popover=function(e){this.wait_for(function(){return void 0!==t.fn.webuiPopover},e)},LLMS.wait_for=function(t,e){var n,i=0;n=setInterval(function(){if(i>=300)console.log("could not load dependency");else{if(!t())return console.log("waiting..."),void i++;e()}clearInterval(n)},100)},LLMS.init(t)}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMuanMiLCIuLi9hcHAvbGxtcy1hY2hpZXZlbWVudHMuanMiLCIuLi9hcHAvbGxtcy1hamF4LmpzIiwiLi4vYXBwL2xsbXMtZG9udXQuanMiLCIuLi9hcHAvbGxtcy1mb3Jtcy5qcyIsIi4uL2FwcC9sbG1zLWluc3RydWN0b3JzLmpzIiwiLi4vYXBwL2xsbXMtbDEwbi5qcyIsIi4uL2FwcC9sbG1zLWxlc3Nvbi1wcmV2aWV3LmpzIiwiLi4vYXBwL2xsbXMtbG9vcHMuanMiLCIuLi9hcHAvbGxtcy1vdXRsaW5lLWNvbGxhcHNlLmpzIiwiLi4vYXBwL2xsbXMtcGFzc3dvcmQtc3RyZW5ndGguanMiLCIuLi9hcHAvbGxtcy1wcmljaW5nLXRhYmxlcy5qcyIsIi4uL2FwcC9sbG1zLXJldmlldy5qcyIsIi4uL2FwcC9sbG1zLXNwaW5uZXIuanMiLCIuLi92ZW5kb3IvanMuY29va2llLmpzIiwiLi4vYXBwL2xsbXMtc3RvcmFnZS5qcyIsIi4uL2FwcC9sbG1zLXN0dWRlbnQtZGFzaGJvYXJkLmpzIiwiLi4vYXBwL2xsbXMtdHJhY2tpbmcuanMiLCIuLi9hcHAvcmVzdC5qcyJdLCJuYW1lcyI6WyJMTE1TIiwid2luZG93IiwiJCIsIkFjaGlldmVtZW50cyIsImluaXQiLCJzZWxmIiwidGhpcyIsImRvY3VtZW50Iiwib24iLCJiaW5kIiwibWF5YmVfb3BlbiIsImVhY2giLCJjcmVhdGVfbW9kYWwiLCIkdGhpcyIsImlkIiwiYXR0ciIsIiRtb2RhbCIsImxlbmd0aCIsIml6aU1vZGFsIiwiJGVsIiwiYXBwZW5kIiwiaGVhZGVyQ29sb3IiLCJncm91cCIsImhpc3RvcnkiLCJsb29wIiwib3ZlcmxheUNvbG9yIiwidHJhbnNpdGlvbkluIiwidHJhbnNpdGlvbk91dCIsIndpZHRoIiwib25PcGVuaW5nIiwibW9kYWwiLCJzZXRUaXRsZSIsImZpbmQiLCJodG1sIiwic2V0U3VidGl0bGUiLCJzZXRDb250ZW50Iiwib25DbG9zaW5nIiwicHVzaFN0YXRlIiwidGl0bGUiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwic2VhcmNoIiwiaGFzaCIsImluZGV4T2YiLCJmaXJzdCIsInRyaWdnZXIiLCJBamF4IiwidXJsIiwiYWpheHVybCIsImxsbXMiLCJ0eXBlIiwiZGF0YSIsImNhY2hlIiwiZGF0YVR5cGUiLCJhc3luYyIsInJlc3BvbnNlIiwib2JqIiwiX2FqYXhfbm9uY2UiLCJ3cF9hamF4X2RhdGEiLCJub25jZSIsIiRSIiwiUmVzdCIsInF1ZXJ5X3ZhcnMiLCJnZXRfcXVlcnlfdmFycyIsInBvc3RfaWQiLCJwb3N0IiwidmFsIiwiY2FsbCIsInNldHRpbmdzIiwicmVxdWVzdCIsImFqYXgiLCJEb251dCIsIm9wdGlvbnMiLCJleHRlbmQiLCJlbGVtZW50IiwicGVyY2VudCIsImNpcmNsZSIsInN0cm9rZV93aWR0aCIsInBhcnNlSW50IiwiY3NzIiwicmFkaXVzIiwiYW5nbGUiLCJpIiwiTWF0aCIsInJvdW5kIiwiYW5pbWF0ZSIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJkIiwicmFkaWFucyIsIlBJIiwieCIsImNvcyIsInkiLCJzaW4iLCJjbGVhckludGVydmFsIiwiZHJhdyIsInBhdGgiLCJkb251dCIsIkZvcm1zIiwibG9jYWxlIiwibG9jYWxlX2RlZmF1bHRzIiwiJGNvdW50cmllcyIsIiRzdGF0ZXMiLCIkc3RhdGVzX2hvbGRlciIsImhhc0NsYXNzIiwiYmluZF9tYXRjaGluZ19maWVsZHMiLCJiaW5kX3ZvdWNoZXJfZmllbGQiLCJiaW5kX2VkaXRfYWNjb3VudCIsIndhaXRfZm9yIiwidW5kZWZpbmVkIiwiZm4iLCJsbG1zU2VsZWN0MiIsImJpbmRfbDEwbl9zZWxlY3RzIiwic2V0dXBfdG9nZ2xlX2ZpZWxkIiwiJHppcHMiLCJwcmVwX3N0YXRlX2ZpZWxkIiwiYWRkIiwiSlNPTiIsInBhcnNlIiwic3RhdGUiLCJnZXRfbGFiZWxfdGV4dCIsImdldF9maWVsZF9wYXJlbnQiLCJ1cGRhdGVfc3RhdGVfb3B0aW9ucyIsInVwZGF0ZV9sb2NhbGVfaW5mbyIsIiRmaWVsZHMiLCJub3QiLCIkcGFyZW50cyIsIiRmaWVsZCIsIiRtYXRjaCIsImNsb3Nlc3QiLCJ2YWxfMSIsInZhbF8yIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRvZ2dsZSIsIiRibG9jayIsIiRsYWJlbCIsIiRjbG9uZSIsImNsb25lIiwicmVtb3ZlIiwidGV4dCIsInRyaW0iLCIkcGFyZW50IiwiJGhvbGRlciIsImFwcGVuZFRvIiwic2hvd19maWVsZHMiLCIkdG9nZ2xlIiwiY2FuY2VsX3RleHQiLCJzaG93IiwicmVtb3ZlQXR0ciIsImhpZGVfZmllbGRzIiwiY2hhbmdlX3RleHQiLCJoaWRlIiwiJHByaW1hcnkiLCIkcHJpbWFyeV9wYXJlbnQiLCIkdG9nZ2xlX3dyYXAiLCJsMTBuIiwicmVwbGFjZSIsIiVzIiwidG9Mb3dlckNhc2UiLCIkYWZ0ZXJfZmllbGQiLCIkYWZ0ZXJfZWwiLCJwYXJlbnQiLCJpcyIsImFmdGVyIiwidXBkYXRlX2xhYmVsIiwiJHJlcXVpcmVkIiwiY291bnRyeV9jb2RlIiwiaW5mbyIsInN0YXRlX3RleHQiLCIkemlwc19wYXJlbnQiLCJ6aXAiLCJvcHRzIiwiSW5zdHJ1Y3RvcnMiLCJ3YWl0X2Zvcl9tYXRjaEhlaWdodCIsIm1hdGNoSGVpZ2h0IiwidHJhbnNsYXRlIiwic3RyaW5nIiwic3RyaW5ncyIsInJlcGxhY2VtZW50cyIsInN0ciIsInRva2VuIiwidmFsdWUiLCJ0b1N0cmluZyIsIkxlc3NvblByZXZpZXciLCIkZWxzIiwiJGxvY2tlZCIsIm1hdGNoX2hlaWdodCIsIiR0aXAiLCJtc2ciLCJnZXRfdG9vbHRpcCIsInNldFRpbWVvdXQiLCJMb29wcyIsIk91dGxpbmVDb2xsYXBzZSIsIiRvdXRsaW5lcyIsIiRvdXRsaW5lIiwiJGhlYWRlcnMiLCIkc2VjdGlvbiIsImdldF9zZWN0aW9uX3N0YXRlIiwib3Blbl9zZWN0aW9uIiwiY2xvc2Vfc2VjdGlvbiIsIiRidG4iLCJhY3Rpb24iLCJvcHBvc2l0ZV9hY3Rpb24iLCJQYXNzd29yZFN0cmVuZ3RoIiwiJG1ldGVyIiwiJHBhc3MiLCIkY29uZiIsIiRmb3JtIiwic2V0dXBfcmVmZXJlbmNlcyIsIndwIiwicGFzc3dvcmRTdHJlbmd0aCIsInN1Ym1pdCIsImNoZWNrX3N0cmVuZ3RoIiwiJHBhc3NfZmllbGQiLCIkY29uZl9maWVsZCIsInBhc3NfbGVuZ3RoIiwiY29uZl9sZW5ndGgiLCJnZXRfY3VycmVudF9zdHJlbmd0aF9zdGF0dXMiLCJnZXRfY3VycmVudF9zdHJlbmd0aCIsImNoZWNrb3V0IiwiY2FsbGJhY2siLCJnZXRfYmxhY2tsaXN0IiwiYmxhY2tsaXN0IiwidXNlcklucHV0QmxhY2tsaXN0IiwiY29uY2F0IiwiZ2V0X3NldHRpbmciLCJwdXNoIiwiZm9ybWF0IiwicGFzcyIsImNvbmYiLCJtZXRlciIsImdldF9zdHJlbmd0aF9zbHVnIiwiZ2V0X3N0cmVuZ3RoX3RleHQiLCJjdXJyIiwibWluIiwiZ2V0X3N0cmVuZ3RoX3ZhbHVlIiwiZ2V0X21pbmltdW1fc3RyZW5ndGgiLCJrZXkiLCJkZWZhdWx0X3ZhbCIsImdldF9zZXR0aW5ncyIsInN0cmVuZ3RoX3ZhbCIsInNsdWdzIiwiLTEiLCIxIiwiMiIsIjMiLCI0IiwiNSIsInRleHRzIiwic3RyZW5ndGhfc2x1ZyIsInZhbHVlcyIsInRvby1zaG9ydCIsInZlcnktd2VhayIsIndlYWsiLCJtZWRpdW0iLCJzdHJvbmciLCJtaXNtYXRjaCIsIm9mZiIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsImZhZGVJbiIsIlByaWNpbmdfVGFibGVzIiwid2FpdF9mb3JfcG9wb3ZlciIsImJpbmRfbG9ja2VkIiwid2VidWlQb3BvdmVyIiwiYW5pbWF0aW9uIiwiY2xvc2VhYmxlIiwiY29udGVudCIsIiRjb250ZW50IiwiJGVsZW1lbnQiLCJwbGFjZW1lbnQiLCJzdHlsZSIsIlJldmlldyIsImNsaWNrIiwialF1ZXJ5IiwicmV2aWV3X3RpdGxlIiwicmV2aWV3X3RleHQiLCJwYWdlSUQiLCJzdWNjZXNzIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJjaGFuZ2UiLCJTcGlubmVyIiwiZ2V0Iiwic2l6ZSIsIiRzcGlubmVyIiwic3RhcnQiLCJzdG9wIiwiZmFjdG9yeSIsInJlZ2lzdGVyZWRJbk1vZHVsZUxvYWRlciIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJPbGRDb29raWVzIiwiQ29va2llcyIsImFwaSIsIm5vQ29uZmxpY3QiLCJyZXN1bHQiLCJhcmd1bWVudHMiLCJhdHRyaWJ1dGVzIiwiZGVjb2RlIiwicyIsImRlY29kZVVSSUNvbXBvbmVudCIsImNvbnZlcnRlciIsInNldCIsImRlZmF1bHRzIiwiZXhwaXJlcyIsIkRhdGUiLCJ0b1VUQ1N0cmluZyIsInN0cmluZ2lmeSIsInRlc3QiLCJ3cml0ZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIlN0cmluZyIsImVzY2FwZSIsInN0cmluZ2lmaWVkQXR0cmlidXRlcyIsImF0dHJpYnV0ZU5hbWUiLCJzcGxpdCIsImNvb2tpZSIsImpzb24iLCJqYXIiLCJjb29raWVzIiwicGFydHMiLCJzbGljZSIsImpvaW4iLCJjaGFyQXQiLCJuYW1lIiwicmVhZCIsImdldEpTT04iLCJ3aXRoQ29udmVydGVyIiwiU3RvcmFnZSIsInN0b3JlIiwiY2xlYXJBbGwiLCJjbGVhciIsImdldEFsbCIsIlN0dWRlbnREYXNoYm9hcmQiLCJzY3JlZW4iLCJnZXRfc2NyZWVuIiwiYmluZF9vcmRlcnMiLCJvcmRlcl9jYW5jZWxfd2FybmluZyIsInNsaWRlVG9nZ2xlIiwiY29uZmlybSIsIlRyYWNraW5nIiwiYWRkRXZlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwib25CZWZvcmVVbmxvYWQiLCJvblVubG9hZCIsIm9uVmlzaWJpbGl0eUNoYW5nZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsImhpZGRlbiIsImFyZ3MiLCJldmVudHMiLCJtYWtlRXZlbnRPYmoiLCJhbGwiLCJnZXRTZXR0aW5ncyIsIk9iamVjdCIsImFzc2lnbiIsImhyZWYiLCJ0aW1lIiwiZ2V0VGltZSIsInRyYWNraW5nIiwiaXNfcGF0aCIsInBhdGhfZXhpc3RzIiwidmFycyIsImhhc2hlcyIsImZ1bmMiLCJpc190b3VjaF9kZXZpY2UiLCJwcmVmaXhlcyIsIm1xIiwicXVlcnkiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsIkRvY3VtZW50VG91Y2giLCJjYiIsImludGVydmFsIiwiY291bnRlciJdLCJtYXBwaW5ncyI6IkFBT0EsR0FBQUEsTUFBQUMsT0FBQUQsVUFDQSxTQUFBRSxHQUVBLFlDREFGLE1BQUFHLGNBU0FDLEtBQUEsV0FFQSxHQUFBQyxHQUFBQyxJQUVBSixHQUFBLHNCQUNBQSxFQUFBSyxVQUFBQyxHQUFBLFFBQUEsV0FDQUgsRUFBQUksT0FDQUosRUFBQUssZ0JBYUFELEtBQUEsV0FFQSxHQUFBSixHQUFBQyxJQUVBSixHQUFBLHFCQUFBUyxLQUFBLFdBRUFOLEVBQUFPLGFBQUFWLEVBQUFJLFNBSUFKLEVBQUEscUJBQUFNLEdBQUEsUUFBQSxXQUVBLEdBQUFLLEdBQUFYLEVBQUFJLE1BQ0FRLEVBQUEsZUFBQUQsRUFBQUUsS0FBQSxXQUNBQyxFQUFBZCxFQUFBLElBQUFZLEVBRUFFLEdBQUFDLFFBQ0FaLEVBQUFPLGFBQUFDLEdBR0FHLEVBQUFFLFNBQUEsV0FjQU4sYUFBQSxTQUFBTyxHQUVBLEdBQUFMLEdBQUEsZUFBQUssRUFBQUosS0FBQSxXQUNBQyxFQUFBZCxFQUFBLElBQUFZLEVBRUFFLEdBQUFDLFNBQ0FELEVBQUFkLEVBQUEsMkNBQUFZLEVBQUEsUUFDQVosRUFBQSxRQUFBa0IsT0FBQUosSUFHQUEsRUFBQUUsVUFDQUcsWUFBQSxVQUNBQyxNQUFBLGVBQ0FDLFNBQUEsRUFDQUMsTUFBQSxFQUNBQyxhQUFBLHVCQUNBQyxhQUFBLGFBQ0FDLGNBQUEsY0FDQUMsTUFBQSxJQUNBQyxVQUFBLFNBQUFDLEdBRUFBLEVBQUFDLFNBQUFaLEVBQUFhLEtBQUEsMkJBQUFDLFFBQ0FILEVBQUFJLFlBQUFmLEVBQUFhLEtBQUEs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LEdBQUEyUyxHQUFBLElBRUF0RyxRQUFBQyxJQUFBLGlDQUdBLENBR0EsSUFBQW1DLElBUUEsTUFGQXBDLFNBQUFDLElBQUEsa0JBQ0FxRyxJQUxBRixLQVlBalMsY0FBQWtTLElBRUEsTUFJQWpZLEtBQUFJLEtBQUFGLElBRUFxUiIsImZpbGUiOiJsbG1zLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKlxuICogQ29udHJpYnV0b3IncyBOb3RpY2VcbiAqIFxuICogVGhpcyBpcyBhIGNvbXBpbGVkIGZpbGUgYW5kIHNob3VsZCBub3QgYmUgZWRpdGVkIGRpcmVjdGx5IVxuICogVGhlIHVuY29tcGlsZWQgc2NyaXB0IGlzIGxvY2F0ZWQgaW4gdGhlIFwiYXNzZXRzL3ByaXZhdGVcIiBkaXJlY3RvcnlcbiAqIFxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogTWFpbiBMTE1TIE5hbWVzcGFjZVxuICpcbiAqIEB0eXBlICAgICB7T2JqZWN0fVxuICogQHNpbmNlICAgIDEuMC4wXG4gKiBAdmVyc2lvbiAgMy4yNC4zXG4gKi9cbnZhciBMTE1TID0gd2luZG93LkxMTVMgfHwge307XG4oZnVuY3Rpb24oJCl7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdC8qKlxuXHQgKiBsb2FkIGFsbCBhcHAgbW9kdWxlc1xuXHQgKi9cblx0LyoqXG5cdCAqIEZyb250IEVuZCBBY2hpZXZlbWVudHNcblx0ICpcblx0ICogQHBhY2thZ2UgTGlmdGVyTE1TL1NjcmlwdHNcblx0ICpcblx0ICogQHNpbmNlICAgIDMuMTQuMFxuXHQgKiBAdmVyc2lvbiAgMy4xNC4wXG5cdCAqL1xuXHRcblx0TExNUy5BY2hpZXZlbWVudHMgPSB7XG5cdFxuXHRcdC8qKlxuXHRcdCAqIEluaXRcblx0XHQgKlxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTQuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE0LjBcblx0XHQgKi9cblx0XHRpbml0OiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFxuXHRcdFx0aWYgKCAkKCAnLmxsbXMtYWNoaWV2ZW1lbnQnICkgKSB7XG5cdFx0XHRcdCQoIGRvY3VtZW50ICkub24oICdyZWFkeScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbGYuYmluZCgpO1xuXHRcdFx0XHRcdHNlbGYubWF5YmVfb3BlbigpO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFxuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgRE9NIGV2ZW50c1xuXHRcdCAqXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4xNC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTQuMFxuXHRcdCAqL1xuXHRcdGJpbmQ6IGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XG5cdFx0XHQkKCAnLmxsbXMtYWNoaWV2ZW1lbnQnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHRzZWxmLmNyZWF0ZV9tb2RhbCggJCggdGhpcyApICk7XG5cdFxuXHRcdFx0fSApO1xuXHRcblx0XHRcdCQoICcubGxtcy1hY2hpZXZlbWVudCcgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHR2YXIgJHRoaXMgID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdGlkICAgICA9ICdhY2hpZXZlbWVudC0nICsgJHRoaXMuYXR0ciggJ2RhdGEtaWQnICksXG5cdFx0XHRcdFx0JG1vZGFsID0gJCggJyMnICsgaWQgKTtcblx0XG5cdFx0XHRcdGlmICggISAkbW9kYWwubGVuZ3RoICkge1xuXHRcdFx0XHRcdHNlbGYuY3JlYXRlX21vZGFsKCAkdGhpcyApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQkbW9kYWwuaXppTW9kYWwoICdvcGVuJyApO1xuXHRcblx0XHRcdH0gKTtcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogQ3JlYXRlcyBtb2RhbCBhIG1vZGFsIGZvciBhbiBhY2hpZXZlbWVudFxuXHRcdCAqXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICRlbCAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgbW9kYWwgY2FyZFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTQuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE0LjBcblx0XHQgKi9cblx0XHRjcmVhdGVfbW9kYWw6IGZ1bmN0aW9uKCAkZWwgKSB7XG5cdFxuXHRcdFx0dmFyIGlkICAgICA9ICdhY2hpZXZlbWVudC0nICsgJGVsLmF0dHIoICdkYXRhLWlkJyApLFxuXHRcdFx0XHQkbW9kYWwgPSAkKCAnIycgKyBpZCApO1xuXHRcblx0XHRcdGlmICggISAkbW9kYWwubGVuZ3RoICkge1xuXHRcdFx0XHQkbW9kYWwgPSAkKCAnPGRpdiBjbGFzcz1cImxsbXMtYWNoaWV2ZW1lbnQtbW9kYWxcIiBpZD1cIicgKyBpZCArICdcIiAvPicgKTtcblx0XHRcdFx0JCggJ2JvZHknICkuYXBwZW5kKCAkbW9kYWwgKTtcblx0XHRcdH1cblx0XG5cdFx0XHQkbW9kYWwuaXppTW9kYWwoIHtcblx0XHRcdFx0aGVhZGVyQ29sb3I6ICcjM2EzYTNhJyxcblx0XHRcdFx0Z3JvdXA6ICdhY2hpZXZlbWVudHMnLFxuXHRcdFx0XHRoaXN0b3J5OiB0cnVlLFxuXHRcdFx0XHRsb29wOiB0cnVlLFxuXHRcdFx0XHRvdmVybGF5Q29sb3I6ICdyZ2JhKCAwLCAwLCAwLCAwLjYgKScsXG5cdFx0XHRcdHRyYW5zaXRpb25JbjogJ2ZhZGVJbkRvd24nLFxuXHRcdFx0XHR0cmFuc2l0aW9uT3V0OiAnZmFkZU91dERvd24nLFxuXHRcdFx0XHR3aWR0aDogMzQwLFxuXHRcdFx0XHRvbk9wZW5pbmc6IGZ1bmN0aW9uKCBtb2RhbCApIHtcblx0XG5cdFx0XHRcdFx0bW9kYWwuc2V0VGl0bGUoICRlbC5maW5kKCAnLmxsbXMtYWNoaWV2ZW1lbnQtdGl0bGUnICkuaHRtbCgpICk7XG5cdFx0XHRcdFx0bW9kYWwuc2V0U3VidGl0bGUoICRlbC5maW5kKCAnLmxsbXMtYWNoaWV2ZW1lbnQtZGF0ZScgKS5odG1sKCkgKTtcblx0XHRcdFx0XHRtb2RhbC5zZXRDb250ZW50KCAnPGRpdiBjbGFzcz1cImxsbXMtYWNoaWV2ZW1lbnRcIj4nICsgJGVsLmh0bWwoKSArICc8L2Rpdj4nICk7XG5cdFxuXHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0b25DbG9zaW5nOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoICcnLCBkb2N1bWVudC50aXRsZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCApO1xuXHRcdFx0XHR9LFxuXHRcblx0XHRcdH0gKTtcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogT24gcGFnZSBsb2FkLCBvcGVucyBhIG1vZGFsIGlmIHRoZSBVUkwgY29udGFpbnMgYW4gYWNoaWV2ZW1lbnQgaW4gdGhlIGxvY2F0aW9uIGhhc2hcblx0XHQgKlxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTQuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE0LjBcblx0XHQgKi9cblx0XHRtYXliZV9vcGVuOiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHR2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuXHRcdFx0aWYgKCBoYXNoICYmIC0xICE9PSBoYXNoLmluZGV4T2YoICdhY2hpZXZlbWVudC0nICkgKSB7XG5cdFx0XHRcdCQoICdhW2hyZWY9XCInICsgaGFzaCArICdcIl0nICkuZmlyc3QoKS50cmlnZ2VyKCAnY2xpY2snICk7XG5cdFx0XHR9XG5cdFxuXHRcdH1cblx0XG5cdH07XG5cdFxuXHRcdC8qKlxuXHQgKiBNYWluIEFqYXggY2xhc3Ncblx0ICogSGFuZGxlcyBQcmltYXJ5IEFqYXggY29ubmVjdGlvblxuXHQgKlxuXHQgKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuXHQgKlxuXHQgKiBAc2luY2UgVW5rbm93blxuXHQgKiBAdmVyc2lvbiBVbmtub3duXG5cdCAqL1xuXHRcblx0TExNUy5BamF4ID0ge1xuXHRcblx0XHQvKipcblx0XHQgKiBVcmxcblx0XHQgKlxuXHRcdCAqIEB0eXBlIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0dXJsOiB3aW5kb3cuYWpheHVybCB8fCB3aW5kb3cubGxtcy5hamF4dXJsLFxuXHRcblx0XHQvKipcblx0XHQgKiBUeXBlXG5cdFx0ICpcblx0XHQgKiBAdHlwZSB7W3R5cGVdfVxuXHRcdCAqL1xuXHRcdHR5cGU6ICdwb3N0Jyxcblx0XG5cdFx0LyoqXG5cdFx0ICogRGF0YVxuXHRcdCAqXG5cdFx0ICogQHR5cGUge1t0eXBlXX1cblx0XHQgKi9cblx0XHRkYXRhOiBbXSxcblx0XG5cdFx0LyoqXG5cdFx0ICogQ2FjaGVcblx0XHQgKlxuXHRcdCAqIEB0eXBlIHtbdHlwZV19XG5cdFx0ICovXG5cdFx0Y2FjaGU6IGZhbHNlLFxuXHRcblx0XHQvKipcblx0XHQgKiBEYXRhVHlwZVxuXHRcdCAqIGRlZmF1bHRlZCB0byBqc29uXG5cdFx0ICpcblx0XHQgKiBAdHlwZSB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGRhdGFUeXBlOiAnanNvbicsXG5cdFxuXHRcdC8qKlxuXHRcdCAqIEFzeW5jXG5cdFx0ICogZGVmYXVsdCB0byBmYWxzZVxuXHRcdCAqXG5cdFx0ICogQHR5cGUge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0YXN5bmM6IHRydWUsXG5cdFxuXHRcdHJlc3BvbnNlOltdLFxuXHRcblx0XHQvKipcblx0XHQgKiBJbml0aWFsaXplIEFqYXggbWV0aG9kc1xuXHRcdCAqIGxvYWRzIGNsYXNzIG1ldGhvZHNcblx0XHQgKi9cblx0XHRpbml0OiBmdW5jdGlvbihvYmopIHtcblx0XG5cdFx0XHQvLyBpZiBvYmogaXMgbm90IG9mIHR5cGUgb2JqZWN0IG9yIG51bGwgcmV0dXJuIGZhbHNlO1xuXHRcdFx0aWYgKCBvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBzZXQgb2JqZWN0IGRlZmF1bHRzIGlmIHZhbHVlcyBhcmUgbm90IHN1cHBsaWVkXG5cdFx0XHRvYmoudXJsICAgICAgPSAndXJsJyAgICAgICAgIGluIG9iaiA/IG9iai51cmwgOiB0aGlzLnVybDtcblx0XHRcdG9iai50eXBlICAgICA9ICd0eXBlJyBcdFx0aW4gb2JqID8gb2JqLnR5cGUgOiB0aGlzLnR5cGU7XG5cdFx0XHRvYmouZGF0YSAgICAgPSAnZGF0YScgXHRcdGluIG9iaiA/IG9iai5kYXRhIDogdGhpcy5kYXRhO1xuXHRcdFx0b2JqLmNhY2hlICAgID0gJ2NhY2hlJyBcdFx0aW4gb2JqID8gb2JqLmNhY2hlIDogdGhpcy5jYWNoZTtcblx0XHRcdG9iai5kYXRhVHlwZSA9ICdkYXRhVHlwZSdcdGluIG9iaiA/IG9iai5kYXRhVHlwZSA6IHRoaXMuZGF0YVR5cGU7XG5cdFx0XHRvYmouYXN5bmMgICAgPSAnYXN5bmMnXHRcdGluIG9iaiA/IG9iai5hc3luYyA6IHRoaXMuYXN5bmM7XG5cdFxuXHRcdFx0Ly8gYWRkIG5vbmNlIHRvIGRhdGEgb2JqZWN0XG5cdFx0XHRvYmouZGF0YS5fYWpheF9ub25jZSA9IHdwX2FqYXhfZGF0YS5ub25jZTtcblx0XG5cdFx0XHQvLyBhZGQgcG9zdCBpZCB0byBkYXRhIG9iamVjdFxuXHRcdFx0dmFyICRSICAgICAgICAgICA9IExMTVMuUmVzdCxcblx0XHRcdHF1ZXJ5X3ZhcnMgICAgICAgPSAkUi5nZXRfcXVlcnlfdmFycygpO1xuXHRcdFx0b2JqLmRhdGEucG9zdF9pZCA9ICdwb3N0JyBpbiBxdWVyeV92YXJzID8gcXVlcnlfdmFycy5wb3N0IDogbnVsbDtcblx0XHRcdGlmICggISBvYmouZGF0YS5wb3N0X2lkICYmICQoICdpbnB1dCNwb3N0X0lEJyApLmxlbmd0aCApIHtcblx0XHRcdFx0b2JqLmRhdGEucG9zdF9pZCA9ICQoICdpbnB1dCNwb3N0X0lEJyApLnZhbCgpO1xuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBvYmo7XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogQ2FsbFxuXHRcdCAqIENhbGxlZCBieSBleHRlcm5hbCBjbGFzc2VzXG5cdFx0ICogU2V0cyB1cCBqUXVlcnkgQWpheCBvYmplY3Rcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAge1tvYmplY3RdfSBbb2JqZWN0IG9mIGFqYXggc2V0dGluZ3NdXG5cdFx0ICogQHJldHVybiB7W21peGVkXX0gW2ZhbHNlIGlmIG5vdCBvYmplY3Qgb3IgdGhpc11cblx0XHQgKi9cblx0XHRjYWxsOiBmdW5jdGlvbihvYmopIHtcblx0XG5cdFx0XHQvLyBnZXQgZGVmYXVsdCB2YXJpYWJsZXMgaWYgbm90IGluY2x1ZGVkIGluIGNhbGxcblx0XHRcdHZhciBzZXR0aW5ncyA9IHRoaXMuaW5pdCggb2JqICk7XG5cdFxuXHRcdFx0Ly8gaWYgaW5pdCByZXR1cm4gYSByZXNwb25zZSBvZiBmYWxzZVxuXHRcdFx0aWYgKCAhIHNldHRpbmdzKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucmVxdWVzdCggc2V0dGluZ3MgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogQ2FsbHMgalF1ZXJ5IEFqYXggb24gc2V0dGluZ3Mgb2JqZWN0XG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHtbb2JqZWN0XX0gW3RoaXNdXG5cdFx0ICovXG5cdFx0cmVxdWVzdDogZnVuY3Rpb24oc2V0dGluZ3MpIHtcblx0XG5cdFx0XHQkLmFqYXgoIHNldHRpbmdzICk7XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFxuXHRcdH1cblx0XG5cdH07XG5cdFxuXHRcdC8qKlxuXHQgKiBDcmVhdGUgYSBEb251dCBDaGFydFxuXHQgKlxuXHQgKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuXHQgKlxuXHQgKiBAc2luY2UgICAgMy45LjBcblx0ICogQHZlcnNpb24gIDMuOS4wXG5cdCAqXG5cdCAqIEBsaW5rICBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qb2V5aW5ib3gvODIwNTk2MlxuXHQgKlxuXHQgKiBAcGFyYW0gICAgb2JqICAgJGVsICBqUXVlcnkgZWxlbWVudCB0byBkcmF3IGEgY2hhcnQgd2l0aGluXG5cdCAqL1xuXHRcblx0TExNUy5Eb251dCA9IGZ1bmN0aW9uKCAkZWwgKSB7XG5cdFxuXHRcdGZ1bmN0aW9uIERvbnV0KG9wdGlvbnMpIHtcblx0XG5cdFx0XHR0aGlzLnNldHRpbmdzID0gJC5leHRlbmQoIHtcblx0XHRcdFx0ZWxlbWVudDogb3B0aW9ucy5lbGVtZW50LFxuXHRcdFx0XHRwZXJjZW50OiAxMDBcblx0XHRcdH0sIG9wdGlvbnMgKTtcblx0XG5cdFx0XHR0aGlzLmNpcmNsZSAgICAgICAgICAgICAgICA9IHRoaXMuc2V0dGluZ3MuZWxlbWVudC5maW5kKCAncGF0aCcgKTtcblx0XHRcdHRoaXMuc2V0dGluZ3Muc3Ryb2tlX3dpZHRoID0gcGFyc2VJbnQoIHRoaXMuY2lyY2xlLmNzcyggJ3N0cm9rZS13aWR0aCcgKSApO1xuXHRcdFx0dGhpcy5yYWRpdXMgICAgICAgICAgICAgICAgPSAoIHBhcnNlSW50KCB0aGlzLnNldHRpbmdzLmVsZW1lbnQuY3NzKCAnd2lkdGgnICkgKSAtIHRoaXMuc2V0dGluZ3Muc3Ryb2tlX3dpZHRoICkgLyAyO1xuXHRcdFx0dGhpcy5hbmdsZSAgICAgICAgICAgICAgICAgPSAtOTcuNTsgLy8gT3JpZ2luIG9mIHRoZSBkcmF3IGF0IHRoZSB0b3Agb2YgdGhlIGNpcmNsZVxuXHRcdFx0dGhpcy5pICAgICAgICAgICAgICAgICAgICAgPSBNYXRoLnJvdW5kKCAwLjc1ICogdGhpcy5zZXR0aW5ncy5wZXJjZW50ICk7XG5cdFx0XHR0aGlzLmZpcnN0ICAgICAgICAgICAgICAgICA9IHRydWU7XG5cdFxuXHRcdFx0dGhpcy5hbmltYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCggdGhpcy5sb29wLmJpbmQoIHRoaXMgKSwgMTAgKTtcblx0XHRcdH07XG5cdFxuXHRcdFx0dGhpcy5sb29wID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMuYW5nbGUgKz0gNTtcblx0XHRcdFx0dGhpcy5hbmdsZSAlPSAzNjA7XG5cdFx0XHRcdHZhciByYWRpYW5zID0gKCB0aGlzLmFuZ2xlIC8gMTgwICkgKiBNYXRoLlBJLFxuXHRcdFx0XHRcdHggICAgICAgPSB0aGlzLnJhZGl1cyArIHRoaXMuc2V0dGluZ3Muc3Ryb2tlX3dpZHRoIC8gMiArIE1hdGguY29zKCByYWRpYW5zICkgKiB0aGlzLnJhZGl1cyxcblx0XHRcdFx0XHR5ICAgICAgID0gdGhpcy5yYWRpdXMgKyB0aGlzLnNldHRpbmdzLnN0cm9rZV93aWR0aCAvIDIgKyBNYXRoLnNpbiggcmFkaWFucyApICogdGhpcy5yYWRpdXMsXG5cdFx0XHRcdFx0ZDtcblx0XHRcdFx0aWYgKHRoaXMuZmlyc3QgPT09IHRydWUpIHtcblx0XHRcdFx0XHRkICAgICAgICAgID0gdGhpcy5jaXJjbGUuYXR0ciggJ2QnICkgKyAnIE0gJyArIHggKyAnICcgKyB5O1xuXHRcdFx0XHRcdHRoaXMuZmlyc3QgPSBmYWxzZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkID0gdGhpcy5jaXJjbGUuYXR0ciggJ2QnICkgKyAnIEwgJyArIHggKyAnICcgKyB5O1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuY2lyY2xlLmF0dHIoICdkJywgZCApO1xuXHRcdFx0XHR0aGlzLmktLTtcblx0XG5cdFx0XHRcdGlmICh0aGlzLmkgPD0gMCkge1xuXHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoIHRoaXMudGltZXIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdFxuXHRcdGZ1bmN0aW9uIGRyYXcoICRlbCApIHtcblx0XHRcdHZhciBwYXRoID0gJzxwYXRoIGQ9XCJNMTAwLDEwMFwiIC8+Jztcblx0XHRcdCRlbC5hcHBlbmQoICc8c3ZnIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWlkWU1pZFwiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPicgKyBwYXRoICsgJzwvc3ZnPicgKTtcblx0XHRcdHZhciBkb251dCA9IG5ldyBEb251dCgge1xuXHRcdFx0XHRlbGVtZW50OiAkZWwsXG5cdFx0XHRcdHBlcmNlbnQ6ICRlbC5hdHRyKCAnZGF0YS1wZXJjJyApXG5cdFx0XHR9ICk7XG5cdFx0XHRkb251dC5hbmltYXRlKCk7XG5cdFx0fVxuXHRcblx0XHRkcmF3KCAkZWwgKTtcblx0XG5cdH07XG5cdFxuXHRcdC8qKlxuXHQgKiBGb3Jtc1xuXHQgKlxuXHQgKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuXHQgKlxuXHQgKiBAc2luY2UgW3ZlcnNpb25dXG5cdCAqIEB2ZXJzaW9uIFt2ZXJzaW9uXVxuXHQgKi9cblx0XG5cdExMTVMuRm9ybXMgPSB7XG5cdFxuXHRcdC8qKlxuXHRcdCAqIFN0b3JlcyBsb2NhbGUgaW5mb3JtYXRpb24uXG5cdFx0ICpcblx0XHQgKiBBZGRlZCB2aWEgUEhQLlxuXHRcdCAqXG5cdFx0ICogQHR5cGUge09iamVjdH1cblx0XHQgKi9cblx0XHRsb2NhbGU6IHt9LFxuXHRcblx0XHQvKipcblx0XHQgKiBTdG9yZXMgcmVmZXJlbmNlcyB0byB0aGUgZGVmYXVsdCBsb2NhbGUgc3RyaW5nc1xuXHRcdCAqIGFzIGNvbmZpZ3VyZWQgYnkgdXNlcnMgaW4gdGhlIGZvcm0gZWRpdG9yLlxuXHRcdCAqXG5cdFx0ICogQHR5cGUge09iamVjdH1cblx0XHQgKi9cblx0XHRsb2NhbGVfZGVmYXVsdHM6IHt9LFxuXHRcblx0XHQvKipcblx0XHQgKiBqUXVlcnkgcmVmLiB0byB0aGUgY291bnRyaWVzIHNlbGVjdCBmaWVsZC4uXG5cdFx0ICpcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdCRjb3VudHJpZXM6IG51bGwsXG5cdFxuXHRcdC8qKlxuXHRcdCAqIGpRdWVyeSByZWYuIHRvIHRoZSBzdGF0ZXMgc2VsZWN0IGZpZWxkLlxuXHRcdCAqXG5cdFx0ICogQHR5cGUge09iamVjdH1cblx0XHQgKi9cblx0XHQkc3RhdGVzOiBudWxsLFxuXHRcblx0XHQvKipcblx0XHQgKiBqUXVlcnkgcmVmLiB0byB0aGUgaGlkZGVuIHN0YXRlcyBob2xkZXIgZmllbGQuXG5cdFx0ICpcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdCRzdGF0ZXNfaG9sZGVyOiBudWxsLFxuXHRcblx0XHQvKipcblx0XHQgKiBJbml0XG5cdFx0ICpcblx0IFx0ICogQHNpbmNlIFt2ZXJzaW9uXVxuXHQgXHQgKlxuXHQgXHQgKiBAcmV0dXJuIHt2b2lkfVxuXHRcdCAqL1xuXHRcdGluaXQ6IGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdGlmICggJCggJ2JvZHknICkuaGFzQ2xhc3MoICd3cC1hZG1pbicgKSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XG5cdFx0XHRzZWxmLmJpbmRfbWF0Y2hpbmdfZmllbGRzKCk7XG5cdFx0XHRzZWxmLmJpbmRfdm91Y2hlcl9maWVsZCgpO1xuXHRcdFx0c2VsZi5iaW5kX2VkaXRfYWNjb3VudCgpO1xuXHRcblx0XHRcdExMTVMud2FpdF9mb3IoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gKCB1bmRlZmluZWQgIT09ICQuZm4ubGxtc1NlbGVjdDIgKTtcblx0XHRcdH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmJpbmRfbDEwbl9zZWxlY3RzKCk7XG5cdFx0XHR9ICk7XG5cdFxuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgRE9NIGV2ZW50cyBmb3IgdGhlIGVkaXQgYWNjb3VudCBzY3JlZW4uXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgW3ZlcnNpb25dXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHt2b2lkfVxuXHRcdCAqL1xuXHRcdGJpbmRfZWRpdF9hY2NvdW50OiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHQvLyBOb3QgYW4gZWRpdCBhY2NvdW50IGZvcm0uXG5cdFx0XHRpZiAoICEgJCggJ2Zvcm0ubGxtcy1wZXJzb24tZm9ybS5lZGl0LWFjY291bnQnICkubGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0dGhpcy5zZXR1cF90b2dnbGVfZmllbGQoICQoICcjZW1haWxfYWRkcmVzcywgI2VtYWlsX2FkZHJlc3NfY29uZmlybScgKSApO1xuXHRcdFx0dGhpcy5zZXR1cF90b2dnbGVfZmllbGQoICQoICcjcGFzc3dvcmQsICNwYXNzd29yZF9jb25maXJtLCAjcGFzc3dvcmRfY3VycmVudCwgI2xsbXMtcGFzc3dvcmQtc3RyZW5ndGgtbWV0ZXInICkgKTtcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogQmluZCBET00gRXZlbnRzIGZpZWxkcyB3aXRoIGR5bmFtaWMgbG9jYWxpemF0aW9uIHZhbHVlcyBhbmQgbGFuZ3VhZ2UuXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgW3ZlcnNpb25dXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHt2b2lkfVxuXHRcdCAqL1xuXHRcdGJpbmRfbDEwbl9zZWxlY3RzOiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFxuXHRcdFx0c2VsZi4kY291bnRyaWVzID0gJCggJy5sbG1zLWwxMG4tY291bnRyeS1zZWxlY3Qgc2VsZWN0JyApO1xuXHRcdFx0c2VsZi4kc3RhdGVzICAgID0gJCggJy5sbG1zLWwxMG4tc3RhdGUtc2VsZWN0IHNlbGVjdCcgKTtcblx0XHRcdHNlbGYuJHppcHMgICAgICA9ICQoICcjbGxtc19iaWxsaW5nX3ppcCcgKTtcblx0XG5cdFx0XHRpZiAoICEgc2VsZi4kY291bnRyaWVzLmxlbmd0aCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggc2VsZi4kc3RhdGVzLmxlbmd0aCApIHtcblx0XHRcdFx0c2VsZi5wcmVwX3N0YXRlX2ZpZWxkKCk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0c2VsZi4kY291bnRyaWVzLmFkZCggc2VsZi4kc3RhdGVzICkubGxtc1NlbGVjdDIoIHsgd2lkdGg6ICcxMDAlJyB9ICk7XG5cdFxuXHRcdFx0aWYgKCB3aW5kb3cubGxtcy5sb2NhbGUgKSB7XG5cdFx0XHRcdHNlbGYubG9jYWxlID0gSlNPTi5wYXJzZSggd2luZG93LmxsbXMubG9jYWxlICk7XG5cdFx0XHRcdHNlbGYubG9jYWxlX2RlZmF1bHRzID0ge1xuXHRcdFx0XHRcdHN0YXRlOiAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHNlbGYuZ2V0X2xhYmVsX3RleHQoIHNlbGYuZ2V0X2ZpZWxkX3BhcmVudCggc2VsZi4kc3RhdGVzICkuZmluZCggJ2xhYmVsJyApICk7XG5cdFx0XHRcdFx0fSApKCksXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFxuXHRcdFx0c2VsZi4kY291bnRyaWVzLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHR2YXIgdmFsID0gJCggdGhpcyApLnZhbCgpO1xuXHRcdFx0XHRzZWxmLnVwZGF0ZV9zdGF0ZV9vcHRpb25zKCB2YWwgKTtcblx0XHRcdFx0c2VsZi51cGRhdGVfbG9jYWxlX2luZm8oIHZhbCApO1xuXHRcblx0XHRcdH0gKS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHRcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBFbnN1cmUgXCJtYXRjaGluZ1wiIGZpZWxkcyBtYXRjaC5cblx0XHQgKlxuXHRcdCAqIEBzaW5jZSBbdmVyc2lvbl1cblx0XHQgKlxuXHRcdCAqIEByZXR1cm4ge1ZvaWR9XG5cdFx0ICovXG5cdFx0YmluZF9tYXRjaGluZ19maWVsZHM6IGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdHZhciAkZmllbGRzID0gJCggJ2lucHV0W2RhdGEtbWF0Y2hdJyApLm5vdCggJ1t0eXBlPVwicGFzc3dvcmRcIl0nICk7XG5cdFxuXHRcdFx0JGZpZWxkcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdHZhciAkZmllbGQgPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0JG1hdGNoID0gJCggJyMnICsgJGZpZWxkLmF0dHIoICdkYXRhLW1hdGNoJyApICksXG5cdFx0XHRcdFx0JHBhcmVudHM7XG5cdFxuXHRcdFx0XHRpZiAoICRtYXRjaC5sZW5ndGggKSB7XG5cdFxuXHRcdFx0XHRcdCRwYXJlbnRzID0gJGZpZWxkLmNsb3Nlc3QoICcubGxtcy1mb3JtLWZpZWxkJyApLmFkZCggJG1hdGNoLmNsb3Nlc3QoICcubGxtcy1mb3JtLWZpZWxkJyApICk7XG5cdFxuXHRcdFx0XHRcdCRmaWVsZC5vbiggJ2lucHV0IGNoYW5nZScsIGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdFx0XHRcdHZhciB2YWxfMSA9ICRmaWVsZC52YWwoKSxcblx0XHRcdFx0XHRcdFx0dmFsXzIgPSAkbWF0Y2gudmFsKCk7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKCB2YWxfMSAmJiB2YWxfMiAmJiB2YWxfMSAhPT0gdmFsXzIgKSB7XG5cdFx0XHRcdFx0XHRcdCRwYXJlbnRzLmFkZENsYXNzKCAnaW52YWxpZCcgKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRwYXJlbnRzLnJlbW92ZUNsYXNzKCAnaW52YWxpZCcgKTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0fSApO1xuXHRcblx0XHRcdFx0fVxuXHRcblx0XHRcdH0gKTtcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogQmluZCBET00gZXZlbnRzIGZvciB2b3VjaGVyIHRvZ2dsZXMgVVguXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgW3ZlcnNpb25dXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHt2b2lkfVxuXHRcdCAqL1xuXHRcdGJpbmRfdm91Y2hlcl9maWVsZDogZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0JCggJyNsbG1zLXZvdWNoZXItdG9nZ2xlJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHQkKCAnI2xsbXNfdm91Y2hlcicgKS50b2dnbGUoKTtcblx0XHRcdH0gKTtcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogUmV0cmlldmUgdGhlIHBhcmVudCBlbGVtZW50IGZvciBhIGdpdmVuIGZpZWxkLlxuXHRcdCAqXG5cdFx0ICogVGhlIHBhcmVudCBlbGVtZW50IGlzIGhpZGRlbiB3aGVuIHRoZSBmaWVsZCBpc24ndCByZXF1aXJlZC5cblx0XHQgKiBMb29rcyBmb3IgYSBXUCBjb2x1bW4gd3JhcHBlciBhbmQgZmFsbHMgYmFjayB0byB0aGUgZmllbGQnc1xuXHRcdCAqIHdyYXBwZXIgZGl2LlxuXHRcdCAqXG5cdFx0ICogQHNpbmNlIFt2ZXJzaW9uXVxuXHRcdCAqXG5cdFx0ICogQHNlZSB7UmVmZXJlbmNlfVxuXHRcdCAqIEBsaW5rIHtVUkx9XG5cdFx0ICpcblx0XHQgKiBAcGFyYW0ge1t0eXBlXX0gJGZpZWxkXG5cdFx0ICogQHJldHVybiB7W3R5cGVdfVxuXHRcdCAqL1xuXHRcdGdldF9maWVsZF9wYXJlbnQ6IGZ1bmN0aW9uKCAkZmllbGQgKSB7XG5cdFxuXHRcdFx0dmFyICRibG9jayA9ICRmaWVsZC5jbG9zZXN0KCAnLndwLWJsb2NrLWNvbHVtbicgKTtcblx0XHRcdGlmICggJGJsb2NrLmxlbmd0aCApIHtcblx0XHRcdFx0cmV0dXJuICRibG9jaztcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gJGZpZWxkLmNsb3Nlc3QoICcubGxtcy1mb3JtLWZpZWxkJyApO1xuXHRcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBSZXRyaWV2ZSB0aGUgdGV4dCBvZiBhIGxhYmVsXG5cdFx0ICpcblx0XHQgKiBSZW1vdmVzIGFuIGNoaWxkcmVuIEhUTUwgZWxlbWVudHMgKGVnOiByZXF1aXJlZCBzcGFuIGVsZW1lZW50cykgYW5kIHJldHVybnMgb25seSB0aGUgbGFiZWxzIHRleHQuXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgW3ZlcnNpb25dXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gJGxhYmVsIGpRdWVyeSBvYmplY3QgZm9yIGEgbGFiZWwgZWxlbWVudC5cblx0XHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0Z2V0X2xhYmVsX3RleHQ6IGZ1bmN0aW9uKCAkbGFiZWwgKSB7XG5cdFxuXHRcdFx0dmFyICRjbG9uZSA9ICRsYWJlbC5jbG9uZSgpO1xuXHRcdFx0JGNsb25lLmZpbmQoICcqJyApLnJlbW92ZSgpO1xuXHRcdFx0cmV0dXJuICRjbG9uZS50ZXh0KCkudHJpbSgpO1xuXHRcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBQcmVwYXJlcyB0aGUgc3RhdGUgc2VsZWN0IGZpZWxkLlxuXHRcdCAqXG5cdFx0ICogTW92ZXMgQWxsIG9wdGdyb3VwIGVsZW1lbnRzIGludG8gYSBoaWRkZW4gJiBkaXNhYmxlZCBzZWxlY3QgZWxlbWVudC5cblx0XHQgKlxuXHRcdCAqIEBzaW5jZSBbdmVyc2lvbl1cblx0XHQgKlxuXHRcdCAqIEByZXR1cm4ge3ZvaWR9XG5cdFx0ICovXG5cdFx0cHJlcF9zdGF0ZV9maWVsZDogZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0dmFyICRwYXJlbnQgPSB0aGlzLiRzdGF0ZXMuY2xvc2VzdCggJy5sbG1zLWZvcm0tZmllbGQnICk7XG5cdFxuXHRcdFx0dGhpcy4kaG9sZGVyID0gJCggJzxzZWxlY3QgZGlzYWJsZWQgc3R5bGU9XCJkaXNwbGF5Om5vbmUgIWltcG9ydGFudDtcIiAvPicgKTtcblx0XG5cdFx0XHR0aGlzLiRob2xkZXIuYXBwZW5kVG8oICRwYXJlbnQgKTtcblx0XHRcdHRoaXMuJHN0YXRlcy5maW5kKCAnb3B0Z3JvdXAnICkuYXBwZW5kVG8oIHRoaXMuJGhvbGRlciApO1xuXHRcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBTZXR1cCBhIHNldCBvZiBmaWVsZHMgdGhhdCBjYW4gYmUgdG9nZ2xlZCB0byBlZGl0LlxuXHRcdCAqXG5cdFx0ICogVXNlZCBvbiB0aGUgYWNjb3VudCBlZGl0IHNjcmVlbiB0byBhbGxvdyBvcHRpb25hbGx5IHVwZGF0aW5nIHVzZXIgZW1haWwgYW5kIHBhc3N3b3Jkcy5cblx0XHQgKlxuXHRcdCAqIEBzaW5jZSBbdmVyc2lvbl1cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0W119ICRmaWVsZHMgQXJyYXkgb2YgalF1ZXJ5IGRvbSBvYmplY3RzLlxuXHRcdCAqIEByZXR1cm4ge3ZvaWR9XG5cdFx0ICovXG5cdFx0c2V0dXBfdG9nZ2xlX2ZpZWxkOiBmdW5jdGlvbiggJGZpZWxkcyApIHtcblx0XG5cdFx0XHR2YXIgc2VsZiAgICAgICAgICAgID0gdGhpcyxcblx0XHRcdFx0JHByaW1hcnkgICAgICAgID0gJCggJGZpZWxkc1swXSApLFxuXHRcdFx0XHQkcHJpbWFyeV9wYXJlbnQgPSB0aGlzLmdldF9maWVsZF9wYXJlbnQoICRwcmltYXJ5ICksXG5cdFx0XHRcdCR0b2dnbGUgICAgICAgICA9ICQoICc8YSBocmVmPVwiI1wiPjwvYT4nICksXG5cdFx0XHRcdCR0b2dnbGVfd3JhcCAgICA9ICQoICc8ZGl2IGNsYXNzPVwibGxtcy1mb3JtLWZpZWxkIHR5cGUtaHRtbCBsbG1zLWNvbHMtMTIgbGxtcy1jb2xzLWxhc3RcIj48L2Rpdj4nICksXG5cdFx0XHRcdGNoYW5nZV90ZXh0ICAgICA9IExMTVMubDEwbi5yZXBsYWNlKCAnQ2hhbmdlIHlvdXIgJXMnLCB7ICclcyc6IHRoaXMuZ2V0X2xhYmVsX3RleHQoICRwcmltYXJ5X3BhcmVudC5maW5kKCAnbGFiZWwnICkgKS50b0xvd2VyQ2FzZSgpIH0gKSxcblx0XHRcdFx0Y2FuY2VsX3RleHQgICAgID0gTExNUy5sMTBuLnJlcGxhY2UoICdDYW5jZWwgJXMgY2hhbmdlJywgeyAnJXMnOiB0aGlzLmdldF9sYWJlbF90ZXh0KCAkcHJpbWFyeV9wYXJlbnQuZmluZCggJ2xhYmVsJyApICkudG9Mb3dlckNhc2UoKSB9ICksXG5cdFx0XHRcdCRhZnRlcl9maWVsZCAgICA9ICRmaWVsZHMubGVuZ3RoID4gMiA/IHRoaXMuZ2V0X2ZpZWxkX3BhcmVudCggJCggJGZpZWxkc1sgJGZpZWxkcy5sZW5ndGggLSAxIF0gKSApIDogJHByaW1hcnlfcGFyZW50LFxuXHRcdFx0XHQkYWZ0ZXJfZWwgICAgICAgPSAkYWZ0ZXJfZmllbGQuaGFzQ2xhc3MoICd3cC1ibG9jay1jb2x1bW4nICkgPyAkYWZ0ZXJfZmllbGQucGFyZW50KCkgOiAkYWZ0ZXJfZmllbGQ7XG5cdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBEaXNwbGF5IGFuZCBlbmFibGUgdGhlIGZpZWxkcy5cblx0XHRcdCAqXG5cdFx0XHQgKiBAc2luY2UgW3ZlcnNpb25dXG5cdFx0XHQgKlxuXHRcdFx0ICogQHJldHVybiB7dm9pZH1cblx0XHRcdCAqL1xuXHRcdFx0ZnVuY3Rpb24gc2hvd19maWVsZHMoKSB7XG5cdFxuXHRcdFx0XHQkdG9nZ2xlLnRleHQoIGNhbmNlbF90ZXh0ICk7XG5cdFxuXHRcdFx0XHQkZmllbGRzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbGYuZ2V0X2ZpZWxkX3BhcmVudCggJCggdGhpcyApICkuc2hvdygpO1xuXHRcdFx0XHRcdCQoIHRoaXMgKS5hdHRyKCAncmVxdWlyZWQnLCAncmVxdWlyZWQnICk7XG5cdFx0XHRcdFx0JCggdGhpcyApLnJlbW92ZUF0dHIoICdkaXNhYmxlZCcgKTtcblx0XHRcdFx0fSApO1xuXHRcblx0XHRcdH1cblx0XG5cdFx0XHQvKipcblx0XHRcdCAqIEhpZGUgYW5kIGRpc2FibGUgdGhlIGZpZWxkcy5cblx0XHRcdCAqXG5cdFx0XHQgKiBAc2luY2UgW3ZlcnNpb25dXG5cdFx0XHQgKlxuXHRcdFx0ICogQHJldHVybiB7dm9pZH1cblx0XHRcdCAqL1xuXHRcdFx0ZnVuY3Rpb24gaGlkZV9maWVsZHMoKSB7XG5cdFxuXHRcdFx0XHQkdG9nZ2xlLnRleHQoIGNoYW5nZV90ZXh0ICk7XG5cdFx0XHRcdCRmaWVsZHMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2VsZi5nZXRfZmllbGRfcGFyZW50KCAkKCB0aGlzICkgKS5oaWRlKCk7XG5cdFx0XHRcdFx0JCggdGhpcyApLnJlbW92ZUF0dHIoICdyZXF1aXJlZCcgKTtcblx0XHRcdFx0XHQkKCB0aGlzICkuYXR0ciggJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyApO1xuXHRcdFx0XHR9ICk7XG5cdFxuXHRcdFx0fVxuXHRcblx0XHRcdCR0b2dnbGUub24oICdjbGljaycsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHRcdFx0XHRpZiAoICRwcmltYXJ5X3BhcmVudC5pcyggJzp2aXNpYmxlJyApICkge1xuXHRcdFx0XHRcdGhpZGVfZmllbGRzKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2hvd19maWVsZHMoKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdH0gKTtcblx0XG5cdFx0XHQkdG9nZ2xlX3dyYXAuYXBwZW5kKCAkdG9nZ2xlICk7XG5cdFx0XHQkYWZ0ZXJfZWwuYWZ0ZXIoICc8ZGl2IGNsYXNzPVwiY2xlYXJcIj48L2Rpdj4nICk7XG5cdFx0XHQkYWZ0ZXJfZWwuYWZ0ZXIoICR0b2dnbGVfd3JhcCApO1xuXHRcblx0XHRcdGhpZGVfZmllbGRzKCk7XG5cdFxuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIFVwZGF0ZXMgdGhlIHRleHQgb2YgYSBsYWJlbCBmb3IgYSBnaXZlbiBmaWVsZC5cblx0XHQgKlxuXHRcdCAqIEBzaW5jZSBbdmVyc2lvbl1cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSAkZmllbGQgalF1ZXJ5IG9iamVjdCBvZiB0aGUgZm9ybSBmaWVsZC5cblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBMYWJlbCB0ZXh0LlxuXHRcdCAqIEByZXR1cm4ge3ZvaWR9XG5cdFx0ICovXG5cdFx0dXBkYXRlX2xhYmVsOiBmdW5jdGlvbiggJGZpZWxkLCB0ZXh0ICkge1xuXHRcblx0XHRcdHZhciAkbGFiZWwgPSB0aGlzLmdldF9maWVsZF9wYXJlbnQoICRmaWVsZCApLmZpbmQoICdsYWJlbCcgKSxcblx0XHRcdFx0JHJlcXVpcmVkID0gJGxhYmVsLmZpbmQoICcubGxtcy1yZXF1aXJlZCcgKS5jbG9uZSgpO1xuXHRcblx0XHRcdCRsYWJlbC5odG1sKCB0ZXh0ICk7XG5cdFx0XHQkbGFiZWwuYXBwZW5kKCAkcmVxdWlyZWQgKTtcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogVXBkYXRlIGZvcm0gZmllbGRzIGJhc2VkIG9uIHNlbGVjdGVkIGNvdW50cnlcblx0XHQgKlxuXHRcdCAqIFJlcGxhY2VzIGxhYmVsIHRleHQgd2l0aCBsb2NhbGUtc3BlY2lmaWMgbGFuZ3VhZ2UgYW5kXG5cdFx0ICogaGlkZXMgb3Igc2hvd3MgemlwIGZpZWxkcyBiYXNlZCBvbiB3aGV0aGVyIG9yIG5vdFxuXHRcdCAqIHRoZXkgYXJlIHJlcXVpcmVkIGZvciB0aGUgZ2l2ZW4gY291bnRyeS5cblx0XHQgKlxuXHRcdCAqIEBzaW5jZSBbdmVyc2lvbl1cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBjb3VudHJ5X2NvZGUgQ3VycmVudGx5IHNlbGVjdGVkIGNvdW50cnkgY29kZS5cblx0XHQgKiBAcmV0dXJuIHt2b2lkfVxuXHRcdCAqL1xuXHRcdHVwZGF0ZV9sb2NhbGVfaW5mbzogZnVuY3Rpb24oIGNvdW50cnlfY29kZSApIHtcblx0XG5cdFx0XHRpZiAoICEgdGhpcy5sb2NhbGUgfHwgISB0aGlzLmxvY2FsZVsgY291bnRyeV9jb2RlIF0gKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHR2YXIgaW5mbyA9IHRoaXMubG9jYWxlWyBjb3VudHJ5X2NvZGUgXSxcblx0XHRcdFx0c3RhdGVfdGV4dCA9IGluZm8uc3RhdGUgPyBpbmZvLnN0YXRlIDogdGhpcy5sb2NhbGVfZGVmYXVsdHMuc3RhdGU7XG5cdFxuXHRcdFx0dGhpcy51cGRhdGVfbGFiZWwoIHRoaXMuJHN0YXRlcywgc3RhdGVfdGV4dCApO1xuXHRcblx0XHRcdHZhciAkemlwc19wYXJlbnQgPSB0aGlzLmdldF9maWVsZF9wYXJlbnQoIHRoaXMuJHppcHMgKTtcblx0XHRcdHRoaXMuJHppcHMucmVtb3ZlQXR0ciggJ2Rpc2FibGVkJyApO1xuXHRcdFx0aWYgKCBpbmZvLnppcCApIHtcblx0XHRcdFx0dGhpcy51cGRhdGVfbGFiZWwoIHRoaXMuJHppcHMsIGluZm8uemlwICk7XG5cdFx0XHRcdCR6aXBzX3BhcmVudC5zaG93KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLiR6aXBzLmF0dHIoICdkaXNhYmxlZCcsICdkaXNhYmxlZCcgKTtcblx0XHRcdFx0JHppcHNfcGFyZW50LmhpZGUoKTtcblx0XHRcdH1cblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogVXBkYXRlIHRoZSBhdmFpbGFibGUgb3B0aW9ucyBpbiB0aGUgc3RhdGUgZmllbGRcblx0XHQgKlxuXHRcdCAqIFJlbW92ZXMgZXhpc3Rpbmcgb3B0aW9ucyBhbmQgY29waWVzIHRoZSBvcHRpb25zXG5cdFx0ICogZm9yIHRoZSByZXF1ZXN0ZWQgY291bnRyeSBmcm9tIHRoZSBoaWRkZW4gc2VsZWN0IGZpZWxkLlxuXHRcdCAqXG5cdFx0ICogSWYgdGhlcmUgYXJlIG5vIHN0YXRlcyBmb3IgdGhlIGdpdmVuIGNvdW50cnkgdGhlIHN0YXRlXG5cdFx0ICogZmllbGQgd2lsbCBiZSBoaWRkZW4uXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgW3ZlcnNpb25dXG5cdFx0ICpcblx0XHQgKiBAc2VlIHtSZWZlcmVuY2V9XG5cdFx0ICogQGxpbmsge1VSTH1cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBjb3VudHJ5X2NvZGUgQ3VycmVudGx5IHNlbGVjdGVkIGNvdW50cnkgY29kZS5cblx0XHQgKiBAcmV0dXJuIHt2b2lkfVxuXHRcdCAqL1xuXHRcdHVwZGF0ZV9zdGF0ZV9vcHRpb25zOiBmdW5jdGlvbiggY291bnRyeV9jb2RlICkge1xuXHRcblx0XHRcdGlmICggISB0aGlzLiRzdGF0ZXMubGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0dmFyIG9wdHMgICAgPSB0aGlzLiRob2xkZXIuZmluZCggJ29wdGdyb3VwW2RhdGEta2V5PVwiJyArIGNvdW50cnlfY29kZSArICdcIl0gb3B0aW9uJyApLmNsb25lKCksXG5cdFx0XHRcdCRwYXJlbnQgPSB0aGlzLmdldF9maWVsZF9wYXJlbnQoIHRoaXMuJHN0YXRlcyApO1xuXHRcblx0XHRcdGlmICggISBvcHRzLmxlbmd0aCApIHtcblx0XHRcdFx0dGhpcy4kc3RhdGVzLmh0bWwoICc8b3B0aW9uPiZuYnNwPC9vcHRpb24+JyApO1xuXHRcdFx0XHR0aGlzLiRzdGF0ZXMuYXR0ciggJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyApO1xuXHRcdFx0XHQkcGFyZW50LmhpZGUoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuJHN0YXRlcy5odG1sKCBvcHRzICk7XG5cdFx0XHRcdHRoaXMuJHN0YXRlcy5yZW1vdmVBdHRyKCAnZGlzYWJsZWQnICk7XG5cdFx0XHRcdCRwYXJlbnQuc2hvdygpO1xuXHRcdFx0fVxuXHRcblx0XHR9LFxuXHRcblx0fTtcblx0XG5cdFx0LyoqXG5cdCAqIEluc3RydWN0b3JzIExpc3Rcblx0ICpcblx0ICogQHBhY2thZ2UgTGlmdGVyTE1TL1NjcmlwdHNcblx0ICpcblx0ICogQHNpbmNlICBVbmtub3duXG5cdCAqIEB2ZXJzaW9uICBVbmtub3duXG5cdCAqL1xuXHRcblx0TExNUy5JbnN0cnVjdG9ycyA9IHtcblx0XG5cdFx0LyoqXG5cdFx0ICogSW5pdFxuXHRcdCAqL1xuXHRcdGluaXQ6IGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XG5cdFx0XHRpZiAoICQoICdib2R5JyApLmhhc0NsYXNzKCAnd3AtYWRtaW4nICkgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoICQoICcubGxtcy1pbnN0cnVjdG9ycycgKS5sZW5ndGggKSB7XG5cdFxuXHRcdFx0XHRMTE1TLndhaXRfZm9yX21hdGNoSGVpZ2h0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRzZWxmLmJpbmQoKTtcblx0XHRcdFx0fSApO1xuXHRcblx0XHRcdH1cblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogQmluZCBNZXRob2Rcblx0XHQgKiBIYW5kbGVzIGRvbSBiaW5kaW5nIG9uIGxvYWRcblx0XHQgKlxuXHRcdCAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxuXHRcdCAqL1xuXHRcdGJpbmQ6IGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdCQoICcubGxtcy1pbnN0cnVjdG9ycyAubGxtcy1hdXRob3InICkubWF0Y2hIZWlnaHQoKTtcblx0XG5cdFx0fSxcblx0XG5cdH07XG5cdFxuXHRcdC8qKlxuXHQgKiBMb2NhbGl6YXRpb24gZnVuY3Rpb25zIGZvciBMaWZ0ZXJMTVMgSmF2YXNjcmlwdFxuXHQgKlxuXHQgKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuXHQgKlxuXHQgKiBAc2luY2UgIDIuNy4zXG5cdCAqIEB2ZXJzaW9uICAyLjcuM1xuXHQgKlxuXHQgKiBAdG9kbyAgd2UgbmVlZCBtb3JlIHJvYnVzdCB0cmFuc2xhdGlvbiBmdW5jdGlvbnMgdG8gaGFuZGxlIHNwcmludGYgYW5kIHBsdXJhbGl6YXRpb25cblx0ICogICAgICAgIGF0IHRoaXMgbW9tZW50IHdlIGRvbid0IG5lZWQgdGhvc2UgYW5kIGhhdmVuJ3Qgc3R1YmJlZCB0aGVtIG91dFxuXHQgKiAgICAgICAgdGhvc2Ugd2lsbCBiZSBhZGRlZCB3aGVuIHRoZXkncmUgbmVlZGVkXG5cdCAqL1xuXHRcblx0TExNUy5sMTBuID0gTExNUy5sMTBuIHx8IHt9O1xuXHRcblx0TExNUy5sMTBuLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uICggc3RyaW5nICkge1xuXHRcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFxuXHRcdGlmICggc2VsZi5zdHJpbmdzW3N0cmluZ10gKSB7XG5cdFxuXHRcdFx0cmV0dXJuIHNlbGYuc3RyaW5nc1tzdHJpbmddO1xuXHRcblx0XHR9IGVsc2Uge1xuXHRcblx0XHRcdHJldHVybiBzdHJpbmc7XG5cdFxuXHRcdH1cblx0XG5cdH07XG5cdFxuXHQvKipcblx0ICogVHJhbnNsYXRlIGFuZCByZXBsYWNlIHBsYWNlaG9sZGVycyBpbiBhIHN0cmluZ1xuXHQgKlxuXHQgKiBAZXhhbXBsZSBMTE1TLmwxMG4ucmVwbGFjZSggJ1RoaXMgaXMgYSAlMiRzICUxJHMgU3RyaW5nJywge1xuXHQgKiAgICAgICAgICAgXHQnJTEkcyc6ICdjb29sJyxcblx0ICogICAgXHRcdFx0JyUyJHMnOiAndmVyeSdcblx0ICogICAgXHRcdH0gKTtcblx0ICogICAgXHRcdE91dHB1dDogXCJUaGlzIGlzIGEgdmVyeSBjb29sIFN0cmluZ1wiXG5cdCAqXG5cdCAqIEBwYXJhbSAgICBzdHJpbmcgICBzdHJpbmcgICAgICAgIHRleHQgc3RyaW5nXG5cdCAqIEBwYXJhbSAgICBvYmplY3QgICByZXBsYWNlbWVudHMgIG9iamVjdCBjb250YWluaW5nIHRva2VuID0+IHJlcGxhY2VtZW50IHBhaXJzXG5cdCAqIEByZXR1cm4gICBzdHJpbmdcblx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdCAqL1xuXHRMTE1TLmwxMG4ucmVwbGFjZSA9IGZ1bmN0aW9uKCBzdHJpbmcsIHJlcGxhY2VtZW50cyApIHtcblx0XG5cdFx0dmFyIHN0ciA9IHRoaXMudHJhbnNsYXRlKCBzdHJpbmcgKTtcblx0XG5cdFx0JC5lYWNoKCByZXBsYWNlbWVudHMsIGZ1bmN0aW9uKCB0b2tlbiwgdmFsdWUgKSB7XG5cdFxuXHRcdFx0aWYgKCAtMSAhPT0gdG9rZW4uaW5kZXhPZiggJ3MnICkgKSB7XG5cdFx0XHRcdHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcblx0XHRcdH0gZWxzZSBpZiAoIC0xICE9PSB0b2tlbi5pbmRleE9mKCAnZCcgKSApIHtcblx0XHRcdFx0dmFsdWUgPSB2YWx1ZSAqIDE7XG5cdFx0XHR9XG5cdFxuXHRcdFx0c3RyID0gc3RyLnJlcGxhY2UoIHRva2VuLCB2YWx1ZSApO1xuXHRcblx0XHR9ICk7XG5cdFxuXHRcdHJldHVybiBzdHI7XG5cdFxuXHR9O1xuXHRcblx0XHQvKipcblx0ICogSGFuZGxlIExlc3NvbiBQcmV2aWV3IEVsZW1lbnRzXG5cdCAqXG5cdCAqIEBwYWNrYWdlIExpZnRlckxNUy9TY3JpcHRzXG5cdCAqXG5cdCAqIEBzaW5jZSAgICAzLjAuMFxuXHQgKiBAdmVyc2lvbiAgMy4xNi4xMlxuXHQgKi9cblx0XG5cdExMTVMuTGVzc29uUHJldmlldyA9IHtcblx0XG5cdFx0LyoqXG5cdFx0ICogQSBqUXVlcnkgb2JqZWN0IG9mIGFsbCBvdXRsaW5lcyBwcmVzZW50IG9uIHRoZSBjdXJyZW50IHNjcmVlblxuXHRcdCAqXG5cdFx0ICogQHR5cGUgb2JqXG5cdFx0ICovXG5cdFx0JGVsczogbnVsbCxcblx0XG5cdFx0LyoqXG5cdFx0ICogSW5pdGlhbGl6ZVxuXHRcdCAqXG5cdFx0ICogQHJldHVybiB2b2lkXG5cdFx0ICovXG5cdFx0aW5pdDogZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcblx0XHRcdHRoaXMuJGxvY2tlZCA9ICQoICdhW2hyZWY9XCIjbGxtcy1sZXNzb24tbG9ja2VkXCJdJyApO1xuXHRcblx0XHRcdGlmICggdGhpcy4kbG9ja2VkLmxlbmd0aCApIHtcblx0XG5cdFx0XHRcdHNlbGYuYmluZCgpO1xuXHRcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoICQoICcubGxtcy1jb3Vyc2UtbmF2aWdhdGlvbicgKS5sZW5ndGggKSB7XG5cdFxuXHRcdFx0XHRMTE1TLndhaXRfZm9yX21hdGNoSGVpZ2h0KCBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdFx0c2VsZi5tYXRjaF9oZWlnaHQoKTtcblx0XG5cdFx0XHRcdH0gKTtcblx0XG5cdFx0XHR9XG5cdFxuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgRE9NIGV2ZW50c1xuXHRcdCAqXG5cdFx0ICogQHJldHVybiB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMTJcblx0XHQgKi9cblx0XHRiaW5kOiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFxuXHRcdFx0dGhpcy4kbG9ja2VkLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSApO1xuXHRcblx0XHRcdHRoaXMuJGxvY2tlZC5vbiggJ21vdXNlZW50ZXInLCBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdHZhciAkdGlwID0gJCggdGhpcyApLmZpbmQoICcubGxtcy10b29sdGlwJyApO1xuXHRcdFx0XHRpZiAoICEgJHRpcC5sZW5ndGggKSB7XG5cdFx0XHRcdFx0dmFyIG1zZyA9ICQoIHRoaXMgKS5hdHRyKCAnZGF0YS10b29sdGlwLW1zZycgKTtcblx0XHRcdFx0XHRpZiAoICEgbXNnICkge1xuXHRcdFx0XHRcdFx0bXNnID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1lvdSBkbyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGFjY2VzcyB0aGlzIGNvbnRlbnQnICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCR0aXAgPSBzZWxmLmdldF90b29sdGlwKCBtc2cgKTtcblx0XHRcdFx0XHQkKCB0aGlzICkuYXBwZW5kKCAkdGlwICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0JHRpcC5hZGRDbGFzcyggJ3Nob3cnICk7XG5cdFx0XHRcdH0sIDEwICk7XG5cdFxuXHRcdFx0fSApO1xuXHRcblx0XHRcdHRoaXMuJGxvY2tlZC5vbiggJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdHZhciAkdGlwID0gJCggdGhpcyApLmZpbmQoICcubGxtcy10b29sdGlwJyApO1xuXHRcdFx0XHQkdGlwLnJlbW92ZUNsYXNzKCAnc2hvdycgKTtcblx0XG5cdFx0XHR9ICk7XG5cdFxuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIE1hdGNoIHRoZSBoZWlnaHQgb2YgbGVzc29uIHByZXZpZXcgaXRlbXMgaW4gY291cnNlIG5hdmlnYXRpb24gYmxvY2tzXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjAuMFxuXHRcdCAqL1xuXHRcdG1hdGNoX2hlaWdodDogZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0JCggJy5sbG1zLWNvdXJzZS1uYXZpZ2F0aW9uIC5sbG1zLWxlc3Nvbi1saW5rJyApLm1hdGNoSGVpZ2h0KCk7XG5cdFxuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIEdldCBhIHRvb2x0aXAgZWxlbWVudFxuXHRcdCAqXG5cdFx0ICogQHBhcmFtICAgIHN0cmluZyAgIG1zZyAgIG1lc3NhZ2UgdG8gZGlzcGxheSBpbnNpZGUgdGhlIHRvb2x0aXBcblx0XHQgKiBAcmV0dXJuICAgb2JqXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMi40XG5cdFx0ICovXG5cdFx0Z2V0X3Rvb2x0aXA6IGZ1bmN0aW9uKCBtc2cgKSB7XG5cdFx0XHR2YXIgJGVsID0gJCggJzxkaXYgY2xhc3M9XCJsbG1zLXRvb2x0aXBcIiAvPicgKTtcblx0XHRcdCRlbC5hcHBlbmQoICc8ZGl2IGNsYXNzPVwibGxtcy10b29sdGlwLWNvbnRlbnRcIj4nICsgbXNnICsgJzwvZGl2PicgKTtcblx0XHRcdHJldHVybiAkZWw7XG5cdFx0fSxcblx0XG5cdH07XG5cdFxuXHRcdC8qKlxuXHQgKiBMaWZ0ZXJMTVMgTG9vcHMgSlNcblx0ICpcblx0ICogQHBhY2thZ2UgTGlmdGVyTE1TL1NjcmlwdHNcblx0ICpcblx0ICogQHNpbmNlICAgIDMuMC4wXG5cdCAqIEB2ZXJzaW9uICAzLjE0LjBcblx0ICovXG5cdFxuXHRMTE1TLkxvb3BzID0ge1xuXHRcblx0XHQvKipcblx0XHQgKiBJbml0aWFsaXplXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHZvaWRcblx0XHQgKi9cblx0XHRpbml0OiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFxuXHRcdFx0aWYgKCAkKCAnLmxsbXMtbG9vcCcgKS5sZW5ndGggKSB7XG5cdFxuXHRcdFx0XHRMTE1TLndhaXRfZm9yX21hdGNoSGVpZ2h0KCBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdFx0c2VsZi5tYXRjaF9oZWlnaHQoKTtcblx0XG5cdFx0XHRcdH0gKTtcblx0XG5cdFx0XHR9XG5cdFxuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIE1hdGNoIHRoZSBoZWlnaHQgb2YgLmxsbXMtbG9vcC1pdGVtXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE0LjBcblx0XHQgKi9cblx0XHRtYXRjaF9oZWlnaHQ6IGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdCQoICcubGxtcy1sb29wLWl0ZW0gLmxsbXMtbG9vcC1pdGVtLWNvbnRlbnQnICkubWF0Y2hIZWlnaHQoKTtcblx0XHRcdCQoICcubGxtcy1hY2hpZXZlbWVudC1sb29wLWl0ZW0gLmxsbXMtYWNoaWV2ZW1lbnQnICkubWF0Y2hIZWlnaHQoKTtcblx0XHRcdCQoICcubGxtcy1jZXJ0aWZpY2F0ZS1sb29wLWl0ZW0gLmxsbXMtY2VydGlmaWNhdGUnICkubWF0Y2hIZWlnaHQoKTtcblx0XG5cdFx0fSxcblx0XG5cdH07XG5cdFxuXHRcdC8qKlxuXHQgKiBIYW5kbGUgdGhlIENvbGxhcHNpYmxlIFN5bGxhYnVzIFdpZGdldCAvIFNob3J0Y29kZVxuXHQgKlxuXHQgKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuXHQgKlxuXHQgKiBAc2luY2UgVW5rbm93blxuXHQgKiBAdmVyc2lvbiBVbmtub3duXG5cdCAqL1xuXHRcblx0TExNUy5PdXRsaW5lQ29sbGFwc2UgPSB7XG5cdFxuXHRcdC8qKlxuXHRcdCAqIEEgalF1ZXJ5IG9iamVjdCBvZiBhbGwgb3V0bGluZXMgcHJlc2VudCBvbiB0aGUgY3VycmVudCBzY3JlZW5cblx0XHQgKlxuXHRcdCAqIEB0eXBlIG9ialxuXHRcdCAqL1xuXHRcdCRvdXRsaW5lczogbnVsbCxcblx0XG5cdFx0LyoqXG5cdFx0ICogSW5pdGlhbGl6ZVxuXHRcdCAqXG5cdFx0ICogQHJldHVybiB2b2lkXG5cdFx0ICovXG5cdFx0aW5pdDogZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0dGhpcy4kb3V0bGluZXMgPSAkKCAnLmxsbXMtd2lkZ2V0LXN5bGxhYnVzLS1jb2xsYXBzaWJsZScgKTtcblx0XG5cdFx0XHRpZiAoIHRoaXMuJG91dGxpbmVzLmxlbmd0aCApIHtcblx0XG5cdFx0XHRcdHRoaXMuYmluZCgpO1xuXHRcblx0XHRcdH1cblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogQmluZCBET00gZXZlbnRzXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHZvaWRcblx0XHQgKi9cblx0XHRiaW5kOiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFxuXHRcdFx0dGhpcy4kb3V0bGluZXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHR2YXIgJG91dGxpbmUgPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0JGhlYWRlcnMgPSAkb3V0bGluZS5maW5kKCAnLmxsbXMtc2VjdGlvbiAuc2VjdGlvbi1oZWFkZXInICk7XG5cdFxuXHRcdFx0XHQvLyBiaW5kIGhlYWRlciBjbGlja3Ncblx0XHRcdFx0JGhlYWRlcnMub24oICdjbGljaycsIGZ1bmN0aW9uKCBlICkge1xuXHRcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHRcdFx0XHRcdHZhciAkdG9nZ2xlICA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHRcdCRzZWN0aW9uID0gJHRvZ2dsZS5jbG9zZXN0KCAnLmxsbXMtc2VjdGlvbicgKSxcblx0XHRcdFx0XHRcdHN0YXRlICAgID0gc2VsZi5nZXRfc2VjdGlvbl9zdGF0ZSggJHNlY3Rpb24gKTtcblx0XG5cdFx0XHRcdFx0c3dpdGNoICggc3RhdGUgKSB7XG5cdFxuXHRcdFx0XHRcdFx0Y2FzZSAnY2xvc2VkJzpcblx0XHRcdFx0XHRcdFx0c2VsZi5vcGVuX3NlY3Rpb24oICRzZWN0aW9uICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XG5cdFx0XHRcdFx0XHRjYXNlICdvcGVuZWQnOlxuXHRcdFx0XHRcdFx0XHRzZWxmLmNsb3NlX3NlY3Rpb24oICRzZWN0aW9uICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0fSApO1xuXHRcblx0XHRcdFx0Ly8gYmluZCBvcHRpb25hbCB0b2dnbGUgXCJidXR0b25zXCJcblx0XHRcdFx0JG91dGxpbmUuZmluZCggJy5sbG1zLWNvbGxhcHNlLXRvZ2dsZScgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGUgKSB7XG5cdFxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XG5cdFx0XHRcdFx0dmFyICRidG4gICAgICAgICAgICA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHRcdGFjdGlvbiAgICAgICAgICA9ICRidG4uYXR0ciggJ2RhdGEtYWN0aW9uJyApLFxuXHRcdFx0XHRcdFx0b3Bwb3NpdGVfYWN0aW9uID0gKCAnY2xvc2UnID09PSBhY3Rpb24gKSA/ICdvcGVuZWQnIDogJ2Nsb3NlZCc7XG5cdFxuXHRcdFx0XHRcdCRoZWFkZXJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdFx0XHRcdHZhciAkc2VjdGlvbiA9ICQoIHRoaXMgKS5jbG9zZXN0KCAnLmxsbXMtc2VjdGlvbicgKSxcblx0XHRcdFx0XHRcdFx0c3RhdGUgICAgPSBzZWxmLmdldF9zZWN0aW9uX3N0YXRlKCAkc2VjdGlvbiApO1xuXHRcblx0XHRcdFx0XHRcdGlmICggb3Bwb3NpdGVfYWN0aW9uICE9PSBzdGF0ZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0c3dpdGNoICggc3RhdGUgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRjYXNlICdjbG9zZWQnOlxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuY2xvc2Vfc2VjdGlvbiggJHNlY3Rpb24gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFxuXHRcdFx0XHRcdFx0XHRjYXNlICdvcGVuZWQnOlxuXHRcdFx0XHRcdFx0XHRcdHNlbGYub3Blbl9zZWN0aW9uKCAkc2VjdGlvbiApO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0JCggdGhpcyApLnRyaWdnZXIoICdjbGljaycgKTtcblx0XG5cdFx0XHRcdFx0fSApO1xuXHRcblx0XHRcdFx0fSApO1xuXHRcblx0XHRcdH0gKTtcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogQ2xvc2UgYW4gb3V0bGluZSBzZWN0aW9uXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gIG9iaiAgICAkc2VjdGlvbiAgIGpRdWVyeSBzZWxlY3RvciBvZiBhICcubGxtcy1zZWN0aW9uJ1xuXHRcdCAqIEByZXR1cm4gdm9pZFxuXHRcdCAqL1xuXHRcdGNsb3NlX3NlY3Rpb246IGZ1bmN0aW9uKCAkc2VjdGlvbiApIHtcblx0XG5cdFx0XHQkc2VjdGlvbi5yZW1vdmVDbGFzcyggJ2xsbXMtc2VjdGlvbi0tb3BlbmVkJyApLmFkZENsYXNzKCAnbGxtcy1zZWN0aW9uLS1jbG9zZWQnICk7XG5cdFxuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIE9wZW4gYW4gb3V0bGluZSBzZWN0aW9uXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gIG9iaiAgICAkc2VjdGlvbiAgIGpRdWVyeSBzZWxlY3RvciBvZiBhICcubGxtcy1zZWN0aW9uJ1xuXHRcdCAqIEByZXR1cm4gdm9pZFxuXHRcdCAqL1xuXHRcdG9wZW5fc2VjdGlvbjogZnVuY3Rpb24oICRzZWN0aW9uICkge1xuXHRcblx0XHRcdCRzZWN0aW9uLnJlbW92ZUNsYXNzKCAnbGxtcy1zZWN0aW9uLS1jbG9zZWQnICkuYWRkQ2xhc3MoICdsbG1zLXNlY3Rpb24tLW9wZW5lZCcgKTtcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogR2V0IHRoZSBjdXJyZW50IHN0YXRlIChvcGVuIG9yIGNsb3NlZCkgb2YgYW4gb3V0bGluZSBzZWN0aW9uXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gIG9iaiAgICAkc2VjdGlvbiAgIGpRdWVyeSBzZWxlY3RvciBvZiBhICcubGxtcy1zZWN0aW9uJ1xuXHRcdCAqIEByZXR1cm4gc3RyaW5nICAgICAgICAgICAgJ29wZW5lZCcgb3IgJ2Nsb3NlZCdcblx0XHQgKi9cblx0XHRnZXRfc2VjdGlvbl9zdGF0ZTogZnVuY3Rpb24oICRzZWN0aW9uICkge1xuXHRcblx0XHRcdHJldHVybiAkc2VjdGlvbi5oYXNDbGFzcyggJ2xsbXMtc2VjdGlvbi0tb3BlbmVkJyApID8gJ29wZW5lZCcgOiAnY2xvc2VkJztcblx0XG5cdFx0fVxuXHRcblx0fTtcblx0XG5cdFx0LyoqXG5cdCAqIEhhbmRsZSBQYXNzd29yZCBTdHJlbmd0aCBNZXRlciBmb3IgcmVnaXN0cmF0aW9uIGFuZCBwYXNzd29yZCB1cGRhdGUgZmllbGRzXG5cdCAqXG5cdCAqIEBwYWNrYWdlIExpZnRlckxNUy9TY3JpcHRzXG5cdCAqXG5cdCAqIEBzaW5jZSAzLjAuMFxuXHQgKiBAdmVyc2lvbiBbdmVyc2lvbl1cblx0ICovXG5cdFxuXHQkLmV4dGVuZCggTExNUy5QYXNzd29yZFN0cmVuZ3RoLCB7XG5cdFxuXHRcdC8qKlxuXHRcdCAqIGpRdWVyeSByZWYgZm9yIHRoZSBwYXNzd29yZCBzdHJlbmd0aCBtZXRlciBvYmplY3QuXG5cdFx0ICpcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdCRtZXRlcjogJCggJy5sbG1zLXBhc3N3b3JkLXN0cmVuZ3RoLW1ldGVyJyApLFxuXHRcblx0XHQvKipcblx0XHQgKiBqUXVlcnkgcmVmIGZvciB0aGUgcGFzc3dvcmQgZmllbGQuXG5cdFx0ICpcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdCRwYXNzOiBudWxsLFxuXHRcblx0XHQvKipcblx0XHQgKiBqUXVlcnkgcmVmIGZvciB0aGUgcGFzc3dvcmQgY29uZmlybWF0aW9uIGZpZWxkXG5cdFx0ICpcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdCRjb25mOiBudWxsLFxuXHRcblx0XHQvKipcblx0XHQgKiBqUXVlcnkgcmVmIGZvciBmb3JtIGVsZW1lbnQuXG5cdFx0ICpcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdCRmb3JtOiBudWxsLFxuXHRcblx0XHQvKipcblx0XHQgKiBJbml0XG5cdFx0ICogbG9hZHMgY2xhc3MgbWV0aG9kc1xuXHRcdCAqXG5cdFx0ICogQHNpbmNlIDMuMC4wXG5cdFx0ICogQHNpbmNlIDMuNy4wIFVua25vd25cblx0XHQgKiBAc2luY2UgW3ZlcnNpb25dIE1vdmUgcmVmZXJlbmNlIHNldHVwIHRvIGBzZXR1cF9yZWZlcmVuY2VzKClgLlxuXHRcdCAqICAgICAgICAgICAgICBVc2UgYExMTVMud2FpdF9mb3IoKWAgZm9yIGRlcGVuZGVuY3kgd2FpdGluZy5cblx0XHQgKlxuXHRcdCAqIEByZXR1cm4ge1ZvaWR9XG5cdFx0ICovXG5cdFx0aW5pdDogZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0aWYgKCAkKCAnYm9keScgKS5oYXNDbGFzcyggJ3dwLWFkbWluJyApICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCAhIHRoaXMuc2V0dXBfcmVmZXJlbmNlcygpICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcblx0XHRcdExMTVMud2FpdF9mb3IoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHdwICYmICd1bmRlZmluZWQnICE9PSB0eXBlb2Ygd3AucGFzc3dvcmRTdHJlbmd0aCApO1xuXHRcdFx0fSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYuYmluZCgpO1xuXHRcdFx0XHRzZWxmLiRmb3JtLnRyaWdnZXIoICdsbG1zLXBhc3N3b3JkLXN0cmVuZ3RoLXJlYWR5JyApO1xuXHRcdFx0fSApO1xuXHRcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBCaW5kIERPTSBFdmVudHNcblx0XHQgKlxuXHRcdCAqIEBzaW5jZSAzLjAuMFxuXHRcdCAqXG5cdFx0ICogQHJldHVybiB2b2lkXG5cdFx0ICovXG5cdFx0YmluZDogZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcblx0XHRcdC8vIGFkZCBzdWJtaXNzaW9uIGV2ZW50IGhhbmRsZXJzIHdoZW4gbm90IG9uIGEgY2hlY2tvdXQgZm9ybVxuXHRcdFx0aWYgKCAhIHRoaXMuJGZvcm0uaGFzQ2xhc3MoICdsbG1zLWNoZWNrb3V0JyApICkge1xuXHRcdFx0XHRzZWxmLiRmb3JtLm9uKCAnc3VibWl0Jywgc2VsZiwgc2VsZi5zdWJtaXQgKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBjaGVjayBwYXNzd29yZCBzdHJlbmd0aCBvbiBrZXl1cFxuXHRcdFx0c2VsZi4kcGFzcy5hZGQoIHNlbGYuJGNvbmYgKS5vbiggJ2tleXVwJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYuY2hlY2tfc3RyZW5ndGgoKTtcblx0XHRcdH0gKTtcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogQ2hlY2sgdGhlIHN0cmVuZ3RoIG9mIGEgdXNlciBlbnRlcmVkIHBhc3N3b3JkXG5cdFx0ICogYW5kIHVwZGF0ZSBlbGVtZW50cyBkZXBlbmRpbmcgb24gdGhlIGN1cnJlbnQgc3RyZW5ndGhcblx0XHQgKlxuXHRcdCAqIEBzaW5jZSAzLjAuMFxuXHRcdCAqIEBzaW5jZSBbdmVyc2lvbl0gQWxsb3cgcGFzc3dvcmQgY29uZmlybWF0aW9uIHRvIGJlIG9wdGlvbmFsIHdoZW4gY2hlY2tpbmcgc3RyZW5ndGguXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHZvaWRcblx0XHQgKi9cblx0XHRjaGVja19zdHJlbmd0aDogZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0dmFyICRwYXNzX2ZpZWxkID0gdGhpcy4kcGFzcy5jbG9zZXN0KCAnLmxsbXMtZm9ybS1maWVsZCcgKSxcblx0XHRcdFx0JGNvbmZfZmllbGQgPSB0aGlzLiRjb25mLmNsb3Nlc3QoICcubGxtcy1mb3JtLWZpZWxkJyApLFxuXHRcdFx0XHRwYXNzX2xlbmd0aCA9IHRoaXMuJHBhc3MudmFsKCkubGVuZ3RoLFxuXHRcdFx0XHRjb25mX2xlbmd0aCA9IHRoaXMuJGNvbmYubGVuZ3RoID8gdGhpcy4kY29uZi52YWwoKS5sZW5ndGggOiAwO1xuXHRcblx0XHRcdC8vIGhpZGUgdGhlIG1ldGVyIGlmIGJvdGggZmllbGRzIGFyZSBlbXB0eVxuXHRcdFx0aWYgKCAhIHBhc3NfbGVuZ3RoICYmICEgY29uZl9sZW5ndGggKSB7XG5cdFx0XHRcdCRwYXNzX2ZpZWxkLnJlbW92ZUNsYXNzKCAndmFsaWQgaW52YWxpZCcgKTtcblx0XHRcdFx0JGNvbmZfZmllbGQucmVtb3ZlQ2xhc3MoICd2YWxpZCBpbnZhbGlkJyApO1xuXHRcdFx0XHR0aGlzLiRtZXRlci5oaWRlKCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIHRoaXMuZ2V0X2N1cnJlbnRfc3RyZW5ndGhfc3RhdHVzKCkgKSB7XG5cdFx0XHRcdCRwYXNzX2ZpZWxkLnJlbW92ZUNsYXNzKCAnaW52YWxpZCcgKS5hZGRDbGFzcyggJ3ZhbGlkJyApO1xuXHRcdFx0XHRpZiAoIGNvbmZfbGVuZ3RoICkge1xuXHRcdFx0XHRcdCRjb25mX2ZpZWxkLnJlbW92ZUNsYXNzKCAnaW52YWxpZCcgKS5hZGRDbGFzcyggJ3ZhbGlkJyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkcGFzc19maWVsZC5yZW1vdmVDbGFzcyggJ3ZhbGlkJyApLmFkZENsYXNzKCAnaW52YWxpZCcgKTtcblx0XHRcdFx0aWYgKCBjb25mX2xlbmd0aCApIHtcblx0XHRcdFx0XHQkY29uZl9maWVsZC5yZW1vdmVDbGFzcyggJ3ZhbGlkJyApLmFkZENsYXNzKCAnaW52YWxpZCcgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHRoaXMuJG1ldGVyLnJlbW92ZUNsYXNzKCAndG9vLXNob3J0IHZlcnktd2VhayB3ZWFrIG1lZGl1bSBzdHJvbmcgbWlzbWF0Y2gnICk7XG5cdFx0XHR0aGlzLiRtZXRlci5zaG93KCkuYWRkQ2xhc3MoIHRoaXMuZ2V0X2N1cnJlbnRfc3RyZW5ndGgoICdzbHVnJyApICk7XG5cdFx0XHR0aGlzLiRtZXRlci5odG1sKCB0aGlzLmdldF9jdXJyZW50X3N0cmVuZ3RoKCAndGV4dCcgKSApO1xuXHRcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBGb3JtIHN1Ym1pc3Npb24gYWN0aW9uIGNhbGxlZCBkdXJpbmcgcmVnaXN0cmF0aW9uIG9uIGNoZWNrb3V0IHNjcmVlblxuXHRcdCAqXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgICAgIHNlbGYgICAgICBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzXG5cdFx0ICogQHBhcmFtICAgIEZ1bmN0aW9uICBjYWxsYmFjayAgY2FsbGJhY2sgZnVuY3Rpb24sIHBhc3NlcyBlcnJvciBtZXNzYWdlIG9yIHN1Y2Nlc3MgYmFjayB0byBjaGVja291dCBoYW5kbGVyXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKi9cblx0XHRjaGVja291dDogZnVuY3Rpb24oIHNlbGYsIGNhbGxiYWNrICkge1xuXHRcblx0XHRcdGlmICggc2VsZi5nZXRfY3VycmVudF9zdHJlbmd0aF9zdGF0dXMoKSApIHtcblx0XG5cdFx0XHRcdGNhbGxiYWNrKCB0cnVlICk7XG5cdFxuXHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdGNhbGxiYWNrKCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnVGhlcmUgaXMgYW4gaXNzdWUgd2l0aCB5b3VyIGNob3NlbiBwYXNzd29yZC4nICkgKTtcblx0XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogR2V0IHRoZSBsaXN0IG9mIGJsYWNrbGlzdGVkIHN0cmluZ3Ncblx0XHQgKlxuXHRcdCAqIEBzaW5jZSAzLjAuMFxuXHRcdCAqIEBzaW5jZSBbdmVyc2lvbl0gQWRkIGJsYWNrbGlzdGVkIHdvcmRzIGFzIGNvbmZpZ3VyZWQgdmlhIHRoZSBwaHAgZmlsdGVyIGFuZCBhdXRvbWF0aWNhbGx5IGFkZCB2YWx1ZXMgZnJvbSBhbGwgdGV4dCBpbnB1dHMgaW4gdGhlIGN1cnJlbnQgZm9ybS5cblx0XHQgKlxuXHRcdCAqIEByZXR1cm4gYXJyYXlcblx0XHQgKi9cblx0XHRnZXRfYmxhY2tsaXN0OiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHQvLyBEZWZhdWx0IHZhbHVlcyBmcm9tIFdQIENvcmUgKyBhbnkgdmFsdWVzIGFkZGVkIHZpYSBzZXR0aW5ncyBmaWx0ZXIuLlxuXHRcdFx0dmFyIGJsYWNrbGlzdCA9IHdwLnBhc3N3b3JkU3RyZW5ndGgudXNlcklucHV0QmxhY2tsaXN0KCkuY29uY2F0KCB0aGlzLmdldF9zZXR0aW5nKCAnYmxhY2tsaXN0JywgW10gKSApO1xuXHRcblx0XHRcdC8vIEFkZCB2YWx1ZXMgZnJvbSBhbGwgdGV4dCBmaWVsZHMgaW4gdGhlIGZvcm0uXG5cdFx0XHR0aGlzLiRmb3JtLmZpbmQoICdpbnB1dFt0eXBlPVwidGV4dFwiXSwgaW5wdXRbdHlwZT1cImVtYWlsXCJdLCBpbnB1dFt0eXBlPVwidGVsXCJdLCBpbnB1dFt0eXBlPVwibnVtYmVyXCJdJyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgdmFsID0gJCggdGhpcyApLnZhbCgpO1xuXHRcdFx0XHRpZiAoIHZhbCApIHtcblx0XHRcdFx0XHRibGFja2xpc3QucHVzaCggdmFsICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XG5cdFx0XHRyZXR1cm4gYmxhY2tsaXN0O1xuXHRcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBSZXRyaWV2ZSBjdXJyZW50IHN0cmVuZ3RoIGFzIGEgbnVtYmVyLCBhIHNsdWcsIG9yIGEgdHJhbnNsYXRlZCB0ZXh0IHN0cmluZ1xuXHRcdCAqXG5cdFx0ICogQHNpbmNlIDMuMC4wXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gZm9ybWF0IERlcml2ZWQgcmV0dXJuIGZvcm1hdCBbaW50fHNsdWd8dGV4dF0gZGVmYXVsdHMgdG8gaW50LlxuXHRcdCAqIEByZXR1cm4gbWl4ZWRcblx0XHQgKi9cblx0XHRnZXRfY3VycmVudF9zdHJlbmd0aDogZnVuY3Rpb24oIGZvcm1hdCApIHtcblx0XG5cdFx0XHRmb3JtYXQgICA9IGZvcm1hdCB8fCAnaW50Jztcblx0XHRcdHZhciBwYXNzID0gdGhpcy4kcGFzcy52YWwoKSxcblx0XHRcdFx0Y29uZiA9IHRoaXMuJGNvbmYudmFsKCksXG5cdFx0XHRcdHZhbDtcblx0XG5cdFx0XHQvLyBlbmZvcmNlIGN1c3RvbSBsZW5ndGggcmVxdWlyZW1lbnRcblx0XHRcdGlmICggcGFzcy5sZW5ndGggPCB0aGlzLmdldF9zZXR0aW5nKCAnbWluX2xlbmd0aCcsIDYgKSApIHtcblx0XHRcdFx0dmFsID0gLTE7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YWwgPSB3cC5wYXNzd29yZFN0cmVuZ3RoLm1ldGVyKCBwYXNzLCB0aGlzLmdldF9ibGFja2xpc3QoKSwgY29uZiApO1xuXHRcdFx0XHQvLyAwICYgMSBhcmUgYm90aCB2ZXJ5LXdlYWtcblx0XHRcdFx0aWYgKCAwID09PSB2YWwgKSB7XG5cdFx0XHRcdFx0dmFsID0gMTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggJ3NsdWcnID09PSBmb3JtYXQgKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmdldF9zdHJlbmd0aF9zbHVnKCB2YWwgKTtcblx0XHRcdH0gZWxzZSBpZiAoICd0ZXh0JyA9PT0gZm9ybWF0ICkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5nZXRfc3RyZW5ndGhfdGV4dCggdmFsICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIERldGVybWluZXMgaWYgdGhlIGN1cnJlbnQgcGFzc3dvcmQgc3RyZW5ndGggbWVldHMgdGhlIHVzZXItZGVmaW5lZFxuXHRcdCAqIG1pbmltdW0gcGFzc3dvcmQgc3RyZW5ndGggcmVxdWlyZW1lbnRzXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgMy4wLjBcblx0XHQgKlxuXHRcdCAqIEByZXR1cm4gICBib29sZWFuXG5cdFx0ICovXG5cdFx0Z2V0X2N1cnJlbnRfc3RyZW5ndGhfc3RhdHVzOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBjdXJyID0gdGhpcy5nZXRfY3VycmVudF9zdHJlbmd0aCgpLFxuXHRcdFx0XHRtaW4gID0gdGhpcy5nZXRfc3RyZW5ndGhfdmFsdWUoIHRoaXMuZ2V0X21pbmltdW1fc3RyZW5ndGgoKSApO1xuXHRcdFx0cmV0dXJuICggNSA9PT0gY3VyciApID8gZmFsc2UgOiAoIGN1cnIgPj0gbWluICk7XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogUmV0cmlldmUgdGhlIG1pbmltdW0gcGFzc3dvcmQgc3RyZW5ndGggZm9yIHRoZSBjdXJyZW50IGZvcm0uXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgMy4wLjBcblx0XHQgKiBAc2luY2UgW3ZlcnNpb25dIFJlcGxhY2VzIHRoZSB2ZXJzaW9uIG91dHB1dCB2aWEgYW4gaW5saW5lIFBIUCBzY3JpcHQgaW4gZmF2b3Igb2YgdXRpbGl6aW5nIHZhbHVlcyBjb25maWd1cmVkIGluIHRoZSBzZXR0aW5ncyBvYmplY3QuXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHtzdHJpbmd9XG5cdFx0ICovXG5cdFx0Z2V0X21pbmltdW1fc3RyZW5ndGg6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0X3NldHRpbmcoICdtaW5fc3RyZW5ndGgnLCAnc3Ryb25nJyApO1xuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIEdldCBhIHNldHRpbmcgYW5kIGZhbGxiYWNrIHRvIGEgZGVmYXVsdCB2YWx1ZS5cblx0XHQgKlxuXHRcdCAqIEBzaW5jZSBbdmVyc2lvbl1cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgU2V0dGluZyBrZXkuXG5cdFx0ICogQHBhcmFtIHttaXhlZH0gZGVmYXVsdF92YWwgRGVmYXVsdCB2YWx1ZSB3aGVuIHRoZSByZXF1ZXN0ZWQgc2V0dGluZyBjYW5ub3QgYmUgbG9jYXRlZC5cblx0XHQgKiBAcmV0dXJuIHttaXhlZH1cblx0XHQgKi9cblx0XHRnZXRfc2V0dGluZzogZnVuY3Rpb24oIGtleSwgZGVmYXVsdF92YWwgKSB7XG5cdFx0XHR2YXIgc2V0dGluZ3MgPSB0aGlzLmdldF9zZXR0aW5ncygpO1xuXHRcdFx0cmV0dXJuIHNldHRpbmdzWyBrZXkgXSA/IHNldHRpbmdzWyBrZXkgXSA6IGRlZmF1bHRfdmFsO1xuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIEdldCB0aGUgc2x1ZyBhc3NvY2lhdGVkIHdpdGggYSBzdHJlbmd0aCB2YWx1ZVxuXHRcdCAqXG5cdFx0ICogQHNpbmNlICAzLjAuMFxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGludCBzdHJlbmd0aF92YWwgU3RyZW5ndGggdmFsdWUgbnVtYmVyLlxuXHRcdCAqIEByZXR1cm4gc3RyaW5nXG5cdFx0ICovXG5cdFx0Z2V0X3N0cmVuZ3RoX3NsdWc6IGZ1bmN0aW9uKCBzdHJlbmd0aF92YWwgKSB7XG5cdFxuXHRcdFx0dmFyIHNsdWdzID0ge1xuXHRcdFx0XHQnLTEnOiAndG9vLXNob3J0Jyxcblx0XHRcdFx0MTogJ3Zlcnktd2VhaycsXG5cdFx0XHRcdDI6ICd3ZWFrJyxcblx0XHRcdFx0MzogJ21lZGl1bScsXG5cdFx0XHRcdDQ6ICdzdHJvbmcnLFxuXHRcdFx0XHQ1OiAnbWlzbWF0Y2gnLFxuXHRcdFx0fTtcblx0XG5cdFx0XHRyZXR1cm4gKCBzbHVnc1sgc3RyZW5ndGhfdmFsIF0gKSA/IHNsdWdzWyBzdHJlbmd0aF92YWwgXSA6IHNsdWdzWzVdO1xuXHRcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBHZXRzIHRoZSB0cmFuc2xhdGVkIHRleHQgYXNzb2NpYXRlZCB3aXRoIGEgc3RyZW5ndGggdmFsdWVcblx0XHQgKlxuXHRcdCAqIEBzaW5jZSAgMy4wLjBcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSB7SW50ZWdlcn0gc3RyZW5ndGhfdmFsIFN0cmVuZ3RoIHZhbHVlXG5cdFx0ICogQHJldHVybiB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGdldF9zdHJlbmd0aF90ZXh0OiBmdW5jdGlvbiggc3RyZW5ndGhfdmFsICkge1xuXHRcblx0XHRcdHZhciB0ZXh0cyA9IHtcblx0XHRcdFx0Jy0xJzogTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1RvbyBTaG9ydCcgKSxcblx0XHRcdFx0MTogTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1ZlcnkgV2VhaycgKSxcblx0XHRcdFx0MjogTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1dlYWsnICksXG5cdFx0XHRcdDM6IExMTVMubDEwbi50cmFuc2xhdGUoICdNZWRpdW0nICksXG5cdFx0XHRcdDQ6IExMTVMubDEwbi50cmFuc2xhdGUoICdTdHJvbmcnICksXG5cdFx0XHRcdDU6IExMTVMubDEwbi50cmFuc2xhdGUoICdNaXNtYXRjaCcgKSxcblx0XHRcdH07XG5cdFxuXHRcdFx0cmV0dXJuICggdGV4dHNbIHN0cmVuZ3RoX3ZhbCBdICkgPyB0ZXh0c1sgc3RyZW5ndGhfdmFsIF0gOiB0ZXh0c1s1XTtcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogR2V0IHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggYSBzdHJlbmd0aCBzbHVnXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgMy4wLjBcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSBzdHJpbmcgc3RyZW5ndGhfc2x1ZyBBIHN0cmVuZ3RoIHNsdWcuXG5cdFx0ICogQHJldHVybiB7SW50ZWdlcn1cblx0XHQgKi9cblx0XHRnZXRfc3RyZW5ndGhfdmFsdWU6IGZ1bmN0aW9uKCBzdHJlbmd0aF9zbHVnICkge1xuXHRcblx0XHRcdHZhciB2YWx1ZXMgPSB7XG5cdFx0XHRcdCd0b28tc2hvcnQnOiAtMSxcblx0XHRcdFx0J3Zlcnktd2Vhayc6IDEsXG5cdFx0XHRcdHdlYWs6IDIsXG5cdFx0XHRcdG1lZGl1bTogMyxcblx0XHRcdFx0c3Ryb25nOiA0LFxuXHRcdFx0XHRtaXNtYXRjaDogNSxcblx0XHRcdH07XG5cdFxuXHRcdFx0cmV0dXJuICggdmFsdWVzWyBzdHJlbmd0aF9zbHVnIF0gKSA/IHZhbHVlc1sgc3RyZW5ndGhfc2x1ZyBdIDogdmFsdWVzLm1pc21hdGNoO1xuXHRcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBTZXR1cCBqUXVlcnkgcmVmZXJlbmNlcyB0byBET00gZWxlbWVudHMgbmVlZGVkIHRvIHBvd2VyIHRoZSBwYXNzd29yZCBtZXRlci5cblx0XHQgKlxuXHRcdCAqIEBzaW5jZSBbdmVyc2lvbl1cblx0XHQgKlxuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGEgbWV0ZXIgZWxlbWVudCBhbmQgcGFzc3dvcmQgZmllbGQgYXJlIGZvdW5kLCBvdGhlcndpc2UgcmV0dXJucyBgZmFsc2VgLlxuXHRcdCAqL1xuXHRcdHNldHVwX3JlZmVyZW5jZXM6IGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdGlmICggISB0aGlzLiRtZXRlci5sZW5ndGggKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XG5cdFx0XHR0aGlzLiRmb3JtID0gdGhpcy4kbWV0ZXIuY2xvc2VzdCggJ2Zvcm0nICk7XG5cdFx0XHR0aGlzLiRwYXNzID0gdGhpcy4kZm9ybS5maW5kKCAnaW5wdXQjcGFzc3dvcmQnICk7XG5cdFxuXHRcdFx0aWYgKCB0aGlzLiRwYXNzLmxlbmd0aCAmJiB0aGlzLiRwYXNzLmF0dHIoICdkYXRhLW1hdGNoJyApICkge1xuXHRcdFx0XHR0aGlzLiRjb25mID0gdGhpcy4kZm9ybS5maW5kKCAnIycgKyB0aGlzLiRwYXNzLmF0dHIoICdkYXRhLW1hdGNoJyApICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuICggdGhpcy4kcGFzcy5sZW5ndGggPiAwICk7XG5cdFxuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIEZvcm0gc3VibWlzc2lvbiBoYW5kbGVyIGZvciByZWdpc3RyYXRpb24gYW5kIHVwZGF0ZSBmb3Jtc1xuXHRcdCAqXG5cdFx0ICogQHNpbmNlIDMuMC4wXG5cdFx0ICogQHNpbmNlIFt2ZXJzaW9uXSBBbGxvdyB0aGUgYWNjb3VudCBlZGl0IGZvciB0byBieXBhc3Mgc3RyZW5ndGggY2hlY2tpbmcgd2hlbiB0aGUgcGFzc3dvcmQgZmllbGQgaXMgZGlzYWJsZWQgKG5vdCBiZWluZyBzdWJtaXR0ZWQpLlxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIG9iaiBlIEV2ZW50IGRhdGEuXG5cdFx0ICogQHJldHVybiB2b2lkXG5cdFx0ICovXG5cdFx0c3VibWl0OiBmdW5jdGlvbiggZSApIHtcblx0XG5cdFx0XHR2YXIgc2VsZiA9IGUuZGF0YTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHNlbGYuJHBhc3MudHJpZ2dlciggJ2tleXVwJyApO1xuXHRcblx0XHRcdC8vIE1lZXRzIHRoZSBzdGF0dXMgcmVxdWlyZW1lbnRzIE9SIHdlJ3JlIG9uIHRoZSBhY2NvdW50IGVkaXQgZm9ybSBhbmQgdGhlIHBhc3N3b3JkIGZpZWxkIGlzIGRpc2FibGVkLlxuXHRcdFx0aWYgKCBzZWxmLmdldF9jdXJyZW50X3N0cmVuZ3RoX3N0YXR1cygpIHx8ICggc2VsZi4kZm9ybS5oYXNDbGFzcyggJ2VkaXQtYWNjb3VudCcgKSAmJiAnZGlzYWJsZWQnID09PSBzZWxmLiRwYXNzLmF0dHIoICdkaXNhYmxlZCcgKSApICkge1xuXHRcdFx0XHRzZWxmLiRmb3JtLm9mZiggJ3N1Ym1pdCcsIHNlbGYuc3VibWl0ICk7XG5cdFx0XHRcdHNlbGYuJGZvcm0udHJpZ2dlciggJ3N1Ym1pdCcgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoICdodG1sLCBib2R5JyApLmFuaW1hdGUoIHtcblx0XHRcdFx0XHRzY3JvbGxUb3A6IHNlbGYuJG1ldGVyLm9mZnNldCgpLnRvcCAtIDEwMCxcblx0XHRcdFx0fSwgMjAwICk7XG5cdFx0XHRcdHNlbGYuJG1ldGVyLmhpZGUoKTtcblx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2VsZi4kbWV0ZXIuZmFkZUluKCA0MDAgKTtcblx0XHRcdFx0fSwgMjIwICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0fSApO1xuXHRcblx0XHQvKipcblx0ICogUHJpY2luZyBUYWJsZSBVSVxuXHQgKlxuXHQgKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuXHQgKlxuXHQgKiBAc2luY2UgIFVua25vd24uXG5cdCAqIEB2ZXJzaW9uICBVbmtub3duLlxuXHQgKi9cblx0XG5cdExMTVMuUHJpY2luZ19UYWJsZXMgPSB7XG5cdFxuXHRcdC8qKlxuXHRcdCAqIEluaXRcblx0XHQgKi9cblx0XHRpbml0OiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFxuXHRcdFx0aWYgKCAkKCAnYm9keScgKS5oYXNDbGFzcyggJ3dwLWFkbWluJyApICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCAkKCAnLmxsbXMtYWNjZXNzLXBsYW5zJyApLmxlbmd0aCApIHtcblx0XG5cdFx0XHRcdExMTVMud2FpdF9mb3JfbWF0Y2hIZWlnaHQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbGYuYmluZCgpO1xuXHRcdFx0XHR9ICk7XG5cdFxuXHRcdFx0XHR0aGlzLiRsb2NrZWQgPSAkKCAnYVtocmVmPVwiI2xsbXMtcGxhbi1sb2NrZWRcIl0nICk7XG5cdFxuXHRcdFx0XHRpZiAoIHRoaXMuJGxvY2tlZC5sZW5ndGggKSB7XG5cdFxuXHRcdFx0XHRcdExMTVMud2FpdF9mb3JfcG9wb3ZlciggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRzZWxmLmJpbmRfbG9ja2VkKCk7XG5cdFx0XHRcdFx0fSApO1xuXHRcblx0XHRcdFx0fVxuXHRcblx0XHRcdH1cblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogQmluZCBNZXRob2Rcblx0XHQgKiBIYW5kbGVzIGRvbSBiaW5kaW5nIG9uIGxvYWRcblx0XHQgKlxuXHRcdCAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxuXHRcdCAqL1xuXHRcdGJpbmQ6IGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdCQoICcubGxtcy1hY2Nlc3MtcGxhbi1jb250ZW50JyApLm1hdGNoSGVpZ2h0KCk7XG5cdFx0XHQkKCAnLmxsbXMtYWNjZXNzLXBsYW4tcHJpY2luZy50cmlhbCcgKS5tYXRjaEhlaWdodCgpO1xuXHRcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBTZXR1cCBhIHBvcG92ZXIgZm9yIG1lbWJlcnMtb25seSByZXN0cmljdGVkIHBsYW5zXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy45LjFcblx0XHQgKi9cblx0XHRiaW5kX2xvY2tlZDogZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0dGhpcy4kbG9ja2VkLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdFx0JCggdGhpcyApLndlYnVpUG9wb3Zlcigge1xuXHRcdFx0XHRcdGFuaW1hdGlvbjogJ3BvcCcsXG5cdFx0XHRcdFx0Y2xvc2VhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdGNvbnRlbnQ6IGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRcdFx0dmFyICRjb250ZW50ID0gJCggJzxkaXYgY2xhc3M9XCJsbG1zLW1lbWJlcnMtb25seS1yZXN0cmljdGlvbnNcIiAvPicgKTtcblx0XHRcdFx0XHRcdCRjb250ZW50LmFwcGVuZCggZS4kZWxlbWVudC5jbG9zZXN0KCAnLmxsbXMtYWNjZXNzLXBsYW4nICkuZmluZCggJy5sbG1zLWFjY2Vzcy1wbGFuLXJlc3RyaWN0aW9ucyB1bCcgKS5jbG9uZSgpICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJGNvbnRlbnQ7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRwbGFjZW1lbnQ6ICd0b3AnLFxuXHRcdFx0XHRcdHN0eWxlOiAnaW52ZXJzZScsXG5cdFx0XHRcdFx0dGl0bGU6IExMTVMubDEwbi50cmFuc2xhdGUoICdNZW1iZXJzIE9ubHkgUHJpY2luZycgKSxcblx0XHRcdFx0XHR3aWR0aDogJzI4MHB4Jyxcblx0XHRcdFx0fSApO1xuXHRcblx0XHRcdH0gKTtcblx0XG5cdFx0fSxcblx0XG5cdH07XG5cdFxuXHRcdC8qKlxuXHQgKiBMaWZ0ZXJMTVMgUmV2aWV3cyBKU1xuXHQgKlxuXHQgKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuXHQgKlxuXHQgKiBAc2luY2UgVW5rbm93blxuXHQgKiBAdmVyc2lvbiBVbmtub3duXG5cdCAqL1xuXHRcblx0TExNUy5SZXZpZXcgPSB7XG5cdFx0LyoqXG5cdFx0ICogSW5pdFxuXHRcdCAqIGxvYWRzIGNsYXNzIG1ldGhvZHNcblx0XHQgKi9cblx0XHRpbml0OiBmdW5jdGlvbigpIHtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdJbml0aWFsaXppbmcgUmV2aWV3ICcpO1xuXHRcdFx0dGhpcy5iaW5kKCk7XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogVGhpcyBmdW5jdGlvbiBiaW5kcyBhY3Rpb25zIHRvIHRoZSBhcHByb3ByaWF0ZSBob29rc1xuXHRcdCAqL1xuXHRcdGJpbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0JCggJyNsbG1zX3Jldmlld19zdWJtaXRfYnV0dG9uJyApLmNsaWNrKGZ1bmN0aW9uKClcblx0XHRcdFx0e1xuXHRcdFx0XHRpZiAoJCggJyNyZXZpZXdfdGl0bGUnICkudmFsKCkgIT09ICcnICYmICQoICcjcmV2aWV3X3RleHQnICkudmFsKCkgIT09ICcnKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmFqYXgoe1xuXHRcdFx0XHRcdFx0dHlwZSA6ICdwb3N0Jyxcblx0XHRcdFx0XHRcdGRhdGFUeXBlIDogJ2pzb24nLFxuXHRcdFx0XHRcdFx0dXJsIDogd2luZG93LmxsbXMuYWpheHVybCxcblx0XHRcdFx0XHRcdGRhdGEgOiB7XG5cdFx0XHRcdFx0XHRcdGFjdGlvbiA6ICdMTE1TU3VibWl0UmV2aWV3Jyxcblx0XHRcdFx0XHRcdFx0cmV2aWV3X3RpdGxlOiAkKCAnI3Jldmlld190aXRsZScgKS52YWwoKSxcblx0XHRcdFx0XHRcdFx0cmV2aWV3X3RleHQ6ICQoICcjcmV2aWV3X3RleHQnICkudmFsKCksXG5cdFx0XHRcdFx0XHRcdHBhZ2VJRCA6ICQoICcjcG9zdF9JRCcgKS52YWwoKVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKClcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coICdSZXZpZXcgc3VjY2VzcycgKTtcblx0XHRcdFx0XHRcdFx0JCggJyNyZXZpZXdfYm94JyApLmhpZGUoICdzd2luZycgKTtcblx0XHRcdFx0XHRcdFx0JCggJyN0aGFua195b3VfYm94JyApLnNob3coICdzd2luZycgKTtcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRlcnJvcjogZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duIClcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coIGpxWEhSICk7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCB0ZXh0U3RhdHVzICk7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCBlcnJvclRocm93biApO1xuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoJCggJyNyZXZpZXdfdGl0bGUnICkudmFsKCkgPT09ICcnKSB7XG5cdFx0XHRcdFx0XHQkKCAnI3Jldmlld190aXRsZV9lcnJvcicgKS5zaG93KCAnc3dpbmcnICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdCQoICcjcmV2aWV3X3RpdGxlX2Vycm9yJyApLmhpZGUoICdzd2luZycgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCQoICcjcmV2aWV3X3RleHQnICkudmFsKCkgPT09ICcnKSB7XG5cdFx0XHRcdFx0XHQkKCAnI3Jldmlld190ZXh0X2Vycm9yJyApLnNob3coICdzd2luZycgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0JCggJyNyZXZpZXdfdGV4dF9lcnJvcicgKS5oaWRlKCAnc3dpbmcnICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGlmICggJCggJyNfbGxtc19kaXNwbGF5X3Jldmlld3MnICkuYXR0ciggJ2NoZWNrZWQnICkgKSB7XG5cdFx0XHRcdCQoICcubGxtcy1udW0tcmV2aWV3cy10b3AnICkuYWRkQ2xhc3MoICd0b3AnICk7XG5cdFx0XHRcdCQoICcubGxtcy1udW0tcmV2aWV3cy1ib3R0b20nICkuc2hvdygpO1xuXHRcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoICcubGxtcy1udW0tcmV2aWV3cy1ib3R0b20nICkuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdFx0JCggJyNfbGxtc19kaXNwbGF5X3Jldmlld3MnICkuY2hhbmdlKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICQoICcjX2xsbXNfZGlzcGxheV9yZXZpZXdzJyApLmF0dHIoICdjaGVja2VkJyApICkge1xuXHRcdFx0XHRcdCQoICcubGxtcy1udW0tcmV2aWV3cy10b3AnICkuYWRkQ2xhc3MoICd0b3AnICk7XG5cdFx0XHRcdFx0JCggJy5sbG1zLW51bS1yZXZpZXdzLWJvdHRvbScgKS5zaG93KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JCggJy5sbG1zLW51bS1yZXZpZXdzLXRvcCcgKS5yZW1vdmVDbGFzcyggJ3RvcCcgKTtcblx0XHRcdFx0XHQkKCAnLmxsbXMtbnVtLXJldmlld3MtYm90dG9tJyApLmhpZGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFxuXHRcdH0sXG5cdH07XG5cdFxuXHRcdC8qKlxuXHQgKiBBZGQgU3Bpbm5lcnMgZm9yIEFKQVggZXZlbnRzXG5cdCAqXG5cdCAqIEBwYWNrYWdlIExpZnRlckxNUy9TY3JpcHRzXG5cdCAqXG5cdCAqIEBzaW5jZSAzLjAuMFxuXHQgKiBAdmVyc2lvbiAzLjAuMFxuXHQgKi9cblx0XG5cdExMTVMuU3Bpbm5lciA9IHtcblx0XG5cdFx0LyoqXG5cdFx0ICogR2V0IGFuIGV4aXRpbmcgc3Bpbm5lciBlbGVtZW50IG9yIGNyZWF0ZSBhIG5ldyBvbmVcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAgICAkZWwgICBqUXVlcnkgc2VsZWN0b3Igb2YgdGhlIHBhcmVudCBlbGVtZW50IHRoYXQgc2hvdWxkIGhvbGQgYW5kIGJlIG1hc2VkIGJ5IGEgc3Bpbm5lclxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICBzaXplICBzaXplIG9yIHRoZSBzcGlubmVyIFtkZWZhdWx0fHNtYWxsXVxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0IGlzIDQwcHhcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgc21hbGwgaXMgMjBweFxuXHRcdCAqIEByZXR1cm4gICBvYmpcblx0XHQgKiBAc2luY2UgMy4wLjBcblx0XHQgKiBAdmVyc2lvbiAzLjAuMFxuXHRcdCAqL1xuXHRcdGdldDogZnVuY3Rpb24oICRlbCwgc2l6ZSApIHtcblx0XG5cdFx0XHQvLyBsb29rIGZvciBhbiBleGlzdGluZyBzcGlubmVyXG5cdFx0XHR2YXIgJHNwaW5uZXIgPSAkZWwuZmluZCggJy5sbG1zLXNwaW5uaW5nJyApLmZpcnN0KCk7XG5cdFxuXHRcdFx0Ly8gbm8gc3Bpbm5lciBpbnNpZGUgJGVsXG5cdFx0XHRpZiAoICEgJHNwaW5uZXIubGVuZ3RoICkge1xuXHRcblx0XHRcdFx0c2l6ZSA9ICggc2l6ZSApID8gc2l6ZSA6ICdkZWZhdWx0Jztcblx0XG5cdFx0XHRcdC8vIGNyZWF0ZSB0aGUgc3Bpbm5lclxuXHRcdFx0XHQkc3Bpbm5lciA9ICQoICc8ZGl2IGNsYXNzPVwibGxtcy1zcGlubmluZ1wiPjxpIGNsYXNzPVwibGxtcy1zcGlubmVyICcgKyBzaXplICsgJ1wiPjwvaT48L2Rpdj4nICk7XG5cdFxuXHRcdFx0XHQvLyBhZGQgaXQgdG8gdGhlIGRvbVxuXHRcdFx0XHQkZWwuYXBwZW5kKCAkc3Bpbm5lciApO1xuXHRcblx0XHRcdH1cblx0XG5cdFx0XHQvLyByZXR1cm4gaXRcblx0XHRcdHJldHVybiAkc3Bpbm5lcjtcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogU3RhcnQgc3Bpbm5lcihzKSBpbnI9c2lkZSBhIGdpdmVuIGVsZW1lbnRcblx0XHQgKiBDcmVhdGVzIHRoZW0gaWYgdGhleSBkb24ndCBleGlzdCFcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAgIG9iaiAgICAgICRlbCAgIGpRdWVyeSBzZWxlY3RvciBvZiB0aGUgcGFyZW50IGVsZW1lbnQgdGhhdCBzaG91bGQgaG9sZCBhbmQgYmUgbWFzZWQgYnkgYSBzcGlubmVyXG5cdFx0ICogQHBhcmFtICAgc3RyaW5nICAgc2l6ZSAgc2l6ZSBvciB0aGUgc3Bpbm5lciBbZGVmYXVsdHxzbWFsbF1cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdCBpcyA0MHB4XG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgIHNtYWxsIGlzIDIwcHhcblx0XHQgKiBAcmV0dXJuICB2b2lkXG5cdFx0ICogQHNpbmNlICAgMy4wLjBcblx0XHQgKiBAdmVyc2lvbiAzLjAuMFxuXHRcdCAqL1xuXHRcdHN0YXJ0OiBmdW5jdGlvbiggJGVsLCBzaXplICkge1xuXHRcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XG5cdFx0XHQkZWwuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHRzZWxmLmdldCggJCggdGhpcyApLCBzaXplICkuc2hvdygpO1xuXHRcblx0XHRcdH0gKTtcblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogU3RvcmUgc3Bpbm5lcnMgd2l0aGluIGFuIGVsZW1lbnRcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAgIG9iaiAgICAgICRlbCAgIGpRdWVyeSBzZWxlY3RvciBvZiB0aGUgcGFyZW50IGVsZW1lbnQgdGhhdCBzaG91bGQgaG9sZCBhbmQgYmUgbWFzZWQgYnkgYSBzcGlubmVyXG5cdFx0ICogQHJldHVybiAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gMy4wLjBcblx0XHQgKi9cblx0XHRzdG9wOiBmdW5jdGlvbiggJGVsICkge1xuXHRcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XG5cdFx0XHQkZWwuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHRzZWxmLmdldCggJCggdGhpcyApICkuaGlkZSgpO1xuXHRcblx0XHRcdH0gKTtcblx0XG5cdFx0fVxuXHRcblx0fTtcblx0XG5cdFx0LyogZ2xvYmFsIExMTVMsICQgKi9cblx0XG5cdC8qIVxuXHQgKiBKYXZhU2NyaXB0IENvb2tpZSB2Mi4yLjFcblx0ICogaHR0cHM6Ly9naXRodWIuY29tL2pzLWNvb2tpZS9qcy1jb29raWVcblx0ICpcblx0ICogQ29weXJpZ2h0IDIwMDYsIDIwMTUgS2xhdXMgSGFydGwgJiBGYWduZXIgQnJhY2tcblx0ICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG5cdCAqL1xuXHQ7KGZ1bmN0aW9uIChmYWN0b3J5KSB7XG5cdFx0dmFyIHJlZ2lzdGVyZWRJbk1vZHVsZUxvYWRlcjtcblx0XHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0XHRkZWZpbmUoZmFjdG9yeSk7XG5cdFx0XHRyZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXIgPSB0cnVlO1xuXHRcdH1cblx0XHRpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0XHRcdHJlZ2lzdGVyZWRJbk1vZHVsZUxvYWRlciA9IHRydWU7XG5cdFx0fVxuXHRcdGlmICghcmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyKSB7XG5cdFx0XHR2YXIgT2xkQ29va2llcyA9IHdpbmRvdy5Db29raWVzO1xuXHRcdFx0dmFyIGFwaSA9IHdpbmRvdy5Db29raWVzID0gZmFjdG9yeSgpO1xuXHRcdFx0YXBpLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHdpbmRvdy5Db29raWVzID0gT2xkQ29va2llcztcblx0XHRcdFx0cmV0dXJuIGFwaTtcblx0XHRcdH07XG5cdFx0fVxuXHR9KGZ1bmN0aW9uICgpIHtcblx0XHRmdW5jdGlvbiBleHRlbmQgKCkge1xuXHRcdFx0dmFyIGkgPSAwO1xuXHRcdFx0dmFyIHJlc3VsdCA9IHt9O1xuXHRcdFx0Zm9yICg7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIGF0dHJpYnV0ZXMgPSBhcmd1bWVudHNbIGkgXTtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGF0dHJpYnV0ZXMpIHtcblx0XHRcdFx0XHRyZXN1bHRba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cdFxuXHRcdGZ1bmN0aW9uIGRlY29kZSAocykge1xuXHRcdFx0cmV0dXJuIHMucmVwbGFjZSgvKCVbMC05QS1aXXsyfSkrL2csIGRlY29kZVVSSUNvbXBvbmVudCk7XG5cdFx0fVxuXHRcblx0XHRmdW5jdGlvbiBpbml0IChjb252ZXJ0ZXIpIHtcblx0XHRcdGZ1bmN0aW9uIGFwaSgpIHt9XG5cdFxuXHRcdFx0ZnVuY3Rpb24gc2V0IChrZXksIHZhbHVlLCBhdHRyaWJ1dGVzKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRhdHRyaWJ1dGVzID0gZXh0ZW5kKHtcblx0XHRcdFx0XHRwYXRoOiAnLydcblx0XHRcdFx0fSwgYXBpLmRlZmF1bHRzLCBhdHRyaWJ1dGVzKTtcblx0XG5cdFx0XHRcdGlmICh0eXBlb2YgYXR0cmlidXRlcy5leHBpcmVzID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRcdGF0dHJpYnV0ZXMuZXhwaXJlcyA9IG5ldyBEYXRlKG5ldyBEYXRlKCkgKiAxICsgYXR0cmlidXRlcy5leHBpcmVzICogODY0ZSs1KTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gV2UncmUgdXNpbmcgXCJleHBpcmVzXCIgYmVjYXVzZSBcIm1heC1hZ2VcIiBpcyBub3Qgc3VwcG9ydGVkIGJ5IElFXG5cdFx0XHRcdGF0dHJpYnV0ZXMuZXhwaXJlcyA9IGF0dHJpYnV0ZXMuZXhwaXJlcyA/IGF0dHJpYnV0ZXMuZXhwaXJlcy50b1VUQ1N0cmluZygpIDogJyc7XG5cdFxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHZhciByZXN1bHQgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG5cdFx0XHRcdFx0aWYgKC9eW1xce1xcW10vLnRlc3QocmVzdWx0KSkge1xuXHRcdFx0XHRcdFx0dmFsdWUgPSByZXN1bHQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcblx0XHRcdFx0dmFsdWUgPSBjb252ZXJ0ZXIud3JpdGUgP1xuXHRcdFx0XHRcdGNvbnZlcnRlci53cml0ZSh2YWx1ZSwga2V5KSA6XG5cdFx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh2YWx1ZSkpXG5cdFx0XHRcdFx0XHQucmVwbGFjZSgvJSgyM3wyNHwyNnwyQnwzQXwzQ3wzRXwzRHwyRnwzRnw0MHw1Qnw1RHw1RXw2MHw3Qnw3RHw3QykvZywgZGVjb2RlVVJJQ29tcG9uZW50KTtcblx0XG5cdFx0XHRcdGtleSA9IGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoa2V5KSlcblx0XHRcdFx0XHQucmVwbGFjZSgvJSgyM3wyNHwyNnwyQnw1RXw2MHw3QykvZywgZGVjb2RlVVJJQ29tcG9uZW50KVxuXHRcdFx0XHRcdC5yZXBsYWNlKC9bXFwoXFwpXS9nLCBlc2NhcGUpO1xuXHRcblx0XHRcdFx0dmFyIHN0cmluZ2lmaWVkQXR0cmlidXRlcyA9ICcnO1xuXHRcdFx0XHRmb3IgKHZhciBhdHRyaWJ1dGVOYW1lIGluIGF0dHJpYnV0ZXMpIHtcblx0XHRcdFx0XHRpZiAoIWF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzdHJpbmdpZmllZEF0dHJpYnV0ZXMgKz0gJzsgJyArIGF0dHJpYnV0ZU5hbWU7XG5cdFx0XHRcdFx0aWYgKGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0gPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gQ29uc2lkZXJzIFJGQyA2MjY1IHNlY3Rpb24gNS4yOlxuXHRcdFx0XHRcdC8vIC4uLlxuXHRcdFx0XHRcdC8vIDMuICBJZiB0aGUgcmVtYWluaW5nIHVucGFyc2VkLWF0dHJpYnV0ZXMgY29udGFpbnMgYSAleDNCIChcIjtcIilcblx0XHRcdFx0XHQvLyAgICAgY2hhcmFjdGVyOlxuXHRcdFx0XHRcdC8vIENvbnN1bWUgdGhlIGNoYXJhY3RlcnMgb2YgdGhlIHVucGFyc2VkLWF0dHJpYnV0ZXMgdXAgdG8sXG5cdFx0XHRcdFx0Ly8gbm90IGluY2x1ZGluZywgdGhlIGZpcnN0ICV4M0IgKFwiO1wiKSBjaGFyYWN0ZXIuXG5cdFx0XHRcdFx0Ly8gLi4uXG5cdFx0XHRcdFx0c3RyaW5naWZpZWRBdHRyaWJ1dGVzICs9ICc9JyArIGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0uc3BsaXQoJzsnKVswXTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0cmV0dXJuIChkb2N1bWVudC5jb29raWUgPSBrZXkgKyAnPScgKyB2YWx1ZSArIHN0cmluZ2lmaWVkQXR0cmlidXRlcyk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0ZnVuY3Rpb24gZ2V0IChrZXksIGpzb24pIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHZhciBqYXIgPSB7fTtcblx0XHRcdFx0Ly8gVG8gcHJldmVudCB0aGUgZm9yIGxvb3AgaW4gdGhlIGZpcnN0IHBsYWNlIGFzc2lnbiBhbiBlbXB0eSBhcnJheVxuXHRcdFx0XHQvLyBpbiBjYXNlIHRoZXJlIGFyZSBubyBjb29raWVzIGF0IGFsbC5cblx0XHRcdFx0dmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUgPyBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsgJykgOiBbXTtcblx0XHRcdFx0dmFyIGkgPSAwO1xuXHRcblx0XHRcdFx0Zm9yICg7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0dmFyIHBhcnRzID0gY29va2llc1tpXS5zcGxpdCgnPScpO1xuXHRcdFx0XHRcdHZhciBjb29raWUgPSBwYXJ0cy5zbGljZSgxKS5qb2luKCc9Jyk7XG5cdFxuXHRcdFx0XHRcdGlmICghanNvbiAmJiBjb29raWUuY2hhckF0KDApID09PSAnXCInKSB7XG5cdFx0XHRcdFx0XHRjb29raWUgPSBjb29raWUuc2xpY2UoMSwgLTEpO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdHZhciBuYW1lID0gZGVjb2RlKHBhcnRzWzBdKTtcblx0XHRcdFx0XHRcdGNvb2tpZSA9IChjb252ZXJ0ZXIucmVhZCB8fCBjb252ZXJ0ZXIpKGNvb2tpZSwgbmFtZSkgfHxcblx0XHRcdFx0XHRcdFx0ZGVjb2RlKGNvb2tpZSk7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKGpzb24pIHtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRjb29raWUgPSBKU09OLnBhcnNlKGNvb2tpZSk7XG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0amFyW25hbWVdID0gY29va2llO1xuXHRcblx0XHRcdFx0XHRcdGlmIChrZXkgPT09IG5hbWUpIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0cmV0dXJuIGtleSA/IGphcltrZXldIDogamFyO1xuXHRcdFx0fVxuXHRcblx0XHRcdGFwaS5zZXQgPSBzZXQ7XG5cdFx0XHRhcGkuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0XHRyZXR1cm4gZ2V0KGtleSwgZmFsc2UgLyogcmVhZCBhcyByYXcgKi8pO1xuXHRcdFx0fTtcblx0XHRcdGFwaS5nZXRKU09OID0gZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0XHRyZXR1cm4gZ2V0KGtleSwgdHJ1ZSAvKiByZWFkIGFzIGpzb24gKi8pO1xuXHRcdFx0fTtcblx0XHRcdGFwaS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5LCBhdHRyaWJ1dGVzKSB7XG5cdFx0XHRcdHNldChrZXksICcnLCBleHRlbmQoYXR0cmlidXRlcywge1xuXHRcdFx0XHRcdGV4cGlyZXM6IC0xXG5cdFx0XHRcdH0pKTtcblx0XHRcdH07XG5cdFxuXHRcdFx0YXBpLmRlZmF1bHRzID0ge307XG5cdFxuXHRcdFx0YXBpLndpdGhDb252ZXJ0ZXIgPSBpbml0O1xuXHRcblx0XHRcdHJldHVybiBhcGk7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gaW5pdChmdW5jdGlvbiAoKSB7fSk7XG5cdH0pKTtcblx0XG5cdC8qKlxuXHQgKiBTdG9yZSBpbmZvcm1hdGlvbiBpbiBMb2NhbCBTdG9yYWdlIGJ5IGdyb3VwLlxuXHQgKlxuXHQgKiBAc2luY2UgMy4zNi4wXG5cdCAqXG5cdCAqIEBwYXJhbSBzdHJpbmcgZ3JvdXAgU3RvcmFnZSBncm91cCBpZC9uYW1lLlxuXHQgKi9cblx0TExNUy5TdG9yYWdlID0gZnVuY3Rpb24oIGdyb3VwICkge1xuXHRcblx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRzdG9yZSA9IENvb2tpZXMubm9Db25mbGljdCgpO1xuXHRcblx0XHQvKipcblx0XHQgKiBDbGVhciBhbGwgZGF0YSBmb3IgdGhlIGdyb3VwLlxuXHRcdCAqXG5cdFx0ICogQHNpbmNlIDMuMzYuMFxuXHRcdCAqXG5cdFx0ICogQHJldHVybiB2b2lkXG5cdFx0ICovXG5cdFx0dGhpcy5jbGVhckFsbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0c3RvcmUucmVtb3ZlKCBncm91cCApO1xuXHRcdH07XG5cdFxuXHRcdC8qKlxuXHRcdCAqIENsZWFyIGEgc2luZ2xlIGl0ZW0gZnJvbSB0aGUgZ3JvdXAgYnkga2V5LlxuXHRcdCAqXG5cdFx0ICogQHNpbmNlIDMuMzYuMFxuXHRcdCAqXG5cdFx0ICogQHJldHVybiBvYmpcblx0XHQgKi9cblx0XHR0aGlzLmNsZWFyID0gZnVuY3Rpb24oIGtleSApIHtcblx0XHRcdHZhciBkYXRhID0gc2VsZi5nZXRBbGwoKTtcblx0XHRcdGRlbGV0ZSBkYXRhWyBrZXkgXTtcblx0XHRcdHJldHVybiBzdG9yZS5zZXQoIGdyb3VwLCBkYXRhICk7XG5cdFx0fTtcblx0XG5cdFx0LyoqXG5cdFx0ICogUmV0cmlldmUgKGFuZCBwYXJzZSkgYWxsIGRhdGEgc3RvcmVkIGZvciB0aGUgZ3JvdXAuXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgMy4zNi4wXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIG9ialxuXHRcdCAqL1xuXHRcdHRoaXMuZ2V0QWxsID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gc3RvcmUuZ2V0SlNPTiggZ3JvdXAgKSB8fCB7fTtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIFJldHJpZXZlIGFuIGl0ZW0gZnJvbSB0aGUgZ3JvdXAgYnkga2V5LlxuXHRcdCAqXG5cdFx0ICogQHNpbmNlIDMuMzYuMFxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIHN0cmluZyBrZXkgSXRlbSBrZXkvbmFtZS5cblx0XHQgKiBAcGFyYW0gbWl4ZWQgZGVmYXVsdF92YWwgSXRlbSBkZWZhdWx0IHZhbHVlIHRvIGJlIHJldHVybmVkIHdoZW4gaXRlbSBub3QgZm91bmQgaW4gdGhlIGdyb3VwLlxuXHRcdCAqIEByZXR1cm4gbWl4ZWRcblx0XHQgKi9cblx0XHR0aGlzLmdldCA9IGZ1bmN0aW9uKCBrZXksIGRlZmF1bHRfdmFsICkge1xuXHRcdFx0dmFyIGRhdGEgPSBzZWxmLmdldEFsbCgpO1xuXHRcdFx0cmV0dXJuIGRhdGFbIGtleSBdID8gZGF0YVsga2V5IF0gOiBkZWZhdWx0X3ZhbDtcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIFN0b3JlIGFuIGl0ZW0gaW4gdGhlIGdyb3VwIGJ5IGtleS5cblx0XHQgKlxuXHRcdCAqIEBzaW5jZSAzLjM2LjBcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSBzdHJpbmcga2V5IEl0ZW0ga2V5IG5hbWUuXG5cdFx0ICogQHBhcmFtIG1peGVkIHZhbCBJdGVtIHZhbHVlXG5cdFx0ICogQHJldHVybiBvYmpcblx0XHQgKi9cblx0XHR0aGlzLnNldCA9IGZ1bmN0aW9uKCBrZXksIHZhbCApIHtcblx0XHRcdHZhciBkYXRhID0gc2VsZi5nZXRBbGwoKTtcblx0XHRcdGRhdGFbIGtleSBdID0gdmFsO1xuXHRcdFx0cmV0dXJuIHN0b3JlLnNldCggZ3JvdXAsIGRhdGEgKTtcblx0XHR9O1xuXHRcblx0fVxuXHRcblx0XHQvKipcblx0ICogU3R1ZGVudCBEYXNoYm9hcmQgcmVsYXRlZCBKU1xuXHQgKlxuXHQgKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuXHQgKlxuXHQgKiBAc2luY2UgMy43LjBcblx0ICogQHNpbmNlIDMuMTAuMCBCaW5kIGV2ZW50cyBvbiB0aGUgb3JkZXJzIHNjcmVlbi5cblx0ICogQHNpbmNlIFt2ZXJzaW9uXSBSZW1vdmVkIHJlZHVuZGFudCBwYXNzd29yZCB0b2dnbGUgbG9naWMgZm9yIGVkaXQgYWNjb3VudCBzY3JlZW4uXG5cdCAqIEB2ZXJzaW9uIFt2ZXJzaW9uXVxuXHQgKi9cblx0TExNUy5TdHVkZW50RGFzaGJvYXJkID0ge1xuXHRcblx0XHQvKipcblx0XHQgKiBTbHVnIGZvciB0aGUgY3VycmVudCBzY3JlZW4vZW5kcG9pbnRcblx0XHQgKlxuXHRcdCAqIEB0eXBlICB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdHNjcmVlbjogJycsXG5cdFxuXHRcdC8qKlxuXHRcdCAqIEluaXRcblx0XHQgKlxuXHRcdCAqIEBzaW5jZSAzLjcuMFxuXHRcdCAqIEBzaW5jZSAzLjEwLjAgVW5rbm93blxuXHRcdCAqIEBzaW5jZSBbdmVyc2lvbl0gUmVtb3ZlZCBwYXNzd29yZCB0b2dnbGUgbG9naWMuXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHZvaWRcblx0XHQgKi9cblx0XHRpbml0OiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRpZiAoICQoICcubGxtcy1zdHVkZW50LWRhc2hib2FyZCcgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHRoaXMuYmluZCgpO1xuXHRcdFx0XHRpZiAoICdvcmRlcnMnID09PSB0aGlzLmdldF9zY3JlZW4oKSApIHtcblx0XHRcdFx0XHR0aGlzLmJpbmRfb3JkZXJzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0fSxcblx0XG5cdFx0LyoqXG5cdFx0ICogQmluZCBET00gZXZlbnRzXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgMy43LjBcblx0XHQgKiBAc2luY2UgMy43LjQgVW5rbm93bi5cblx0XHQgKiBAc2luY2UgW3ZlcnNpb25dIFJlbW92ZWQgcGFzc3dvcmQgdG9nZ2xlIGxvZ2ljLlxuXHRcdCAqXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKi9cblx0XHRiaW5kOiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHQkKCAnLmxsbXMtZG9udXQnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdExMTVMuRG9udXQoICQoIHRoaXMgKSApO1xuXHRcdFx0fSApO1xuXHRcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBCaW5kIGV2ZW50cyByZWxhdGVkIHRvIHRoZSBvcmRlcnMgc2NyZWVuIG9uIHRoZSBkYXNoYm9hcmRcblx0XHQgKlxuXHRcdCAqIEBzaW5jZSAzLjEwLjBcblx0XHQgKlxuXHRcdCAqIEByZXR1cm4gdm9pZFxuXHRcdCAqL1xuXHRcdGJpbmRfb3JkZXJzOiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHQkKCAnI2xsbXMtY2FuY2VsLXN1YnNjcmlwdGlvbi1mb3JtJyApLm9uKCAnc3VibWl0JywgdGhpcy5vcmRlcl9jYW5jZWxfd2FybmluZyApO1xuXHRcdFx0JCggJyNsbG1zX3VwZGF0ZV9wYXltZW50X21ldGhvZCcgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoICdpbnB1dFtuYW1lPVwibGxtc19wYXltZW50X2dhdGV3YXlcIl06Y2hlY2tlZCcgKS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHRcdFx0XHQkKCB0aGlzICkuY2xvc2VzdCggJ2Zvcm0nICkuZmluZCggJy5sbG1zLXN3aXRjaC1wYXltZW50LXNvdXJjZS1tYWluJyApLnNsaWRlVG9nZ2xlKCAnMjAwJyApO1xuXHRcdFx0fSApO1xuXHRcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBHZXQgdGhlIGN1cnJlbnQgZGFzaGJvYXJkIGVuZHBvaW50L3RhYiBzbHVnXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgMy4xMC4wXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHZvaWRcblx0XHQgKi9cblx0XHRnZXRfc2NyZWVuOiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggISB0aGlzLnNjcmVlbiApIHtcblx0XHRcdFx0dGhpcy5zY3JlZW4gPSAkKCAnLmxsbXMtc3R1ZGVudC1kYXNoYm9hcmQnICkuYXR0ciggJ2RhdGEtY3VycmVudCcgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzLnNjcmVlbjtcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBTaG93IGEgY29uZmlybWF0aW9uIHdhcm5pbmcgd2hlbiBDYW5jZWwgU3Vic2NyaXB0aW9uIGZvcm0gaXMgc3VibWl0dGVkXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgMy4xMC4wXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gb2JqIGUgSlMgZXZlbnQgZGF0YS5cblx0XHQgKiBAcmV0dXJuIHZvaWRcblx0XHQgKi9cblx0XHRvcmRlcl9jYW5jZWxfd2FybmluZzogZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR2YXIgbXNnID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjYW5jZWwgeW91ciBzdWJzY3JpcHRpb24/JyApO1xuXHRcdFx0aWYgKCB3aW5kb3cuY29uZmlybSggTExNUy5sMTBuLnRyYW5zbGF0ZSggbXNnICkgKSApIHtcblx0XHRcdFx0JCggdGhpcyApLm9mZiggJ3N1Ym1pdCcsIHRoaXMub3JkZXJfY2FuY2VsX3dhcm5pbmcgKTtcblx0XHRcdFx0JCggdGhpcyApLnN1Ym1pdCgpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFxuXHR9O1xuXHRcblx0XHQvKiBnbG9iYWwgTExNUywgJCAqL1xuXHRcblx0LyoqXG5cdCAqIFVzZXIgZXZlbnQvaW50ZXJhY3Rpb24gdHJhY2tpbmcuXG5cdCAqXG5cdCAqIEBzaW5jZSAzLjM2LjBcblx0ICogQHNpbmNlIDMuMzYuMiBGaXggSlMgZXJyb3Igd2hlbiBzZXR0aW5ncyBhcmVuJ3QgbG9hZGVkLlxuXHQ8PDw8PDw8IEhFQURcblx0ICogQHNpbmNlIFt2ZXJzaW9uXSBTZXQgYHNldHRpbmdzYCBhcyBhbiBlbXB0eSBvYmplY3Qgd2hlbiBubyBzZXR0aW5ncyBzdXBwbGllZC5cblx0ICogICAgICAgICAgICAgICBPbmx5IGF0dGVtcHQgdG8gYWRkIGEgbm9uY2UgdG8gdGhlIGRhdGFzdG9yZSB3aGVuIGEgbm9uY2UgZXhpc3RzIGluIHRoZSBzZXR0aW5ncyBvYmplY3QuXG5cdD09PT09PT1cblx0ICogQHNpbmNlIDMuMzcuMiBXaGVuIGFkZGluZyBhbiBldmVudCB0byB0aGUgc3RvcmFlIGFsc28gbWFrZSBzdXJlIHRoZSBub25jZSBpcyBzZXQgZm9yIHNlcnZlci1zaWRlIHZlcmlmaWNhdGlvbi5cblx0Pj4+Pj4+PiA5MmY0NjM4OTcwNzk3NDBkMGJjODY4NTUxMDg4YTMxY2VjYjg1MGRmXG5cdCAqL1xuXHRMTE1TLlRyYWNraW5nID0gZnVuY3Rpb24oIHNldHRpbmdzICkge1xuXHRcblx0XHRzZXR0aW5ncyA9IHNldHRpbmdzIHx8IHt9O1xuXHRcblx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRzdG9yZSA9IG5ldyBMTE1TLlN0b3JhZ2UoICdsbG1zLXRyYWNraW5nJyApO1xuXHRcblx0XHRzZXR0aW5ncyA9ICdzdHJpbmcnID09PSB0eXBlb2Ygc2V0dGluZ3MgPyBKU09OLnBhcnNlKCBzZXR0aW5ncyApIDogc2V0dGluZ3M7XG5cdFxuXHRcdC8qKlxuXHRcdCAqIEluaXRpYWxpemUgLyBCaW5kIGFsbCB0cmFja2luZyBldmVudCBsaXN0ZW5lcnMuXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgMy4zNi4wXG5cdFx0ICogQHNpbmNlIFt2ZXJzaW9uXSBPbmx5IGF0dGVtcHQgdG8gYWRkIGEgbm9uY2UgdG8gdGhlIGRhdGFzdG9yZSB3aGVuIGEgbm9uY2UgZXhpc3RzIGluIHRoZSBzZXR0aW5ncyBvYmplY3QuXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHt2b2lkfVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFxuXHRcdFx0Ly8gU2V0IHRoZSBub25jZSBmb3Igc2VydmVyLXNpZGUgdmVyaWZpY2F0aW9uLlxuXHRcdFx0aWYgKCBzZXR0aW5ncy5ub25jZSApIHtcblx0XG5cdFx0XHRcdHN0b3JlLnNldCggJ25vbmNlJywgc2V0dGluZ3Mubm9uY2UgKTtcblx0XG5cdFx0XHR9XG5cdFxuXHRcdFx0c2VsZi5hZGRFdmVudCggJ3BhZ2UubG9hZCcgKTtcblx0XG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2JlZm9yZXVubG9hZCcsIG9uQmVmb3JlVW5sb2FkICk7XG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ3VubG9hZCcsIG9uVW5sb2FkICk7XG5cdFxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3Zpc2liaWxpdHljaGFuZ2UnLCBvblZpc2liaWxpdHlDaGFuZ2UgKTtcblx0XG5cdFx0fTtcblx0XG5cdFx0LyoqXG5cdFx0ICogQWRkIGFuIGV2ZW50LlxuXHRcdCAqXG5cdFx0ICogQHNpbmNlIDMuMzYuMFxuXHRcdCAqIEBzaW5jZSAzLjM2LjIgRml4IGVycm9yIHdoZW4gc2V0dGluZ3MgYXJlbid0IGxvYWRlZC5cblx0XHQgKiBAc2luY2UgMy4zNy4yIEFsd2F5cyBtYWtlIHN1cmUgdGhlIG5vbmNlIGlzIHNldCBmb3Igc2VydmVyLXNpZGUgdmVyaWZpY2F0aW9uLlxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIHN0cmluZ3xvYmogZXZlbnQgRXZlbnQgSWQgKHR5cGUuZXZlbnQpIG9yIGEgZnVsbCBldmVudCBvYmplY3QgZnJvbSBgdGhpcy5tYWtlRXZlbnRPYmooKWAuXG5cdFx0ICogQHBhcmFtIGludCBhcmdzIE9wdGlvbmFsIGFkZGl0aW9uYWwgYXJndW1lbnRzIHRvIHBhc3MgdG8gYHRoaXMubWFrZUV2ZW50T2JqKClgLlxuXHRcdCAqIEByZXR1cm4ge3ZvaWR9XG5cdFx0ICovXG5cdFx0dGhpcy5hZGRFdmVudCA9IGZ1bmN0aW9uKCBldmVudCwgYXJncyApIHtcblx0XG5cdFx0XHRhcmdzICA9IGFyZ3MgfHwge307XG5cdFx0XHRpZiAoICdzdHJpbmcnID09PSB0eXBlb2YgZXZlbnQgKSB7XG5cdFx0XHRcdGFyZ3MuZXZlbnQgPSBldmVudDtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBJZiB0aGUgZXZlbnQgaXNuJ3QgcmVnaXN0ZXJlZCBpbiB0aGUgc2V0dGluZ3MgZG9uJ3QgcHJvY2VlZC5cblx0XHRcdGlmICggIXNldHRpbmdzLmV2ZW50cyB8fCAtMSA9PT0gc2V0dGluZ3MuZXZlbnRzLmluZGV4T2YoIGFyZ3MuZXZlbnQgKSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdGV2ZW50ID0gc2VsZi5tYWtlRXZlbnRPYmooIGFyZ3MgKTtcblx0XG5cdFx0XHR2YXIgYWxsID0gc3RvcmUuZ2V0KCAnZXZlbnRzJywgW10gKTtcblx0XHRcdGFsbC5wdXNoKCBldmVudCApO1xuXHRcdFx0c3RvcmUuc2V0KCAnZXZlbnRzJywgYWxsICk7XG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhlIG5vbmNlIGlzIHNldCBmb3Igc2VydmVyLXNpZGUgdmVyaWZpY2F0aW9uLlxuXHRcdFx0c3RvcmUuc2V0KCAnbm9uY2UnLCBzZXR0aW5ncy5ub25jZSApO1xuXHRcblx0XHR9XG5cdFxuXHRcdC8qKlxuXHRcdCAqIFJldHJpZXZlIGluaXRpYWxpemF0aW9uIHNldHRpbmdzLlxuXHRcdCAqXG5cdFx0ICogQHNpbmNlIDMuMzYuMFxuXHRcdCAqXG5cdFx0ICogQHJldHVybiBvYmpcblx0XHQgKi9cblx0XHR0aGlzLmdldFNldHRpbmdzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gc2V0dGluZ3M7XG5cdFx0fVxuXHRcblx0XHQvKipcblx0XHQgKiBDcmVhdGUgYW4gZXZlbnQgb2JqZWN0IHN1aXRhYmxlIHRvIHNhdmUgYXMgYW4gZXZlbnQuXG5cdFx0ICpcblx0XHQgKiBAc2luY2UgMy4zNi4wXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gb2JqIGV2ZW50IHtcblx0XHQgKiAgICAgRXZlbnQgaGFzaFxuXHRcdCAqXG5cdFx0ICogICAgIEBwYXJhbSB7c3RyaW5nfSBldmVudCAoUmVxdWlyZWQpIEV2ZW50IElELCBlZzogXCJwYWdlLmxvYWRcIi5cblx0XHQgKiAgICAgQHBhcmFtIHt1cmx9IHVybCBFdmVudCBVUkwuIChPcHRpb25hbCwgYWRkZWQgYXV0b21hdGljYWxseSkgU3RvcmVkIGFzIG1ldGFkYXRhIGFuZCB1c2VkIHRvIGluZmVyIGFuIG9iamVjdF9pZCBmb3IgcG9zdCBldmVudHMuXG5cdFx0ICogICAgIEBwYXJhbSB7dGltZX0gZmxvYXQgKE9wdGlvbmFsLCBhZGRlZCBhdXRvbWF0aWNhbGx5KSBUaW1lc3RhbXAgKGluIG1pbGxpc2Vjb25kcykuIFVzZWQgZm9yIHRoZSBldmVudCBjcmVhdGlvbiBkYXRlLlxuXHRcdCAqICAgICBAcGFyYW0ge2ludH0gb2JqX2lkIChPcHRpb25hbCkuIFRoZSBvYmplY3QgSUQuIEluZmVycmVkIGF1dG9tYXRpY2FsbHkgdmlhIGB1cmxgIGlmIG5vdCBwcm92aWRlZC5cblx0XHQgKiAgICAgQHBhcmFtIHtvYmp9IG1ldGEgKE9wdGlvbmFsKSBIYXNoIG9mIG1ldGFkYXRhIHRvIHN0b3JlIHdpdGggdGhlIGV2ZW50LlxuXHRcdCAqIH1cblx0XHQgKiBAcmV0dXJuIG9ialxuXHRcdCAqL1xuXHRcdHRoaXMubWFrZUV2ZW50T2JqID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0cmV0dXJuIE9iamVjdC5hc3NpZ24oIGV2ZW50LCB7XG5cdFx0XHRcdHVybDogd2luZG93LmxvY2F0aW9uLmhyZWYsXG5cdFx0XHRcdHRpbWU6IE1hdGgucm91bmQoIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCApLFxuXHRcdFx0fSApO1xuXHRcdH1cblx0XG5cdFxuXHRcdC8qKlxuXHRcdCAqIFJlbW92ZSB0aGUgdmlzaWJpbGl0eSBjaGFuZ2UgZXZlbnQgbGlzdGVuZXIgb24gd2luZG93LmJlZm9yZXVubG9hZFxuXHRcdCAqXG5cdFx0ICogUHJldmVudHMgYWN0dWFsIHVubG9hZGluZyBmcm9tIHJlY29yZGluZyBhIGJsdXIgZXZlbnQgZnJvbSB0aGUgdmlzaWJpbGl0eSBjaGFuZ2UgbGlzdGVuZXJcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSBvYmogZSBKUyBldmVudCBvYmplY3QuXG5cdFx0ICogQHJldHVybiB2b2lkXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gb25CZWZvcmVVbmxvYWQoIGUgKSB7XG5cdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAndmlzaWJpbGl0eWNoYW5nZScsIG9uVmlzaWJpbGl0eUNoYW5nZSApO1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogUmVjb3JkIGEgYHBhZ2UuZXhpdGAgZXZlbnQgb24gd2luZG93LnVubG9hZC5cblx0XHQgKlxuXHRcdCAqIEBzaW5jZSAzLjM2LjBcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSBvYmogZSBKUyBldmVudCBvYmplY3QuXG5cdFx0ICogQHJldHVybiB2b2lkXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gb25VbmxvYWQoIGUgKSB7XG5cdFx0XHRzZWxmLmFkZEV2ZW50KCAncGFnZS5leGl0JyApO1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdFx0ICogUmVjb3JkIGBwYWdlLmJsdXJgIGFuZCBgcGFnZS5mb2N1c2AgZXZlbnRzIHZpYSBkb2N1bWVudC52aXNpbGliaXR5Y2hhbmdlIGV2ZW50cy5cblx0XHQgKlxuXHRcdCAqIEBzaW5jZSAzLjM2LjBcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSBvYmogZSBKUyBldmVudCBvYmplY3QuXG5cdFx0ICogQHJldHVybiB2b2lkXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gb25WaXNpYmlsaXR5Q2hhbmdlKCBlICkge1xuXHRcblx0XHRcdHZhciBldmVudCA9IGRvY3VtZW50LmhpZGRlbiA/ICdwYWdlLmJsdXInIDogJ3BhZ2UuZm9jdXMnO1xuXHRcdFx0c2VsZi5hZGRFdmVudCggZXZlbnQgKTtcblx0XG5cdFx0fVxuXHRcblx0XHQvLyBJbml0aWFsaXplIG9uIHRoZSBmcm9udGVuZCBvbmx5LlxuXHRcdGlmICggISAkKCAnYm9keScgKS5oYXNDbGFzcyggJ3dwLWFkbWluJyApICkge1xuXHRcdFx0aW5pdCgpO1xuXHRcdH1cblx0XG5cdH07XG5cdFxuXHRsbG1zLnRyYWNraW5nID0gbmV3IExMTVMuVHJhY2tpbmcoIGxsbXMudHJhY2tpbmcgKTtcblx0XG5cdFx0LyoqXG5cdCAqIFJlc3QgTWV0aG9kc1xuXHQgKiBNYW5hZ2VzIFVSTCBhbmQgUmVzdCBvYmplY3QgcGFyc2luZ1xuXHQgKlxuXHQgKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuXHQgKlxuXHQgKiBAc2luY2UgVW5rbm93blxuXHQgKiBAdmVyc2lvbiAgVW5rbm93blxuXHQgKi9cblx0XG5cdExMTVMuUmVzdCA9IHtcblx0XG5cdFx0LyoqXG5cdFx0ICogSW5pdFxuXHRcdCAqIGxvYWRzIGNsYXNzIG1ldGhvZHNcblx0XHQgKi9cblx0XHRpbml0OiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuYmluZCgpO1xuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgTWV0aG9kXG5cdFx0ICogSGFuZGxlcyBkb20gYmluZGluZyBvbiBsb2FkXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cblx0XHQgKi9cblx0XHRiaW5kOiBmdW5jdGlvbigpIHtcblx0XHR9LFxuXHRcblx0XHQvKipcblx0XHQgKiBTZWFyY2hlcyBmb3Igc3RyaW5nIG1hdGNoZXMgaW4gdXJsIHBhdGhcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAge0FycmF5fSAgc3RyaW5ncyBbQXJyYXkgb2Ygc3RyaW5ncyB0byBzZWFyY2ggZm9yIG1hdGNoZXNdXG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgICBbV2FzIGEgbWF0Y2ggZm91bmQ/XVxuXHRcdCAqL1xuXHRcdGlzX3BhdGg6IGZ1bmN0aW9uKCBzdHJpbmdzICkge1xuXHRcblx0XHRcdHZhciBwYXRoX2V4aXN0cyA9IGZhbHNlLFxuXHRcdFx0XHR1cmwgICAgICAgICA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXHRcblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBpKysgKSB7XG5cdFxuXHRcdFx0XHRpZiAoIHVybC5zZWFyY2goIHN0cmluZ3NbaV0gKSA+IDAgJiYgISBwYXRoX2V4aXN0cyApIHtcblx0XG5cdFx0XHRcdFx0cGF0aF9leGlzdHMgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHBhdGhfZXhpc3RzO1xuXHRcdH0sXG5cdFxuXHRcdC8qKlxuXHRcdCAqIFJldHJpZXZlcyBxdWVyeSB2YXJpYWJsZXNcblx0XHQgKlxuXHRcdCAqIEByZXR1cm4ge1tBcnJheV19IFthcnJheSBvYmplY3Qgb2YgcXVlcnkgdmFyaWFibGUga2V5PT52YWx1ZSBwYWlyc11cblx0XHQgKi9cblx0XHRnZXRfcXVlcnlfdmFyczogZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0dmFyIHZhcnMgICA9IFtdLCBoYXNoLFxuXHRcdFx0XHRoYXNoZXMgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zbGljZSggd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZiggJz8nICkgKyAxICkuc3BsaXQoICcmJyApO1xuXHRcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgaGFzaGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGhhc2ggPSBoYXNoZXNbaV0uc3BsaXQoICc9JyApO1xuXHRcdFx0XHR2YXJzLnB1c2goIGhhc2hbMF0gKTtcblx0XHRcdFx0dmFyc1toYXNoWzBdXSA9IGhhc2hbMV07XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHZhcnM7XG5cdFx0fVxuXHRcblx0fTtcblx0XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIGFsbCBjbGFzc2VzIHdpdGhpbiB0aGUgTExNUyBOYW1lc3BhY2Vcblx0ICpcblx0ICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXG5cdCAqL1xuXHRMTE1TLmluaXQgPSBmdW5jdGlvbigpIHtcblxuXHRcdGZvciAodmFyIGZ1bmMgaW4gTExNUykge1xuXG5cdFx0XHRpZiAoIHR5cGVvZiBMTE1TW2Z1bmNdID09PSAnb2JqZWN0JyAmJiBMTE1TW2Z1bmNdICE9PSBudWxsICkge1xuXG5cdFx0XHRcdGlmICggTExNU1tmdW5jXS5pbml0ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRpZiAoIHR5cGVvZiBMTE1TW2Z1bmNdLmluaXQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdExMTVNbZnVuY10uaW5pdCgpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgdGhlIGN1cnJlbnQgZGV2aWNlIGlzIHRvdWNoLWVuYWJsZWRcblx0ICpcblx0ICogQHNlZSAgICAgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ4MTk4ODYvNDAwNTY4IFsyMDE4IFVwZGF0ZV1cblx0ICogQHJldHVybiAge0Jvb2xlYW59XG5cdCAqIEBzaW5jZSAgIDMuMjQuM1xuXHQgKiBAdmVyc2lvbiAzLjI0LjNcblx0ICovXG5cdExMTVMuaXNfdG91Y2hfZGV2aWNlID0gZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgcHJlZml4ZXMgPSAnIC13ZWJraXQtIC1tb3otIC1vLSAtbXMtICcuc3BsaXQoICcgJyApO1xuXHRcdHZhciBtcSAgICAgICA9IGZ1bmN0aW9uKCBxdWVyeSApIHtcblx0XHRcdHJldHVybiB3aW5kb3cubWF0Y2hNZWRpYSggcXVlcnkgKS5tYXRjaGVzO1xuXHRcdH1cblxuXHRcdGlmICggKCAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgKSB8fCB3aW5kb3cuRG9jdW1lbnRUb3VjaCAmJiBkb2N1bWVudCBpbnN0YW5jZW9mIERvY3VtZW50VG91Y2ggKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBpbmNsdWRlIHRoZSAnaGVhcnR6JyBhcyBhIHdheSB0byBoYXZlIGEgbm9uIG1hdGNoaW5nIE1RIHRvIGhlbHAgdGVybWluYXRlIHRoZSBqb2luXG5cdFx0Ly8gaHR0cHM6Ly9naXQuaW8vdnpuRkhcblx0XHR2YXIgcXVlcnkgPSBbJygnLCBwcmVmaXhlcy5qb2luKCAndG91Y2gtZW5hYmxlZCksKCcgKSwgJ2hlYXJ0eicsICcpJ10uam9pbiggJycgKTtcblx0XHRyZXR1cm4gbXEoIHF1ZXJ5ICk7XG5cblx0fTtcblxuXHQvKipcblx0ICogV2FpdCBmb3IgbWF0Y2hIZWlnaHQgdG8gbG9hZFxuXHQgKlxuXHQgKiBAcGFyYW0gICAge0Z1bmN0aW9ufSAgY2IgIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJ1biB3aGVuIG1hdGNoaGVpZ2h0IGlzIHJlYWR5XG5cdCAqIEByZXR1cm4gICB2b2lkXG5cdCAqIEBzaW5jZSAgICAzLjAuMFxuXHQgKiBAdmVyc2lvbiAgMy4xNi42XG5cdCAqL1xuXHRMTE1TLndhaXRfZm9yX21hdGNoSGVpZ2h0ID0gZnVuY3Rpb24oIGNiICkge1xuXHRcdHRoaXMud2FpdF9mb3IoIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuICggdW5kZWZpbmVkICE9PSAkLmZuLm1hdGNoSGVpZ2h0ICk7XG5cdFx0fSwgY2IgKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBXYWl0IGZvciB3ZWJ1aVBvcG92ZXIgdG8gbG9hZFxuXHQgKlxuXHQgKiBAcGFyYW0gICAge0Z1bmN0aW9ufSAgY2IgIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJ1biB3aGVuIG1hdGNoaGVpZ2h0IGlzIHJlYWR5XG5cdCAqIEByZXR1cm4gICB2b2lkXG5cdCAqIEBzaW5jZSAgICAzLjkuMVxuXHQgKiBAdmVyc2lvbiAgMy4xNi42XG5cdCAqL1xuXHRMTE1TLndhaXRfZm9yX3BvcG92ZXIgPSBmdW5jdGlvbiggY2IgKSB7XG5cdFx0dGhpcy53YWl0X2ZvciggZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gKCB1bmRlZmluZWQgIT09ICQuZm4ud2VidWlQb3BvdmVyICk7XG5cdFx0fSwgY2IgKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBXYWl0IGZvciBhIGRlcGVuZGVuY3kgdG8gbG9hZCBhbmQgdGhlbiBydW4gYSBjYWxsYmFjayBvbmNlIGl0IGhhc1xuXHQgKiBUZW1wb3JhcnkgZml4IGZvciBhIGxlc3MtdGhhbi1vcHRpbWFsIGFzc2V0cyBsb2FkaW5nIGZ1bmN0aW9uIG9uIHRoZSBQSFAgc2lkZSBvZiB0aGluZ3Ncblx0ICpcblx0ICogQHBhcmFtICAgIHtGdW5jdGlvbn0gICAgdGVzdCAgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0cnV0aHkgaWYgdGhlIGRlcGVuZGVuY3kgaXMgbG9hZGVkXG5cdCAqIEBwYXJhbSAgICB7RnVuY3Rpb259ICAgIGNiICAgIGEgY2FsbGJhY2sgZnVuY3Rpb24gZXhlY3V0ZWQgb25jZSB0aGUgZGVwZW5kZW5jeSBpcyBsb2FkZWRcblx0ICogQHJldHVybiAgIHZvaWRcblx0ICogQHNpbmNlICAgIDMuOS4xXG5cdCAqIEB2ZXJzaW9uICAzLjkuMVxuXHQgKi9cblx0TExNUy53YWl0X2ZvciA9IGZ1bmN0aW9uKCB0ZXN0LCBjYiApIHtcblxuXHRcdHZhciBjb3VudGVyID0gMCxcblx0XHRcdGludGVydmFsO1xuXG5cdFx0aW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIGlmIHdlIGdldCB0byAzMCBzZWNvbmRzIGxvZyBhbiBlcnJvciBtZXNzYWdlXG5cdFx0XHRpZiAoIGNvdW50ZXIgPj0gMzAwICkge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCAnY291bGQgbm90IGxvYWQgZGVwZW5kZW5jeScgKTtcblxuXHRcdFx0XHQvLyBpZiB3ZSBjYW4ndCBhY2Nlc3MgeWUsIGluY3JlbWVudCBhbmQgd2FpdC4uLlxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBiaW5kIHRoZSBldmVudHMsIHdlJ3JlIGdvb2QhXG5cdFx0XHRcdGlmICggdGVzdCgpICkge1xuXG5cdFx0XHRcdFx0Y2IoKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coICd3YWl0aW5nLi4uJyApO1xuXHRcdFx0XHRcdGNvdW50ZXIrKztcblx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGNsZWFySW50ZXJ2YWwoIGludGVydmFsICk7XG5cblx0XHR9LCAxMDAgKTtcblxuXHR9O1xuXG5cdExMTVMuaW5pdCggJCApO1xuXG59KSggalF1ZXJ5ICk7XG4iLCIvKipcbiAqIEZyb250IEVuZCBBY2hpZXZlbWVudHNcbiAqXG4gKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuICpcbiAqIEBzaW5jZSAgICAzLjE0LjBcbiAqIEB2ZXJzaW9uICAzLjE0LjBcbiAqL1xuXG5MTE1TLkFjaGlldmVtZW50cyA9IHtcblxuXHQvKipcblx0ICogSW5pdFxuXHQgKlxuXHQgKiBAcmV0dXJuICAgdm9pZFxuXHQgKiBAc2luY2UgICAgMy4xNC4wXG5cdCAqIEB2ZXJzaW9uICAzLjE0LjBcblx0ICovXG5cdGluaXQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0aWYgKCAkKCAnLmxsbXMtYWNoaWV2ZW1lbnQnICkgKSB7XG5cdFx0XHQkKCBkb2N1bWVudCApLm9uKCAncmVhZHknLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5iaW5kKCk7XG5cdFx0XHRcdHNlbGYubWF5YmVfb3BlbigpO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBCaW5kIERPTSBldmVudHNcblx0ICpcblx0ICogQHJldHVybiAgIHZvaWRcblx0ICogQHNpbmNlICAgIDMuMTQuMFxuXHQgKiBAdmVyc2lvbiAgMy4xNC4wXG5cdCAqL1xuXHRiaW5kOiBmdW5jdGlvbigpIHtcblxuXHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdCQoICcubGxtcy1hY2hpZXZlbWVudCcgKS5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0c2VsZi5jcmVhdGVfbW9kYWwoICQoIHRoaXMgKSApO1xuXG5cdFx0fSApO1xuXG5cdFx0JCggJy5sbG1zLWFjaGlldmVtZW50JyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyICR0aGlzICA9ICQoIHRoaXMgKSxcblx0XHRcdFx0aWQgICAgID0gJ2FjaGlldmVtZW50LScgKyAkdGhpcy5hdHRyKCAnZGF0YS1pZCcgKSxcblx0XHRcdFx0JG1vZGFsID0gJCggJyMnICsgaWQgKTtcblxuXHRcdFx0aWYgKCAhICRtb2RhbC5sZW5ndGggKSB7XG5cdFx0XHRcdHNlbGYuY3JlYXRlX21vZGFsKCAkdGhpcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQkbW9kYWwuaXppTW9kYWwoICdvcGVuJyApO1xuXG5cdFx0fSApO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgbW9kYWwgYSBtb2RhbCBmb3IgYW4gYWNoaWV2ZW1lbnRcblx0ICpcblx0ICogQHBhcmFtICAgIG9iaiAgICRlbCAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgbW9kYWwgY2FyZFxuXHQgKiBAcmV0dXJuICAgdm9pZFxuXHQgKiBAc2luY2UgICAgMy4xNC4wXG5cdCAqIEB2ZXJzaW9uICAzLjE0LjBcblx0ICovXG5cdGNyZWF0ZV9tb2RhbDogZnVuY3Rpb24oICRlbCApIHtcblxuXHRcdHZhciBpZCAgICAgPSAnYWNoaWV2ZW1lbnQtJyArICRlbC5hdHRyKCAnZGF0YS1pZCcgKSxcblx0XHRcdCRtb2RhbCA9ICQoICcjJyArIGlkICk7XG5cblx0XHRpZiAoICEgJG1vZGFsLmxlbmd0aCApIHtcblx0XHRcdCRtb2RhbCA9ICQoICc8ZGl2IGNsYXNzPVwibGxtcy1hY2hpZXZlbWVudC1tb2RhbFwiIGlkPVwiJyArIGlkICsgJ1wiIC8+JyApO1xuXHRcdFx0JCggJ2JvZHknICkuYXBwZW5kKCAkbW9kYWwgKTtcblx0XHR9XG5cblx0XHQkbW9kYWwuaXppTW9kYWwoIHtcblx0XHRcdGhlYWRlckNvbG9yOiAnIzNhM2EzYScsXG5cdFx0XHRncm91cDogJ2FjaGlldmVtZW50cycsXG5cdFx0XHRoaXN0b3J5OiB0cnVlLFxuXHRcdFx0bG9vcDogdHJ1ZSxcblx0XHRcdG92ZXJsYXlDb2xvcjogJ3JnYmEoIDAsIDAsIDAsIDAuNiApJyxcblx0XHRcdHRyYW5zaXRpb25JbjogJ2ZhZGVJbkRvd24nLFxuXHRcdFx0dHJhbnNpdGlvbk91dDogJ2ZhZGVPdXREb3duJyxcblx0XHRcdHdpZHRoOiAzNDAsXG5cdFx0XHRvbk9wZW5pbmc6IGZ1bmN0aW9uKCBtb2RhbCApIHtcblxuXHRcdFx0XHRtb2RhbC5zZXRUaXRsZSggJGVsLmZpbmQoICcubGxtcy1hY2hpZXZlbWVudC10aXRsZScgKS5odG1sKCkgKTtcblx0XHRcdFx0bW9kYWwuc2V0U3VidGl0bGUoICRlbC5maW5kKCAnLmxsbXMtYWNoaWV2ZW1lbnQtZGF0ZScgKS5odG1sKCkgKTtcblx0XHRcdFx0bW9kYWwuc2V0Q29udGVudCggJzxkaXYgY2xhc3M9XCJsbG1zLWFjaGlldmVtZW50XCI+JyArICRlbC5odG1sKCkgKyAnPC9kaXY+JyApO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRvbkNsb3Npbmc6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoICcnLCBkb2N1bWVudC50aXRsZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCApO1xuXHRcdFx0fSxcblxuXHRcdH0gKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBPbiBwYWdlIGxvYWQsIG9wZW5zIGEgbW9kYWwgaWYgdGhlIFVSTCBjb250YWlucyBhbiBhY2hpZXZlbWVudCBpbiB0aGUgbG9jYXRpb24gaGFzaFxuXHQgKlxuXHQgKiBAcmV0dXJuICAgdm9pZFxuXHQgKiBAc2luY2UgICAgMy4xNC4wXG5cdCAqIEB2ZXJzaW9uICAzLjE0LjBcblx0ICovXG5cdG1heWJlX29wZW46IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaDtcblx0XHRpZiAoIGhhc2ggJiYgLTEgIT09IGhhc2guaW5kZXhPZiggJ2FjaGlldmVtZW50LScgKSApIHtcblx0XHRcdCQoICdhW2hyZWY9XCInICsgaGFzaCArICdcIl0nICkuZmlyc3QoKS50cmlnZ2VyKCAnY2xpY2snICk7XG5cdFx0fVxuXG5cdH1cblxufTtcbiIsIi8qKlxuICogTWFpbiBBamF4IGNsYXNzXG4gKiBIYW5kbGVzIFByaW1hcnkgQWpheCBjb25uZWN0aW9uXG4gKlxuICogQHBhY2thZ2UgTGlmdGVyTE1TL1NjcmlwdHNcbiAqXG4gKiBAc2luY2UgVW5rbm93blxuICogQHZlcnNpb24gVW5rbm93blxuICovXG5cbkxMTVMuQWpheCA9IHtcblxuXHQvKipcblx0ICogVXJsXG5cdCAqXG5cdCAqIEB0eXBlIHtTdHJpbmd9XG5cdCAqL1xuXHR1cmw6IHdpbmRvdy5hamF4dXJsIHx8IHdpbmRvdy5sbG1zLmFqYXh1cmwsXG5cblx0LyoqXG5cdCAqIFR5cGVcblx0ICpcblx0ICogQHR5cGUge1t0eXBlXX1cblx0ICovXG5cdHR5cGU6ICdwb3N0JyxcblxuXHQvKipcblx0ICogRGF0YVxuXHQgKlxuXHQgKiBAdHlwZSB7W3R5cGVdfVxuXHQgKi9cblx0ZGF0YTogW10sXG5cblx0LyoqXG5cdCAqIENhY2hlXG5cdCAqXG5cdCAqIEB0eXBlIHtbdHlwZV19XG5cdCAqL1xuXHRjYWNoZTogZmFsc2UsXG5cblx0LyoqXG5cdCAqIERhdGFUeXBlXG5cdCAqIGRlZmF1bHRlZCB0byBqc29uXG5cdCAqXG5cdCAqIEB0eXBlIHtTdHJpbmd9XG5cdCAqL1xuXHRkYXRhVHlwZTogJ2pzb24nLFxuXG5cdC8qKlxuXHQgKiBBc3luY1xuXHQgKiBkZWZhdWx0IHRvIGZhbHNlXG5cdCAqXG5cdCAqIEB0eXBlIHtCb29sZWFufVxuXHQgKi9cblx0YXN5bmM6IHRydWUsXG5cblx0cmVzcG9uc2U6W10sXG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemUgQWpheCBtZXRob2RzXG5cdCAqIGxvYWRzIGNsYXNzIG1ldGhvZHNcblx0ICovXG5cdGluaXQ6IGZ1bmN0aW9uKG9iaikge1xuXG5cdFx0Ly8gaWYgb2JqIGlzIG5vdCBvZiB0eXBlIG9iamVjdCBvciBudWxsIHJldHVybiBmYWxzZTtcblx0XHRpZiAoIG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBzZXQgb2JqZWN0IGRlZmF1bHRzIGlmIHZhbHVlcyBhcmUgbm90IHN1cHBsaWVkXG5cdFx0b2JqLnVybCAgICAgID0gJ3VybCcgICAgICAgICBpbiBvYmogPyBvYmoudXJsIDogdGhpcy51cmw7XG5cdFx0b2JqLnR5cGUgICAgID0gJ3R5cGUnIFx0XHRpbiBvYmogPyBvYmoudHlwZSA6IHRoaXMudHlwZTtcblx0XHRvYmouZGF0YSAgICAgPSAnZGF0YScgXHRcdGluIG9iaiA/IG9iai5kYXRhIDogdGhpcy5kYXRhO1xuXHRcdG9iai5jYWNoZSAgICA9ICdjYWNoZScgXHRcdGluIG9iaiA/IG9iai5jYWNoZSA6IHRoaXMuY2FjaGU7XG5cdFx0b2JqLmRhdGFUeXBlID0gJ2RhdGFUeXBlJ1x0aW4gb2JqID8gb2JqLmRhdGFUeXBlIDogdGhpcy5kYXRhVHlwZTtcblx0XHRvYmouYXN5bmMgICAgPSAnYXN5bmMnXHRcdGluIG9iaiA/IG9iai5hc3luYyA6IHRoaXMuYXN5bmM7XG5cblx0XHQvLyBhZGQgbm9uY2UgdG8gZGF0YSBvYmplY3Rcblx0XHRvYmouZGF0YS5fYWpheF9ub25jZSA9IHdwX2FqYXhfZGF0YS5ub25jZTtcblxuXHRcdC8vIGFkZCBwb3N0IGlkIHRvIGRhdGEgb2JqZWN0XG5cdFx0dmFyICRSICAgICAgICAgICA9IExMTVMuUmVzdCxcblx0XHRxdWVyeV92YXJzICAgICAgID0gJFIuZ2V0X3F1ZXJ5X3ZhcnMoKTtcblx0XHRvYmouZGF0YS5wb3N0X2lkID0gJ3Bvc3QnIGluIHF1ZXJ5X3ZhcnMgPyBxdWVyeV92YXJzLnBvc3QgOiBudWxsO1xuXHRcdGlmICggISBvYmouZGF0YS5wb3N0X2lkICYmICQoICdpbnB1dCNwb3N0X0lEJyApLmxlbmd0aCApIHtcblx0XHRcdG9iai5kYXRhLnBvc3RfaWQgPSAkKCAnaW5wdXQjcG9zdF9JRCcgKS52YWwoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gb2JqO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBDYWxsXG5cdCAqIENhbGxlZCBieSBleHRlcm5hbCBjbGFzc2VzXG5cdCAqIFNldHMgdXAgalF1ZXJ5IEFqYXggb2JqZWN0XG5cdCAqXG5cdCAqIEBwYXJhbSAge1tvYmplY3RdfSBbb2JqZWN0IG9mIGFqYXggc2V0dGluZ3NdXG5cdCAqIEByZXR1cm4ge1ttaXhlZF19IFtmYWxzZSBpZiBub3Qgb2JqZWN0IG9yIHRoaXNdXG5cdCAqL1xuXHRjYWxsOiBmdW5jdGlvbihvYmopIHtcblxuXHRcdC8vIGdldCBkZWZhdWx0IHZhcmlhYmxlcyBpZiBub3QgaW5jbHVkZWQgaW4gY2FsbFxuXHRcdHZhciBzZXR0aW5ncyA9IHRoaXMuaW5pdCggb2JqICk7XG5cblx0XHQvLyBpZiBpbml0IHJldHVybiBhIHJlc3BvbnNlIG9mIGZhbHNlXG5cdFx0aWYgKCAhIHNldHRpbmdzKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucmVxdWVzdCggc2V0dGluZ3MgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBDYWxscyBqUXVlcnkgQWpheCBvbiBzZXR0aW5ncyBvYmplY3Rcblx0ICpcblx0ICogQHJldHVybiB7W29iamVjdF19IFt0aGlzXVxuXHQgKi9cblx0cmVxdWVzdDogZnVuY3Rpb24oc2V0dGluZ3MpIHtcblxuXHRcdCQuYWpheCggc2V0dGluZ3MgKTtcblxuXHRcdHJldHVybiB0aGlzO1xuXG5cdH1cblxufTtcbiIsIi8qKlxuICogQ3JlYXRlIGEgRG9udXQgQ2hhcnRcbiAqXG4gKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuICpcbiAqIEBzaW5jZSAgICAzLjkuMFxuICogQHZlcnNpb24gIDMuOS4wXG4gKlxuICogQGxpbmsgIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2pvZXlpbmJveC84MjA1OTYyXG4gKlxuICogQHBhcmFtICAgIG9iaiAgICRlbCAgalF1ZXJ5IGVsZW1lbnQgdG8gZHJhdyBhIGNoYXJ0IHdpdGhpblxuICovXG5cbkxMTVMuRG9udXQgPSBmdW5jdGlvbiggJGVsICkge1xuXG5cdGZ1bmN0aW9uIERvbnV0KG9wdGlvbnMpIHtcblxuXHRcdHRoaXMuc2V0dGluZ3MgPSAkLmV4dGVuZCgge1xuXHRcdFx0ZWxlbWVudDogb3B0aW9ucy5lbGVtZW50LFxuXHRcdFx0cGVyY2VudDogMTAwXG5cdFx0fSwgb3B0aW9ucyApO1xuXG5cdFx0dGhpcy5jaXJjbGUgICAgICAgICAgICAgICAgPSB0aGlzLnNldHRpbmdzLmVsZW1lbnQuZmluZCggJ3BhdGgnICk7XG5cdFx0dGhpcy5zZXR0aW5ncy5zdHJva2Vfd2lkdGggPSBwYXJzZUludCggdGhpcy5jaXJjbGUuY3NzKCAnc3Ryb2tlLXdpZHRoJyApICk7XG5cdFx0dGhpcy5yYWRpdXMgICAgICAgICAgICAgICAgPSAoIHBhcnNlSW50KCB0aGlzLnNldHRpbmdzLmVsZW1lbnQuY3NzKCAnd2lkdGgnICkgKSAtIHRoaXMuc2V0dGluZ3Muc3Ryb2tlX3dpZHRoICkgLyAyO1xuXHRcdHRoaXMuYW5nbGUgICAgICAgICAgICAgICAgID0gLTk3LjU7IC8vIE9yaWdpbiBvZiB0aGUgZHJhdyBhdCB0aGUgdG9wIG9mIHRoZSBjaXJjbGVcblx0XHR0aGlzLmkgICAgICAgICAgICAgICAgICAgICA9IE1hdGgucm91bmQoIDAuNzUgKiB0aGlzLnNldHRpbmdzLnBlcmNlbnQgKTtcblx0XHR0aGlzLmZpcnN0ICAgICAgICAgICAgICAgICA9IHRydWU7XG5cblx0XHR0aGlzLmFuaW1hdGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCggdGhpcy5sb29wLmJpbmQoIHRoaXMgKSwgMTAgKTtcblx0XHR9O1xuXG5cdFx0dGhpcy5sb29wID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLmFuZ2xlICs9IDU7XG5cdFx0XHR0aGlzLmFuZ2xlICU9IDM2MDtcblx0XHRcdHZhciByYWRpYW5zID0gKCB0aGlzLmFuZ2xlIC8gMTgwICkgKiBNYXRoLlBJLFxuXHRcdFx0XHR4ICAgICAgID0gdGhpcy5yYWRpdXMgKyB0aGlzLnNldHRpbmdzLnN0cm9rZV93aWR0aCAvIDIgKyBNYXRoLmNvcyggcmFkaWFucyApICogdGhpcy5yYWRpdXMsXG5cdFx0XHRcdHkgICAgICAgPSB0aGlzLnJhZGl1cyArIHRoaXMuc2V0dGluZ3Muc3Ryb2tlX3dpZHRoIC8gMiArIE1hdGguc2luKCByYWRpYW5zICkgKiB0aGlzLnJhZGl1cyxcblx0XHRcdFx0ZDtcblx0XHRcdGlmICh0aGlzLmZpcnN0ID09PSB0cnVlKSB7XG5cdFx0XHRcdGQgICAgICAgICAgPSB0aGlzLmNpcmNsZS5hdHRyKCAnZCcgKSArICcgTSAnICsgeCArICcgJyArIHk7XG5cdFx0XHRcdHRoaXMuZmlyc3QgPSBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGQgPSB0aGlzLmNpcmNsZS5hdHRyKCAnZCcgKSArICcgTCAnICsgeCArICcgJyArIHk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmNpcmNsZS5hdHRyKCAnZCcsIGQgKTtcblx0XHRcdHRoaXMuaS0tO1xuXG5cdFx0XHRpZiAodGhpcy5pIDw9IDApIHtcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbCggdGhpcy50aW1lciApO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBkcmF3KCAkZWwgKSB7XG5cdFx0dmFyIHBhdGggPSAnPHBhdGggZD1cIk0xMDAsMTAwXCIgLz4nO1xuXHRcdCRlbC5hcHBlbmQoICc8c3ZnIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWlkWU1pZFwiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPicgKyBwYXRoICsgJzwvc3ZnPicgKTtcblx0XHR2YXIgZG9udXQgPSBuZXcgRG9udXQoIHtcblx0XHRcdGVsZW1lbnQ6ICRlbCxcblx0XHRcdHBlcmNlbnQ6ICRlbC5hdHRyKCAnZGF0YS1wZXJjJyApXG5cdFx0fSApO1xuXHRcdGRvbnV0LmFuaW1hdGUoKTtcblx0fVxuXG5cdGRyYXcoICRlbCApO1xuXG59O1xuIiwiLyoqXG4gKiBGb3Jtc1xuICpcbiAqIEBwYWNrYWdlIExpZnRlckxNUy9TY3JpcHRzXG4gKlxuICogQHNpbmNlIFt2ZXJzaW9uXVxuICogQHZlcnNpb24gW3ZlcnNpb25dXG4gKi9cblxuTExNUy5Gb3JtcyA9IHtcblxuXHQvKipcblx0ICogU3RvcmVzIGxvY2FsZSBpbmZvcm1hdGlvbi5cblx0ICpcblx0ICogQWRkZWQgdmlhIFBIUC5cblx0ICpcblx0ICogQHR5cGUge09iamVjdH1cblx0ICovXG5cdGxvY2FsZToge30sXG5cblx0LyoqXG5cdCAqIFN0b3JlcyByZWZlcmVuY2VzIHRvIHRoZSBkZWZhdWx0IGxvY2FsZSBzdHJpbmdzXG5cdCAqIGFzIGNvbmZpZ3VyZWQgYnkgdXNlcnMgaW4gdGhlIGZvcm0gZWRpdG9yLlxuXHQgKlxuXHQgKiBAdHlwZSB7T2JqZWN0fVxuXHQgKi9cblx0bG9jYWxlX2RlZmF1bHRzOiB7fSxcblxuXHQvKipcblx0ICogalF1ZXJ5IHJlZi4gdG8gdGhlIGNvdW50cmllcyBzZWxlY3QgZmllbGQuLlxuXHQgKlxuXHQgKiBAdHlwZSB7T2JqZWN0fVxuXHQgKi9cblx0JGNvdW50cmllczogbnVsbCxcblxuXHQvKipcblx0ICogalF1ZXJ5IHJlZi4gdG8gdGhlIHN0YXRlcyBzZWxlY3QgZmllbGQuXG5cdCAqXG5cdCAqIEB0eXBlIHtPYmplY3R9XG5cdCAqL1xuXHQkc3RhdGVzOiBudWxsLFxuXG5cdC8qKlxuXHQgKiBqUXVlcnkgcmVmLiB0byB0aGUgaGlkZGVuIHN0YXRlcyBob2xkZXIgZmllbGQuXG5cdCAqXG5cdCAqIEB0eXBlIHtPYmplY3R9XG5cdCAqL1xuXHQkc3RhdGVzX2hvbGRlcjogbnVsbCxcblxuXHQvKipcblx0ICogSW5pdFxuXHQgKlxuIFx0ICogQHNpbmNlIFt2ZXJzaW9uXVxuIFx0ICpcbiBcdCAqIEByZXR1cm4ge3ZvaWR9XG5cdCAqL1xuXHRpbml0OiBmdW5jdGlvbigpIHtcblxuXHRcdGlmICggJCggJ2JvZHknICkuaGFzQ2xhc3MoICd3cC1hZG1pbicgKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRzZWxmLmJpbmRfbWF0Y2hpbmdfZmllbGRzKCk7XG5cdFx0c2VsZi5iaW5kX3ZvdWNoZXJfZmllbGQoKTtcblx0XHRzZWxmLmJpbmRfZWRpdF9hY2NvdW50KCk7XG5cblx0XHRMTE1TLndhaXRfZm9yKCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAoIHVuZGVmaW5lZCAhPT0gJC5mbi5sbG1zU2VsZWN0MiApO1xuXHRcdH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0c2VsZi5iaW5kX2wxMG5fc2VsZWN0cygpO1xuXHRcdH0gKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBCaW5kIERPTSBldmVudHMgZm9yIHRoZSBlZGl0IGFjY291bnQgc2NyZWVuLlxuXHQgKlxuXHQgKiBAc2luY2UgW3ZlcnNpb25dXG5cdCAqXG5cdCAqIEByZXR1cm4ge3ZvaWR9XG5cdCAqL1xuXHRiaW5kX2VkaXRfYWNjb3VudDogZnVuY3Rpb24oKSB7XG5cblx0XHQvLyBOb3QgYW4gZWRpdCBhY2NvdW50IGZvcm0uXG5cdFx0aWYgKCAhICQoICdmb3JtLmxsbXMtcGVyc29uLWZvcm0uZWRpdC1hY2NvdW50JyApLmxlbmd0aCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLnNldHVwX3RvZ2dsZV9maWVsZCggJCggJyNlbWFpbF9hZGRyZXNzLCAjZW1haWxfYWRkcmVzc19jb25maXJtJyApICk7XG5cdFx0dGhpcy5zZXR1cF90b2dnbGVfZmllbGQoICQoICcjcGFzc3dvcmQsICNwYXNzd29yZF9jb25maXJtLCAjcGFzc3dvcmRfY3VycmVudCwgI2xsbXMtcGFzc3dvcmQtc3RyZW5ndGgtbWV0ZXInICkgKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBCaW5kIERPTSBFdmVudHMgZmllbGRzIHdpdGggZHluYW1pYyBsb2NhbGl6YXRpb24gdmFsdWVzIGFuZCBsYW5ndWFnZS5cblx0ICpcblx0ICogQHNpbmNlIFt2ZXJzaW9uXVxuXHQgKlxuXHQgKiBAcmV0dXJuIHt2b2lkfVxuXHQgKi9cblx0YmluZF9sMTBuX3NlbGVjdHM6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0c2VsZi4kY291bnRyaWVzID0gJCggJy5sbG1zLWwxMG4tY291bnRyeS1zZWxlY3Qgc2VsZWN0JyApO1xuXHRcdHNlbGYuJHN0YXRlcyAgICA9ICQoICcubGxtcy1sMTBuLXN0YXRlLXNlbGVjdCBzZWxlY3QnICk7XG5cdFx0c2VsZi4kemlwcyAgICAgID0gJCggJyNsbG1zX2JpbGxpbmdfemlwJyApO1xuXG5cdFx0aWYgKCAhIHNlbGYuJGNvdW50cmllcy5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBzZWxmLiRzdGF0ZXMubGVuZ3RoICkge1xuXHRcdFx0c2VsZi5wcmVwX3N0YXRlX2ZpZWxkKCk7XG5cdFx0fVxuXG5cdFx0c2VsZi4kY291bnRyaWVzLmFkZCggc2VsZi4kc3RhdGVzICkubGxtc1NlbGVjdDIoIHsgd2lkdGg6ICcxMDAlJyB9ICk7XG5cblx0XHRpZiAoIHdpbmRvdy5sbG1zLmxvY2FsZSApIHtcblx0XHRcdHNlbGYubG9jYWxlID0gSlNPTi5wYXJzZSggd2luZG93LmxsbXMubG9jYWxlICk7XG5cdFx0XHRzZWxmLmxvY2FsZV9kZWZhdWx0cyA9IHtcblx0XHRcdFx0c3RhdGU6ICggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHNlbGYuZ2V0X2xhYmVsX3RleHQoIHNlbGYuZ2V0X2ZpZWxkX3BhcmVudCggc2VsZi4kc3RhdGVzICkuZmluZCggJ2xhYmVsJyApICk7XG5cdFx0XHRcdH0gKSgpLFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRzZWxmLiRjb3VudHJpZXMub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHZhbCA9ICQoIHRoaXMgKS52YWwoKTtcblx0XHRcdHNlbGYudXBkYXRlX3N0YXRlX29wdGlvbnMoIHZhbCApO1xuXHRcdFx0c2VsZi51cGRhdGVfbG9jYWxlX2luZm8oIHZhbCApO1xuXG5cdFx0fSApLnRyaWdnZXIoICdjaGFuZ2UnICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogRW5zdXJlIFwibWF0Y2hpbmdcIiBmaWVsZHMgbWF0Y2guXG5cdCAqXG5cdCAqIEBzaW5jZSBbdmVyc2lvbl1cblx0ICpcblx0ICogQHJldHVybiB7Vm9pZH1cblx0ICovXG5cdGJpbmRfbWF0Y2hpbmdfZmllbGRzOiBmdW5jdGlvbigpIHtcblxuXHRcdHZhciAkZmllbGRzID0gJCggJ2lucHV0W2RhdGEtbWF0Y2hdJyApLm5vdCggJ1t0eXBlPVwicGFzc3dvcmRcIl0nICk7XG5cblx0XHQkZmllbGRzLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgJGZpZWxkID0gJCggdGhpcyApLFxuXHRcdFx0XHQkbWF0Y2ggPSAkKCAnIycgKyAkZmllbGQuYXR0ciggJ2RhdGEtbWF0Y2gnICkgKSxcblx0XHRcdFx0JHBhcmVudHM7XG5cblx0XHRcdGlmICggJG1hdGNoLmxlbmd0aCApIHtcblxuXHRcdFx0XHQkcGFyZW50cyA9ICRmaWVsZC5jbG9zZXN0KCAnLmxsbXMtZm9ybS1maWVsZCcgKS5hZGQoICRtYXRjaC5jbG9zZXN0KCAnLmxsbXMtZm9ybS1maWVsZCcgKSApO1xuXG5cdFx0XHRcdCRmaWVsZC5vbiggJ2lucHV0IGNoYW5nZScsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0dmFyIHZhbF8xID0gJGZpZWxkLnZhbCgpLFxuXHRcdFx0XHRcdFx0dmFsXzIgPSAkbWF0Y2gudmFsKCk7XG5cblx0XHRcdFx0XHRpZiAoIHZhbF8xICYmIHZhbF8yICYmIHZhbF8xICE9PSB2YWxfMiApIHtcblx0XHRcdFx0XHRcdCRwYXJlbnRzLmFkZENsYXNzKCAnaW52YWxpZCcgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0JHBhcmVudHMucmVtb3ZlQ2xhc3MoICdpbnZhbGlkJyApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH1cblxuXHRcdH0gKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBCaW5kIERPTSBldmVudHMgZm9yIHZvdWNoZXIgdG9nZ2xlcyBVWC5cblx0ICpcblx0ICogQHNpbmNlIFt2ZXJzaW9uXVxuXHQgKlxuXHQgKiBAcmV0dXJuIHt2b2lkfVxuXHQgKi9cblx0YmluZF92b3VjaGVyX2ZpZWxkOiBmdW5jdGlvbigpIHtcblxuXHRcdCQoICcjbGxtcy12b3VjaGVyLXRvZ2dsZScgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHQkKCAnI2xsbXNfdm91Y2hlcicgKS50b2dnbGUoKTtcblx0XHR9ICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogUmV0cmlldmUgdGhlIHBhcmVudCBlbGVtZW50IGZvciBhIGdpdmVuIGZpZWxkLlxuXHQgKlxuXHQgKiBUaGUgcGFyZW50IGVsZW1lbnQgaXMgaGlkZGVuIHdoZW4gdGhlIGZpZWxkIGlzbid0IHJlcXVpcmVkLlxuXHQgKiBMb29rcyBmb3IgYSBXUCBjb2x1bW4gd3JhcHBlciBhbmQgZmFsbHMgYmFjayB0byB0aGUgZmllbGQnc1xuXHQgKiB3cmFwcGVyIGRpdi5cblx0ICpcblx0ICogQHNpbmNlIFt2ZXJzaW9uXVxuXHQgKlxuXHQgKiBAc2VlIHtSZWZlcmVuY2V9XG5cdCAqIEBsaW5rIHtVUkx9XG5cdCAqXG5cdCAqIEBwYXJhbSB7W3R5cGVdfSAkZmllbGRcblx0ICogQHJldHVybiB7W3R5cGVdfVxuXHQgKi9cblx0Z2V0X2ZpZWxkX3BhcmVudDogZnVuY3Rpb24oICRmaWVsZCApIHtcblxuXHRcdHZhciAkYmxvY2sgPSAkZmllbGQuY2xvc2VzdCggJy53cC1ibG9jay1jb2x1bW4nICk7XG5cdFx0aWYgKCAkYmxvY2subGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuICRibG9jaztcblx0XHR9XG5cblx0XHRyZXR1cm4gJGZpZWxkLmNsb3Nlc3QoICcubGxtcy1mb3JtLWZpZWxkJyApO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFJldHJpZXZlIHRoZSB0ZXh0IG9mIGEgbGFiZWxcblx0ICpcblx0ICogUmVtb3ZlcyBhbiBjaGlsZHJlbiBIVE1MIGVsZW1lbnRzIChlZzogcmVxdWlyZWQgc3BhbiBlbGVtZWVudHMpIGFuZCByZXR1cm5zIG9ubHkgdGhlIGxhYmVscyB0ZXh0LlxuXHQgKlxuXHQgKiBAc2luY2UgW3ZlcnNpb25dXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSAkbGFiZWwgalF1ZXJ5IG9iamVjdCBmb3IgYSBsYWJlbCBlbGVtZW50LlxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRnZXRfbGFiZWxfdGV4dDogZnVuY3Rpb24oICRsYWJlbCApIHtcblxuXHRcdHZhciAkY2xvbmUgPSAkbGFiZWwuY2xvbmUoKTtcblx0XHQkY2xvbmUuZmluZCggJyonICkucmVtb3ZlKCk7XG5cdFx0cmV0dXJuICRjbG9uZS50ZXh0KCkudHJpbSgpO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFByZXBhcmVzIHRoZSBzdGF0ZSBzZWxlY3QgZmllbGQuXG5cdCAqXG5cdCAqIE1vdmVzIEFsbCBvcHRncm91cCBlbGVtZW50cyBpbnRvIGEgaGlkZGVuICYgZGlzYWJsZWQgc2VsZWN0IGVsZW1lbnQuXG5cdCAqXG5cdCAqIEBzaW5jZSBbdmVyc2lvbl1cblx0ICpcblx0ICogQHJldHVybiB7dm9pZH1cblx0ICovXG5cdHByZXBfc3RhdGVfZmllbGQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyICRwYXJlbnQgPSB0aGlzLiRzdGF0ZXMuY2xvc2VzdCggJy5sbG1zLWZvcm0tZmllbGQnICk7XG5cblx0XHR0aGlzLiRob2xkZXIgPSAkKCAnPHNlbGVjdCBkaXNhYmxlZCBzdHlsZT1cImRpc3BsYXk6bm9uZSAhaW1wb3J0YW50O1wiIC8+JyApO1xuXG5cdFx0dGhpcy4kaG9sZGVyLmFwcGVuZFRvKCAkcGFyZW50ICk7XG5cdFx0dGhpcy4kc3RhdGVzLmZpbmQoICdvcHRncm91cCcgKS5hcHBlbmRUbyggdGhpcy4kaG9sZGVyICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogU2V0dXAgYSBzZXQgb2YgZmllbGRzIHRoYXQgY2FuIGJlIHRvZ2dsZWQgdG8gZWRpdC5cblx0ICpcblx0ICogVXNlZCBvbiB0aGUgYWNjb3VudCBlZGl0IHNjcmVlbiB0byBhbGxvdyBvcHRpb25hbGx5IHVwZGF0aW5nIHVzZXIgZW1haWwgYW5kIHBhc3N3b3Jkcy5cblx0ICpcblx0ICogQHNpbmNlIFt2ZXJzaW9uXVxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdFtdfSAkZmllbGRzIEFycmF5IG9mIGpRdWVyeSBkb20gb2JqZWN0cy5cblx0ICogQHJldHVybiB7dm9pZH1cblx0ICovXG5cdHNldHVwX3RvZ2dsZV9maWVsZDogZnVuY3Rpb24oICRmaWVsZHMgKSB7XG5cblx0XHR2YXIgc2VsZiAgICAgICAgICAgID0gdGhpcyxcblx0XHRcdCRwcmltYXJ5ICAgICAgICA9ICQoICRmaWVsZHNbMF0gKSxcblx0XHRcdCRwcmltYXJ5X3BhcmVudCA9IHRoaXMuZ2V0X2ZpZWxkX3BhcmVudCggJHByaW1hcnkgKSxcblx0XHRcdCR0b2dnbGUgICAgICAgICA9ICQoICc8YSBocmVmPVwiI1wiPjwvYT4nICksXG5cdFx0XHQkdG9nZ2xlX3dyYXAgICAgPSAkKCAnPGRpdiBjbGFzcz1cImxsbXMtZm9ybS1maWVsZCB0eXBlLWh0bWwgbGxtcy1jb2xzLTEyIGxsbXMtY29scy1sYXN0XCI+PC9kaXY+JyApLFxuXHRcdFx0Y2hhbmdlX3RleHQgICAgID0gTExNUy5sMTBuLnJlcGxhY2UoICdDaGFuZ2UgeW91ciAlcycsIHsgJyVzJzogdGhpcy5nZXRfbGFiZWxfdGV4dCggJHByaW1hcnlfcGFyZW50LmZpbmQoICdsYWJlbCcgKSApLnRvTG93ZXJDYXNlKCkgfSApLFxuXHRcdFx0Y2FuY2VsX3RleHQgICAgID0gTExNUy5sMTBuLnJlcGxhY2UoICdDYW5jZWwgJXMgY2hhbmdlJywgeyAnJXMnOiB0aGlzLmdldF9sYWJlbF90ZXh0KCAkcHJpbWFyeV9wYXJlbnQuZmluZCggJ2xhYmVsJyApICkudG9Mb3dlckNhc2UoKSB9ICksXG5cdFx0XHQkYWZ0ZXJfZmllbGQgICAgPSAkZmllbGRzLmxlbmd0aCA+IDIgPyB0aGlzLmdldF9maWVsZF9wYXJlbnQoICQoICRmaWVsZHNbICRmaWVsZHMubGVuZ3RoIC0gMSBdICkgKSA6ICRwcmltYXJ5X3BhcmVudCxcblx0XHRcdCRhZnRlcl9lbCAgICAgICA9ICRhZnRlcl9maWVsZC5oYXNDbGFzcyggJ3dwLWJsb2NrLWNvbHVtbicgKSA/ICRhZnRlcl9maWVsZC5wYXJlbnQoKSA6ICRhZnRlcl9maWVsZDtcblxuXHRcdC8qKlxuXHRcdCAqIERpc3BsYXkgYW5kIGVuYWJsZSB0aGUgZmllbGRzLlxuXHRcdCAqXG5cdFx0ICogQHNpbmNlIFt2ZXJzaW9uXVxuXHRcdCAqXG5cdFx0ICogQHJldHVybiB7dm9pZH1cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBzaG93X2ZpZWxkcygpIHtcblxuXHRcdFx0JHRvZ2dsZS50ZXh0KCBjYW5jZWxfdGV4dCApO1xuXG5cdFx0XHQkZmllbGRzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmdldF9maWVsZF9wYXJlbnQoICQoIHRoaXMgKSApLnNob3coKTtcblx0XHRcdFx0JCggdGhpcyApLmF0dHIoICdyZXF1aXJlZCcsICdyZXF1aXJlZCcgKTtcblx0XHRcdFx0JCggdGhpcyApLnJlbW92ZUF0dHIoICdkaXNhYmxlZCcgKTtcblx0XHRcdH0gKTtcblxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEhpZGUgYW5kIGRpc2FibGUgdGhlIGZpZWxkcy5cblx0XHQgKlxuXHRcdCAqIEBzaW5jZSBbdmVyc2lvbl1cblx0XHQgKlxuXHRcdCAqIEByZXR1cm4ge3ZvaWR9XG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gaGlkZV9maWVsZHMoKSB7XG5cblx0XHRcdCR0b2dnbGUudGV4dCggY2hhbmdlX3RleHQgKTtcblx0XHRcdCRmaWVsZHMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYuZ2V0X2ZpZWxkX3BhcmVudCggJCggdGhpcyApICkuaGlkZSgpO1xuXHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlQXR0ciggJ3JlcXVpcmVkJyApO1xuXHRcdFx0XHQkKCB0aGlzICkuYXR0ciggJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyApO1xuXHRcdFx0fSApO1xuXG5cdFx0fVxuXG5cdFx0JHRvZ2dsZS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdGlmICggJHByaW1hcnlfcGFyZW50LmlzKCAnOnZpc2libGUnICkgKSB7XG5cdFx0XHRcdGhpZGVfZmllbGRzKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzaG93X2ZpZWxkcygpO1xuXHRcdFx0fVxuXG5cdFx0fSApO1xuXG5cdFx0JHRvZ2dsZV93cmFwLmFwcGVuZCggJHRvZ2dsZSApO1xuXHRcdCRhZnRlcl9lbC5hZnRlciggJzxkaXYgY2xhc3M9XCJjbGVhclwiPjwvZGl2PicgKTtcblx0XHQkYWZ0ZXJfZWwuYWZ0ZXIoICR0b2dnbGVfd3JhcCApO1xuXG5cdFx0aGlkZV9maWVsZHMoKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBVcGRhdGVzIHRoZSB0ZXh0IG9mIGEgbGFiZWwgZm9yIGEgZ2l2ZW4gZmllbGQuXG5cdCAqXG5cdCAqIEBzaW5jZSBbdmVyc2lvbl1cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9ICRmaWVsZCBqUXVlcnkgb2JqZWN0IG9mIHRoZSBmb3JtIGZpZWxkLlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBMYWJlbCB0ZXh0LlxuXHQgKiBAcmV0dXJuIHt2b2lkfVxuXHQgKi9cblx0dXBkYXRlX2xhYmVsOiBmdW5jdGlvbiggJGZpZWxkLCB0ZXh0ICkge1xuXG5cdFx0dmFyICRsYWJlbCA9IHRoaXMuZ2V0X2ZpZWxkX3BhcmVudCggJGZpZWxkICkuZmluZCggJ2xhYmVsJyApLFxuXHRcdFx0JHJlcXVpcmVkID0gJGxhYmVsLmZpbmQoICcubGxtcy1yZXF1aXJlZCcgKS5jbG9uZSgpO1xuXG5cdFx0JGxhYmVsLmh0bWwoIHRleHQgKTtcblx0XHQkbGFiZWwuYXBwZW5kKCAkcmVxdWlyZWQgKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgZm9ybSBmaWVsZHMgYmFzZWQgb24gc2VsZWN0ZWQgY291bnRyeVxuXHQgKlxuXHQgKiBSZXBsYWNlcyBsYWJlbCB0ZXh0IHdpdGggbG9jYWxlLXNwZWNpZmljIGxhbmd1YWdlIGFuZFxuXHQgKiBoaWRlcyBvciBzaG93cyB6aXAgZmllbGRzIGJhc2VkIG9uIHdoZXRoZXIgb3Igbm90XG5cdCAqIHRoZXkgYXJlIHJlcXVpcmVkIGZvciB0aGUgZ2l2ZW4gY291bnRyeS5cblx0ICpcblx0ICogQHNpbmNlIFt2ZXJzaW9uXVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY291bnRyeV9jb2RlIEN1cnJlbnRseSBzZWxlY3RlZCBjb3VudHJ5IGNvZGUuXG5cdCAqIEByZXR1cm4ge3ZvaWR9XG5cdCAqL1xuXHR1cGRhdGVfbG9jYWxlX2luZm86IGZ1bmN0aW9uKCBjb3VudHJ5X2NvZGUgKSB7XG5cblx0XHRpZiAoICEgdGhpcy5sb2NhbGUgfHwgISB0aGlzLmxvY2FsZVsgY291bnRyeV9jb2RlIF0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIGluZm8gPSB0aGlzLmxvY2FsZVsgY291bnRyeV9jb2RlIF0sXG5cdFx0XHRzdGF0ZV90ZXh0ID0gaW5mby5zdGF0ZSA/IGluZm8uc3RhdGUgOiB0aGlzLmxvY2FsZV9kZWZhdWx0cy5zdGF0ZTtcblxuXHRcdHRoaXMudXBkYXRlX2xhYmVsKCB0aGlzLiRzdGF0ZXMsIHN0YXRlX3RleHQgKTtcblxuXHRcdHZhciAkemlwc19wYXJlbnQgPSB0aGlzLmdldF9maWVsZF9wYXJlbnQoIHRoaXMuJHppcHMgKTtcblx0XHR0aGlzLiR6aXBzLnJlbW92ZUF0dHIoICdkaXNhYmxlZCcgKTtcblx0XHRpZiAoIGluZm8uemlwICkge1xuXHRcdFx0dGhpcy51cGRhdGVfbGFiZWwoIHRoaXMuJHppcHMsIGluZm8uemlwICk7XG5cdFx0XHQkemlwc19wYXJlbnQuc2hvdygpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLiR6aXBzLmF0dHIoICdkaXNhYmxlZCcsICdkaXNhYmxlZCcgKTtcblx0XHRcdCR6aXBzX3BhcmVudC5oaWRlKCk7XG5cdFx0fVxuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFVwZGF0ZSB0aGUgYXZhaWxhYmxlIG9wdGlvbnMgaW4gdGhlIHN0YXRlIGZpZWxkXG5cdCAqXG5cdCAqIFJlbW92ZXMgZXhpc3Rpbmcgb3B0aW9ucyBhbmQgY29waWVzIHRoZSBvcHRpb25zXG5cdCAqIGZvciB0aGUgcmVxdWVzdGVkIGNvdW50cnkgZnJvbSB0aGUgaGlkZGVuIHNlbGVjdCBmaWVsZC5cblx0ICpcblx0ICogSWYgdGhlcmUgYXJlIG5vIHN0YXRlcyBmb3IgdGhlIGdpdmVuIGNvdW50cnkgdGhlIHN0YXRlXG5cdCAqIGZpZWxkIHdpbGwgYmUgaGlkZGVuLlxuXHQgKlxuXHQgKiBAc2luY2UgW3ZlcnNpb25dXG5cdCAqXG5cdCAqIEBzZWUge1JlZmVyZW5jZX1cblx0ICogQGxpbmsge1VSTH1cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNvdW50cnlfY29kZSBDdXJyZW50bHkgc2VsZWN0ZWQgY291bnRyeSBjb2RlLlxuXHQgKiBAcmV0dXJuIHt2b2lkfVxuXHQgKi9cblx0dXBkYXRlX3N0YXRlX29wdGlvbnM6IGZ1bmN0aW9uKCBjb3VudHJ5X2NvZGUgKSB7XG5cblx0XHRpZiAoICEgdGhpcy4kc3RhdGVzLmxlbmd0aCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgb3B0cyAgICA9IHRoaXMuJGhvbGRlci5maW5kKCAnb3B0Z3JvdXBbZGF0YS1rZXk9XCInICsgY291bnRyeV9jb2RlICsgJ1wiXSBvcHRpb24nICkuY2xvbmUoKSxcblx0XHRcdCRwYXJlbnQgPSB0aGlzLmdldF9maWVsZF9wYXJlbnQoIHRoaXMuJHN0YXRlcyApO1xuXG5cdFx0aWYgKCAhIG9wdHMubGVuZ3RoICkge1xuXHRcdFx0dGhpcy4kc3RhdGVzLmh0bWwoICc8b3B0aW9uPiZuYnNwPC9vcHRpb24+JyApO1xuXHRcdFx0dGhpcy4kc3RhdGVzLmF0dHIoICdkaXNhYmxlZCcsICdkaXNhYmxlZCcgKTtcblx0XHRcdCRwYXJlbnQuaGlkZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLiRzdGF0ZXMuaHRtbCggb3B0cyApO1xuXHRcdFx0dGhpcy4kc3RhdGVzLnJlbW92ZUF0dHIoICdkaXNhYmxlZCcgKTtcblx0XHRcdCRwYXJlbnQuc2hvdygpO1xuXHRcdH1cblxuXHR9LFxuXG59O1xuIiwiLyoqXG4gKiBJbnN0cnVjdG9ycyBMaXN0XG4gKlxuICogQHBhY2thZ2UgTGlmdGVyTE1TL1NjcmlwdHNcbiAqXG4gKiBAc2luY2UgIFVua25vd25cbiAqIEB2ZXJzaW9uICBVbmtub3duXG4gKi9cblxuTExNUy5JbnN0cnVjdG9ycyA9IHtcblxuXHQvKipcblx0ICogSW5pdFxuXHQgKi9cblx0aW5pdDogZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRpZiAoICQoICdib2R5JyApLmhhc0NsYXNzKCAnd3AtYWRtaW4nICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCAkKCAnLmxsbXMtaW5zdHJ1Y3RvcnMnICkubGVuZ3RoICkge1xuXG5cdFx0XHRMTE1TLndhaXRfZm9yX21hdGNoSGVpZ2h0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5iaW5kKCk7XG5cdFx0XHR9ICk7XG5cblx0XHR9XG5cblx0fSxcblxuXHQvKipcblx0ICogQmluZCBNZXRob2Rcblx0ICogSGFuZGxlcyBkb20gYmluZGluZyBvbiBsb2FkXG5cdCAqXG5cdCAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxuXHQgKi9cblx0YmluZDogZnVuY3Rpb24oKSB7XG5cblx0XHQkKCAnLmxsbXMtaW5zdHJ1Y3RvcnMgLmxsbXMtYXV0aG9yJyApLm1hdGNoSGVpZ2h0KCk7XG5cblx0fSxcblxufTtcbiIsIi8qKlxuICogTG9jYWxpemF0aW9uIGZ1bmN0aW9ucyBmb3IgTGlmdGVyTE1TIEphdmFzY3JpcHRcbiAqXG4gKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuICpcbiAqIEBzaW5jZSAgMi43LjNcbiAqIEB2ZXJzaW9uICAyLjcuM1xuICpcbiAqIEB0b2RvICB3ZSBuZWVkIG1vcmUgcm9idXN0IHRyYW5zbGF0aW9uIGZ1bmN0aW9ucyB0byBoYW5kbGUgc3ByaW50ZiBhbmQgcGx1cmFsaXphdGlvblxuICogICAgICAgIGF0IHRoaXMgbW9tZW50IHdlIGRvbid0IG5lZWQgdGhvc2UgYW5kIGhhdmVuJ3Qgc3R1YmJlZCB0aGVtIG91dFxuICogICAgICAgIHRob3NlIHdpbGwgYmUgYWRkZWQgd2hlbiB0aGV5J3JlIG5lZWRlZFxuICovXG5cbkxMTVMubDEwbiA9IExMTVMubDEwbiB8fCB7fTtcblxuTExNUy5sMTBuLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uICggc3RyaW5nICkge1xuXG5cdHZhciBzZWxmID0gdGhpcztcblxuXHRpZiAoIHNlbGYuc3RyaW5nc1tzdHJpbmddICkge1xuXG5cdFx0cmV0dXJuIHNlbGYuc3RyaW5nc1tzdHJpbmddO1xuXG5cdH0gZWxzZSB7XG5cblx0XHRyZXR1cm4gc3RyaW5nO1xuXG5cdH1cblxufTtcblxuLyoqXG4gKiBUcmFuc2xhdGUgYW5kIHJlcGxhY2UgcGxhY2Vob2xkZXJzIGluIGEgc3RyaW5nXG4gKlxuICogQGV4YW1wbGUgTExNUy5sMTBuLnJlcGxhY2UoICdUaGlzIGlzIGEgJTIkcyAlMSRzIFN0cmluZycsIHtcbiAqICAgICAgICAgICBcdCclMSRzJzogJ2Nvb2wnLFxuICogICAgXHRcdFx0JyUyJHMnOiAndmVyeSdcbiAqICAgIFx0XHR9ICk7XG4gKiAgICBcdFx0T3V0cHV0OiBcIlRoaXMgaXMgYSB2ZXJ5IGNvb2wgU3RyaW5nXCJcbiAqXG4gKiBAcGFyYW0gICAgc3RyaW5nICAgc3RyaW5nICAgICAgICB0ZXh0IHN0cmluZ1xuICogQHBhcmFtICAgIG9iamVjdCAgIHJlcGxhY2VtZW50cyAgb2JqZWN0IGNvbnRhaW5pbmcgdG9rZW4gPT4gcmVwbGFjZW1lbnQgcGFpcnNcbiAqIEByZXR1cm4gICBzdHJpbmdcbiAqIEBzaW5jZSAgICAzLjE2LjBcbiAqIEB2ZXJzaW9uICAzLjE2LjBcbiAqL1xuTExNUy5sMTBuLnJlcGxhY2UgPSBmdW5jdGlvbiggc3RyaW5nLCByZXBsYWNlbWVudHMgKSB7XG5cblx0dmFyIHN0ciA9IHRoaXMudHJhbnNsYXRlKCBzdHJpbmcgKTtcblxuXHQkLmVhY2goIHJlcGxhY2VtZW50cywgZnVuY3Rpb24oIHRva2VuLCB2YWx1ZSApIHtcblxuXHRcdGlmICggLTEgIT09IHRva2VuLmluZGV4T2YoICdzJyApICkge1xuXHRcdFx0dmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuXHRcdH0gZWxzZSBpZiAoIC0xICE9PSB0b2tlbi5pbmRleE9mKCAnZCcgKSApIHtcblx0XHRcdHZhbHVlID0gdmFsdWUgKiAxO1xuXHRcdH1cblxuXHRcdHN0ciA9IHN0ci5yZXBsYWNlKCB0b2tlbiwgdmFsdWUgKTtcblxuXHR9ICk7XG5cblx0cmV0dXJuIHN0cjtcblxufTtcbiIsIi8qKlxuICogSGFuZGxlIExlc3NvbiBQcmV2aWV3IEVsZW1lbnRzXG4gKlxuICogQHBhY2thZ2UgTGlmdGVyTE1TL1NjcmlwdHNcbiAqXG4gKiBAc2luY2UgICAgMy4wLjBcbiAqIEB2ZXJzaW9uICAzLjE2LjEyXG4gKi9cblxuTExNUy5MZXNzb25QcmV2aWV3ID0ge1xuXG5cdC8qKlxuXHQgKiBBIGpRdWVyeSBvYmplY3Qgb2YgYWxsIG91dGxpbmVzIHByZXNlbnQgb24gdGhlIGN1cnJlbnQgc2NyZWVuXG5cdCAqXG5cdCAqIEB0eXBlIG9ialxuXHQgKi9cblx0JGVsczogbnVsbCxcblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZVxuXHQgKlxuXHQgKiBAcmV0dXJuIHZvaWRcblx0ICovXG5cdGluaXQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0dGhpcy4kbG9ja2VkID0gJCggJ2FbaHJlZj1cIiNsbG1zLWxlc3Nvbi1sb2NrZWRcIl0nICk7XG5cblx0XHRpZiAoIHRoaXMuJGxvY2tlZC5sZW5ndGggKSB7XG5cblx0XHRcdHNlbGYuYmluZCgpO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCAkKCAnLmxsbXMtY291cnNlLW5hdmlnYXRpb24nICkubGVuZ3RoICkge1xuXG5cdFx0XHRMTE1TLndhaXRfZm9yX21hdGNoSGVpZ2h0KCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRzZWxmLm1hdGNoX2hlaWdodCgpO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9XG5cblx0fSxcblxuXHQvKipcblx0ICogQmluZCBET00gZXZlbnRzXG5cdCAqXG5cdCAqIEByZXR1cm4gdm9pZFxuXHQgKiBAc2luY2UgICAgMy4wLjBcblx0ICogQHZlcnNpb24gIDMuMTYuMTJcblx0ICovXG5cdGJpbmQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0dGhpcy4kbG9ja2VkLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9ICk7XG5cblx0XHR0aGlzLiRsb2NrZWQub24oICdtb3VzZWVudGVyJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciAkdGlwID0gJCggdGhpcyApLmZpbmQoICcubGxtcy10b29sdGlwJyApO1xuXHRcdFx0aWYgKCAhICR0aXAubGVuZ3RoICkge1xuXHRcdFx0XHR2YXIgbXNnID0gJCggdGhpcyApLmF0dHIoICdkYXRhLXRvb2x0aXAtbXNnJyApO1xuXHRcdFx0XHRpZiAoICEgbXNnICkge1xuXHRcdFx0XHRcdG1zZyA9IExMTVMubDEwbi50cmFuc2xhdGUoICdZb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgdGhpcyBjb250ZW50JyApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCR0aXAgPSBzZWxmLmdldF90b29sdGlwKCBtc2cgKTtcblx0XHRcdFx0JCggdGhpcyApLmFwcGVuZCggJHRpcCApO1xuXHRcdFx0fVxuXHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCR0aXAuYWRkQ2xhc3MoICdzaG93JyApO1xuXHRcdFx0fSwgMTAgKTtcblxuXHRcdH0gKTtcblxuXHRcdHRoaXMuJGxvY2tlZC5vbiggJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyICR0aXAgPSAkKCB0aGlzICkuZmluZCggJy5sbG1zLXRvb2x0aXAnICk7XG5cdFx0XHQkdGlwLnJlbW92ZUNsYXNzKCAnc2hvdycgKTtcblxuXHRcdH0gKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBNYXRjaCB0aGUgaGVpZ2h0IG9mIGxlc3NvbiBwcmV2aWV3IGl0ZW1zIGluIGNvdXJzZSBuYXZpZ2F0aW9uIGJsb2Nrc1xuXHQgKlxuXHQgKiBAcmV0dXJuICAgdm9pZFxuXHQgKiBAc2luY2UgICAgMy4wLjBcblx0ICogQHZlcnNpb24gIDMuMC4wXG5cdCAqL1xuXHRtYXRjaF9oZWlnaHQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0JCggJy5sbG1zLWNvdXJzZS1uYXZpZ2F0aW9uIC5sbG1zLWxlc3Nvbi1saW5rJyApLm1hdGNoSGVpZ2h0KCk7XG5cblx0fSxcblxuXHQvKipcblx0ICogR2V0IGEgdG9vbHRpcCBlbGVtZW50XG5cdCAqXG5cdCAqIEBwYXJhbSAgICBzdHJpbmcgICBtc2cgICBtZXNzYWdlIHRvIGRpc3BsYXkgaW5zaWRlIHRoZSB0b29sdGlwXG5cdCAqIEByZXR1cm4gICBvYmpcblx0ICogQHNpbmNlICAgIDMuMC4wXG5cdCAqIEB2ZXJzaW9uICAzLjIuNFxuXHQgKi9cblx0Z2V0X3Rvb2x0aXA6IGZ1bmN0aW9uKCBtc2cgKSB7XG5cdFx0dmFyICRlbCA9ICQoICc8ZGl2IGNsYXNzPVwibGxtcy10b29sdGlwXCIgLz4nICk7XG5cdFx0JGVsLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJsbG1zLXRvb2x0aXAtY29udGVudFwiPicgKyBtc2cgKyAnPC9kaXY+JyApO1xuXHRcdHJldHVybiAkZWw7XG5cdH0sXG5cbn07XG4iLCIvKipcbiAqIExpZnRlckxNUyBMb29wcyBKU1xuICpcbiAqIEBwYWNrYWdlIExpZnRlckxNUy9TY3JpcHRzXG4gKlxuICogQHNpbmNlICAgIDMuMC4wXG4gKiBAdmVyc2lvbiAgMy4xNC4wXG4gKi9cblxuTExNUy5Mb29wcyA9IHtcblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZVxuXHQgKlxuXHQgKiBAcmV0dXJuIHZvaWRcblx0ICovXG5cdGluaXQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0aWYgKCAkKCAnLmxsbXMtbG9vcCcgKS5sZW5ndGggKSB7XG5cblx0XHRcdExMTVMud2FpdF9mb3JfbWF0Y2hIZWlnaHQoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHNlbGYubWF0Y2hfaGVpZ2h0KCk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBNYXRjaCB0aGUgaGVpZ2h0IG9mIC5sbG1zLWxvb3AtaXRlbVxuXHQgKlxuXHQgKiBAcmV0dXJuICAgdm9pZFxuXHQgKiBAc2luY2UgICAgMy4wLjBcblx0ICogQHZlcnNpb24gIDMuMTQuMFxuXHQgKi9cblx0bWF0Y2hfaGVpZ2h0OiBmdW5jdGlvbigpIHtcblxuXHRcdCQoICcubGxtcy1sb29wLWl0ZW0gLmxsbXMtbG9vcC1pdGVtLWNvbnRlbnQnICkubWF0Y2hIZWlnaHQoKTtcblx0XHQkKCAnLmxsbXMtYWNoaWV2ZW1lbnQtbG9vcC1pdGVtIC5sbG1zLWFjaGlldmVtZW50JyApLm1hdGNoSGVpZ2h0KCk7XG5cdFx0JCggJy5sbG1zLWNlcnRpZmljYXRlLWxvb3AtaXRlbSAubGxtcy1jZXJ0aWZpY2F0ZScgKS5tYXRjaEhlaWdodCgpO1xuXG5cdH0sXG5cbn07XG4iLCIvKipcbiAqIEhhbmRsZSB0aGUgQ29sbGFwc2libGUgU3lsbGFidXMgV2lkZ2V0IC8gU2hvcnRjb2RlXG4gKlxuICogQHBhY2thZ2UgTGlmdGVyTE1TL1NjcmlwdHNcbiAqXG4gKiBAc2luY2UgVW5rbm93blxuICogQHZlcnNpb24gVW5rbm93blxuICovXG5cbkxMTVMuT3V0bGluZUNvbGxhcHNlID0ge1xuXG5cdC8qKlxuXHQgKiBBIGpRdWVyeSBvYmplY3Qgb2YgYWxsIG91dGxpbmVzIHByZXNlbnQgb24gdGhlIGN1cnJlbnQgc2NyZWVuXG5cdCAqXG5cdCAqIEB0eXBlIG9ialxuXHQgKi9cblx0JG91dGxpbmVzOiBudWxsLFxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplXG5cdCAqXG5cdCAqIEByZXR1cm4gdm9pZFxuXHQgKi9cblx0aW5pdDogZnVuY3Rpb24oKSB7XG5cblx0XHR0aGlzLiRvdXRsaW5lcyA9ICQoICcubGxtcy13aWRnZXQtc3lsbGFidXMtLWNvbGxhcHNpYmxlJyApO1xuXG5cdFx0aWYgKCB0aGlzLiRvdXRsaW5lcy5sZW5ndGggKSB7XG5cblx0XHRcdHRoaXMuYmluZCgpO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0LyoqXG5cdCAqIEJpbmQgRE9NIGV2ZW50c1xuXHQgKlxuXHQgKiBAcmV0dXJuIHZvaWRcblx0ICovXG5cdGJpbmQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0dGhpcy4kb3V0bGluZXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciAkb3V0bGluZSA9ICQoIHRoaXMgKSxcblx0XHRcdFx0JGhlYWRlcnMgPSAkb3V0bGluZS5maW5kKCAnLmxsbXMtc2VjdGlvbiAuc2VjdGlvbi1oZWFkZXInICk7XG5cblx0XHRcdC8vIGJpbmQgaGVhZGVyIGNsaWNrc1xuXHRcdFx0JGhlYWRlcnMub24oICdjbGljaycsIGZ1bmN0aW9uKCBlICkge1xuXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHR2YXIgJHRvZ2dsZSAgPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0JHNlY3Rpb24gPSAkdG9nZ2xlLmNsb3Nlc3QoICcubGxtcy1zZWN0aW9uJyApLFxuXHRcdFx0XHRcdHN0YXRlICAgID0gc2VsZi5nZXRfc2VjdGlvbl9zdGF0ZSggJHNlY3Rpb24gKTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBzdGF0ZSApIHtcblxuXHRcdFx0XHRcdGNhc2UgJ2Nsb3NlZCc6XG5cdFx0XHRcdFx0XHRzZWxmLm9wZW5fc2VjdGlvbiggJHNlY3Rpb24gKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ29wZW5lZCc6XG5cdFx0XHRcdFx0XHRzZWxmLmNsb3NlX3NlY3Rpb24oICRzZWN0aW9uICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIGJpbmQgb3B0aW9uYWwgdG9nZ2xlIFwiYnV0dG9uc1wiXG5cdFx0XHQkb3V0bGluZS5maW5kKCAnLmxsbXMtY29sbGFwc2UtdG9nZ2xlJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbiggZSApIHtcblxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0dmFyICRidG4gICAgICAgICAgICA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHRhY3Rpb24gICAgICAgICAgPSAkYnRuLmF0dHIoICdkYXRhLWFjdGlvbicgKSxcblx0XHRcdFx0XHRvcHBvc2l0ZV9hY3Rpb24gPSAoICdjbG9zZScgPT09IGFjdGlvbiApID8gJ29wZW5lZCcgOiAnY2xvc2VkJztcblxuXHRcdFx0XHQkaGVhZGVycy5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdHZhciAkc2VjdGlvbiA9ICQoIHRoaXMgKS5jbG9zZXN0KCAnLmxsbXMtc2VjdGlvbicgKSxcblx0XHRcdFx0XHRcdHN0YXRlICAgID0gc2VsZi5nZXRfc2VjdGlvbl9zdGF0ZSggJHNlY3Rpb24gKTtcblxuXHRcdFx0XHRcdGlmICggb3Bwb3NpdGVfYWN0aW9uICE9PSBzdGF0ZSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHN3aXRjaCAoIHN0YXRlICkge1xuXG5cdFx0XHRcdFx0XHRjYXNlICdjbG9zZWQnOlxuXHRcdFx0XHRcdFx0XHRzZWxmLmNsb3NlX3NlY3Rpb24oICRzZWN0aW9uICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnb3BlbmVkJzpcblx0XHRcdFx0XHRcdFx0c2VsZi5vcGVuX3NlY3Rpb24oICRzZWN0aW9uICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdCQoIHRoaXMgKS50cmlnZ2VyKCAnY2xpY2snICk7XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9ICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogQ2xvc2UgYW4gb3V0bGluZSBzZWN0aW9uXG5cdCAqXG5cdCAqIEBwYXJhbSAgb2JqICAgICRzZWN0aW9uICAgalF1ZXJ5IHNlbGVjdG9yIG9mIGEgJy5sbG1zLXNlY3Rpb24nXG5cdCAqIEByZXR1cm4gdm9pZFxuXHQgKi9cblx0Y2xvc2Vfc2VjdGlvbjogZnVuY3Rpb24oICRzZWN0aW9uICkge1xuXG5cdFx0JHNlY3Rpb24ucmVtb3ZlQ2xhc3MoICdsbG1zLXNlY3Rpb24tLW9wZW5lZCcgKS5hZGRDbGFzcyggJ2xsbXMtc2VjdGlvbi0tY2xvc2VkJyApO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIE9wZW4gYW4gb3V0bGluZSBzZWN0aW9uXG5cdCAqXG5cdCAqIEBwYXJhbSAgb2JqICAgICRzZWN0aW9uICAgalF1ZXJ5IHNlbGVjdG9yIG9mIGEgJy5sbG1zLXNlY3Rpb24nXG5cdCAqIEByZXR1cm4gdm9pZFxuXHQgKi9cblx0b3Blbl9zZWN0aW9uOiBmdW5jdGlvbiggJHNlY3Rpb24gKSB7XG5cblx0XHQkc2VjdGlvbi5yZW1vdmVDbGFzcyggJ2xsbXMtc2VjdGlvbi0tY2xvc2VkJyApLmFkZENsYXNzKCAnbGxtcy1zZWN0aW9uLS1vcGVuZWQnICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogR2V0IHRoZSBjdXJyZW50IHN0YXRlIChvcGVuIG9yIGNsb3NlZCkgb2YgYW4gb3V0bGluZSBzZWN0aW9uXG5cdCAqXG5cdCAqIEBwYXJhbSAgb2JqICAgICRzZWN0aW9uICAgalF1ZXJ5IHNlbGVjdG9yIG9mIGEgJy5sbG1zLXNlY3Rpb24nXG5cdCAqIEByZXR1cm4gc3RyaW5nICAgICAgICAgICAgJ29wZW5lZCcgb3IgJ2Nsb3NlZCdcblx0ICovXG5cdGdldF9zZWN0aW9uX3N0YXRlOiBmdW5jdGlvbiggJHNlY3Rpb24gKSB7XG5cblx0XHRyZXR1cm4gJHNlY3Rpb24uaGFzQ2xhc3MoICdsbG1zLXNlY3Rpb24tLW9wZW5lZCcgKSA/ICdvcGVuZWQnIDogJ2Nsb3NlZCc7XG5cblx0fVxuXG59O1xuIiwiLyoqXG4gKiBIYW5kbGUgUGFzc3dvcmQgU3RyZW5ndGggTWV0ZXIgZm9yIHJlZ2lzdHJhdGlvbiBhbmQgcGFzc3dvcmQgdXBkYXRlIGZpZWxkc1xuICpcbiAqIEBwYWNrYWdlIExpZnRlckxNUy9TY3JpcHRzXG4gKlxuICogQHNpbmNlIDMuMC4wXG4gKiBAdmVyc2lvbiBbdmVyc2lvbl1cbiAqL1xuXG4kLmV4dGVuZCggTExNUy5QYXNzd29yZFN0cmVuZ3RoLCB7XG5cblx0LyoqXG5cdCAqIGpRdWVyeSByZWYgZm9yIHRoZSBwYXNzd29yZCBzdHJlbmd0aCBtZXRlciBvYmplY3QuXG5cdCAqXG5cdCAqIEB0eXBlIHtPYmplY3R9XG5cdCAqL1xuXHQkbWV0ZXI6ICQoICcubGxtcy1wYXNzd29yZC1zdHJlbmd0aC1tZXRlcicgKSxcblxuXHQvKipcblx0ICogalF1ZXJ5IHJlZiBmb3IgdGhlIHBhc3N3b3JkIGZpZWxkLlxuXHQgKlxuXHQgKiBAdHlwZSB7T2JqZWN0fVxuXHQgKi9cblx0JHBhc3M6IG51bGwsXG5cblx0LyoqXG5cdCAqIGpRdWVyeSByZWYgZm9yIHRoZSBwYXNzd29yZCBjb25maXJtYXRpb24gZmllbGRcblx0ICpcblx0ICogQHR5cGUge09iamVjdH1cblx0ICovXG5cdCRjb25mOiBudWxsLFxuXG5cdC8qKlxuXHQgKiBqUXVlcnkgcmVmIGZvciBmb3JtIGVsZW1lbnQuXG5cdCAqXG5cdCAqIEB0eXBlIHtPYmplY3R9XG5cdCAqL1xuXHQkZm9ybTogbnVsbCxcblxuXHQvKipcblx0ICogSW5pdFxuXHQgKiBsb2FkcyBjbGFzcyBtZXRob2RzXG5cdCAqXG5cdCAqIEBzaW5jZSAzLjAuMFxuXHQgKiBAc2luY2UgMy43LjAgVW5rbm93blxuXHQgKiBAc2luY2UgW3ZlcnNpb25dIE1vdmUgcmVmZXJlbmNlIHNldHVwIHRvIGBzZXR1cF9yZWZlcmVuY2VzKClgLlxuXHQgKiAgICAgICAgICAgICAgVXNlIGBMTE1TLndhaXRfZm9yKClgIGZvciBkZXBlbmRlbmN5IHdhaXRpbmcuXG5cdCAqXG5cdCAqIEByZXR1cm4ge1ZvaWR9XG5cdCAqL1xuXHRpbml0OiBmdW5jdGlvbigpIHtcblxuXHRcdGlmICggJCggJ2JvZHknICkuaGFzQ2xhc3MoICd3cC1hZG1pbicgKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoICEgdGhpcy5zZXR1cF9yZWZlcmVuY2VzKCkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0TExNUy53YWl0X2ZvciggZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHdwICYmICd1bmRlZmluZWQnICE9PSB0eXBlb2Ygd3AucGFzc3dvcmRTdHJlbmd0aCApO1xuXHRcdH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0c2VsZi5iaW5kKCk7XG5cdFx0XHRzZWxmLiRmb3JtLnRyaWdnZXIoICdsbG1zLXBhc3N3b3JkLXN0cmVuZ3RoLXJlYWR5JyApO1xuXHRcdH0gKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBCaW5kIERPTSBFdmVudHNcblx0ICpcblx0ICogQHNpbmNlIDMuMC4wXG5cdCAqXG5cdCAqIEByZXR1cm4gdm9pZFxuXHQgKi9cblx0YmluZDogZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHQvLyBhZGQgc3VibWlzc2lvbiBldmVudCBoYW5kbGVycyB3aGVuIG5vdCBvbiBhIGNoZWNrb3V0IGZvcm1cblx0XHRpZiAoICEgdGhpcy4kZm9ybS5oYXNDbGFzcyggJ2xsbXMtY2hlY2tvdXQnICkgKSB7XG5cdFx0XHRzZWxmLiRmb3JtLm9uKCAnc3VibWl0Jywgc2VsZiwgc2VsZi5zdWJtaXQgKTtcblx0XHR9XG5cblx0XHQvLyBjaGVjayBwYXNzd29yZCBzdHJlbmd0aCBvbiBrZXl1cFxuXHRcdHNlbGYuJHBhc3MuYWRkKCBzZWxmLiRjb25mICkub24oICdrZXl1cCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0c2VsZi5jaGVja19zdHJlbmd0aCgpO1xuXHRcdH0gKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBDaGVjayB0aGUgc3RyZW5ndGggb2YgYSB1c2VyIGVudGVyZWQgcGFzc3dvcmRcblx0ICogYW5kIHVwZGF0ZSBlbGVtZW50cyBkZXBlbmRpbmcgb24gdGhlIGN1cnJlbnQgc3RyZW5ndGhcblx0ICpcblx0ICogQHNpbmNlIDMuMC4wXG5cdCAqIEBzaW5jZSBbdmVyc2lvbl0gQWxsb3cgcGFzc3dvcmQgY29uZmlybWF0aW9uIHRvIGJlIG9wdGlvbmFsIHdoZW4gY2hlY2tpbmcgc3RyZW5ndGguXG5cdCAqXG5cdCAqIEByZXR1cm4gdm9pZFxuXHQgKi9cblx0Y2hlY2tfc3RyZW5ndGg6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyICRwYXNzX2ZpZWxkID0gdGhpcy4kcGFzcy5jbG9zZXN0KCAnLmxsbXMtZm9ybS1maWVsZCcgKSxcblx0XHRcdCRjb25mX2ZpZWxkID0gdGhpcy4kY29uZi5jbG9zZXN0KCAnLmxsbXMtZm9ybS1maWVsZCcgKSxcblx0XHRcdHBhc3NfbGVuZ3RoID0gdGhpcy4kcGFzcy52YWwoKS5sZW5ndGgsXG5cdFx0XHRjb25mX2xlbmd0aCA9IHRoaXMuJGNvbmYubGVuZ3RoID8gdGhpcy4kY29uZi52YWwoKS5sZW5ndGggOiAwO1xuXG5cdFx0Ly8gaGlkZSB0aGUgbWV0ZXIgaWYgYm90aCBmaWVsZHMgYXJlIGVtcHR5XG5cdFx0aWYgKCAhIHBhc3NfbGVuZ3RoICYmICEgY29uZl9sZW5ndGggKSB7XG5cdFx0XHQkcGFzc19maWVsZC5yZW1vdmVDbGFzcyggJ3ZhbGlkIGludmFsaWQnICk7XG5cdFx0XHQkY29uZl9maWVsZC5yZW1vdmVDbGFzcyggJ3ZhbGlkIGludmFsaWQnICk7XG5cdFx0XHR0aGlzLiRtZXRlci5oaWRlKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLmdldF9jdXJyZW50X3N0cmVuZ3RoX3N0YXR1cygpICkge1xuXHRcdFx0JHBhc3NfZmllbGQucmVtb3ZlQ2xhc3MoICdpbnZhbGlkJyApLmFkZENsYXNzKCAndmFsaWQnICk7XG5cdFx0XHRpZiAoIGNvbmZfbGVuZ3RoICkge1xuXHRcdFx0XHQkY29uZl9maWVsZC5yZW1vdmVDbGFzcyggJ2ludmFsaWQnICkuYWRkQ2xhc3MoICd2YWxpZCcgKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0JHBhc3NfZmllbGQucmVtb3ZlQ2xhc3MoICd2YWxpZCcgKS5hZGRDbGFzcyggJ2ludmFsaWQnICk7XG5cdFx0XHRpZiAoIGNvbmZfbGVuZ3RoICkge1xuXHRcdFx0XHQkY29uZl9maWVsZC5yZW1vdmVDbGFzcyggJ3ZhbGlkJyApLmFkZENsYXNzKCAnaW52YWxpZCcgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLiRtZXRlci5yZW1vdmVDbGFzcyggJ3Rvby1zaG9ydCB2ZXJ5LXdlYWsgd2VhayBtZWRpdW0gc3Ryb25nIG1pc21hdGNoJyApO1xuXHRcdHRoaXMuJG1ldGVyLnNob3coKS5hZGRDbGFzcyggdGhpcy5nZXRfY3VycmVudF9zdHJlbmd0aCggJ3NsdWcnICkgKTtcblx0XHR0aGlzLiRtZXRlci5odG1sKCB0aGlzLmdldF9jdXJyZW50X3N0cmVuZ3RoKCAndGV4dCcgKSApO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIEZvcm0gc3VibWlzc2lvbiBhY3Rpb24gY2FsbGVkIGR1cmluZyByZWdpc3RyYXRpb24gb24gY2hlY2tvdXQgc2NyZWVuXG5cdCAqXG5cdCAqIEBzaW5jZSAgICAzLjAuMFxuXHQgKlxuXHQgKiBAcGFyYW0gICAgb2JqICAgICAgIHNlbGYgICAgICBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzXG5cdCAqIEBwYXJhbSAgICBGdW5jdGlvbiAgY2FsbGJhY2sgIGNhbGxiYWNrIGZ1bmN0aW9uLCBwYXNzZXMgZXJyb3IgbWVzc2FnZSBvciBzdWNjZXNzIGJhY2sgdG8gY2hlY2tvdXQgaGFuZGxlclxuXHQgKiBAcmV0dXJuICAgdm9pZFxuXHQgKi9cblx0Y2hlY2tvdXQ6IGZ1bmN0aW9uKCBzZWxmLCBjYWxsYmFjayApIHtcblxuXHRcdGlmICggc2VsZi5nZXRfY3VycmVudF9zdHJlbmd0aF9zdGF0dXMoKSApIHtcblxuXHRcdFx0Y2FsbGJhY2soIHRydWUgKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdGNhbGxiYWNrKCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnVGhlcmUgaXMgYW4gaXNzdWUgd2l0aCB5b3VyIGNob3NlbiBwYXNzd29yZC4nICkgKTtcblxuXHRcdH1cblx0fSxcblxuXHQvKipcblx0ICogR2V0IHRoZSBsaXN0IG9mIGJsYWNrbGlzdGVkIHN0cmluZ3Ncblx0ICpcblx0ICogQHNpbmNlIDMuMC4wXG5cdCAqIEBzaW5jZSBbdmVyc2lvbl0gQWRkIGJsYWNrbGlzdGVkIHdvcmRzIGFzIGNvbmZpZ3VyZWQgdmlhIHRoZSBwaHAgZmlsdGVyIGFuZCBhdXRvbWF0aWNhbGx5IGFkZCB2YWx1ZXMgZnJvbSBhbGwgdGV4dCBpbnB1dHMgaW4gdGhlIGN1cnJlbnQgZm9ybS5cblx0ICpcblx0ICogQHJldHVybiBhcnJheVxuXHQgKi9cblx0Z2V0X2JsYWNrbGlzdDogZnVuY3Rpb24oKSB7XG5cblx0XHQvLyBEZWZhdWx0IHZhbHVlcyBmcm9tIFdQIENvcmUgKyBhbnkgdmFsdWVzIGFkZGVkIHZpYSBzZXR0aW5ncyBmaWx0ZXIuLlxuXHRcdHZhciBibGFja2xpc3QgPSB3cC5wYXNzd29yZFN0cmVuZ3RoLnVzZXJJbnB1dEJsYWNrbGlzdCgpLmNvbmNhdCggdGhpcy5nZXRfc2V0dGluZyggJ2JsYWNrbGlzdCcsIFtdICkgKTtcblxuXHRcdC8vIEFkZCB2YWx1ZXMgZnJvbSBhbGwgdGV4dCBmaWVsZHMgaW4gdGhlIGZvcm0uXG5cdFx0dGhpcy4kZm9ybS5maW5kKCAnaW5wdXRbdHlwZT1cInRleHRcIl0sIGlucHV0W3R5cGU9XCJlbWFpbFwiXSwgaW5wdXRbdHlwZT1cInRlbFwiXSwgaW5wdXRbdHlwZT1cIm51bWJlclwiXScgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciB2YWwgPSAkKCB0aGlzICkudmFsKCk7XG5cdFx0XHRpZiAoIHZhbCApIHtcblx0XHRcdFx0YmxhY2tsaXN0LnB1c2goIHZhbCApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHRcdHJldHVybiBibGFja2xpc3Q7XG5cblx0fSxcblxuXHQvKipcblx0ICogUmV0cmlldmUgY3VycmVudCBzdHJlbmd0aCBhcyBhIG51bWJlciwgYSBzbHVnLCBvciBhIHRyYW5zbGF0ZWQgdGV4dCBzdHJpbmdcblx0ICpcblx0ICogQHNpbmNlIDMuMC4wXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBmb3JtYXQgRGVyaXZlZCByZXR1cm4gZm9ybWF0IFtpbnR8c2x1Z3x0ZXh0XSBkZWZhdWx0cyB0byBpbnQuXG5cdCAqIEByZXR1cm4gbWl4ZWRcblx0ICovXG5cdGdldF9jdXJyZW50X3N0cmVuZ3RoOiBmdW5jdGlvbiggZm9ybWF0ICkge1xuXG5cdFx0Zm9ybWF0ICAgPSBmb3JtYXQgfHwgJ2ludCc7XG5cdFx0dmFyIHBhc3MgPSB0aGlzLiRwYXNzLnZhbCgpLFxuXHRcdFx0Y29uZiA9IHRoaXMuJGNvbmYudmFsKCksXG5cdFx0XHR2YWw7XG5cblx0XHQvLyBlbmZvcmNlIGN1c3RvbSBsZW5ndGggcmVxdWlyZW1lbnRcblx0XHRpZiAoIHBhc3MubGVuZ3RoIDwgdGhpcy5nZXRfc2V0dGluZyggJ21pbl9sZW5ndGgnLCA2ICkgKSB7XG5cdFx0XHR2YWwgPSAtMTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFsID0gd3AucGFzc3dvcmRTdHJlbmd0aC5tZXRlciggcGFzcywgdGhpcy5nZXRfYmxhY2tsaXN0KCksIGNvbmYgKTtcblx0XHRcdC8vIDAgJiAxIGFyZSBib3RoIHZlcnktd2Vha1xuXHRcdFx0aWYgKCAwID09PSB2YWwgKSB7XG5cdFx0XHRcdHZhbCA9IDE7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCAnc2x1ZycgPT09IGZvcm1hdCApIHtcblx0XHRcdHJldHVybiB0aGlzLmdldF9zdHJlbmd0aF9zbHVnKCB2YWwgKTtcblx0XHR9IGVsc2UgaWYgKCAndGV4dCcgPT09IGZvcm1hdCApIHtcblx0XHRcdHJldHVybiB0aGlzLmdldF9zdHJlbmd0aF90ZXh0KCB2YWwgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHZhbDtcblx0XHR9XG5cdH0sXG5cblx0LyoqXG5cdCAqIERldGVybWluZXMgaWYgdGhlIGN1cnJlbnQgcGFzc3dvcmQgc3RyZW5ndGggbWVldHMgdGhlIHVzZXItZGVmaW5lZFxuXHQgKiBtaW5pbXVtIHBhc3N3b3JkIHN0cmVuZ3RoIHJlcXVpcmVtZW50c1xuXHQgKlxuXHQgKiBAc2luY2UgMy4wLjBcblx0ICpcblx0ICogQHJldHVybiAgIGJvb2xlYW5cblx0ICovXG5cdGdldF9jdXJyZW50X3N0cmVuZ3RoX3N0YXR1czogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGN1cnIgPSB0aGlzLmdldF9jdXJyZW50X3N0cmVuZ3RoKCksXG5cdFx0XHRtaW4gID0gdGhpcy5nZXRfc3RyZW5ndGhfdmFsdWUoIHRoaXMuZ2V0X21pbmltdW1fc3RyZW5ndGgoKSApO1xuXHRcdHJldHVybiAoIDUgPT09IGN1cnIgKSA/IGZhbHNlIDogKCBjdXJyID49IG1pbiApO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBSZXRyaWV2ZSB0aGUgbWluaW11bSBwYXNzd29yZCBzdHJlbmd0aCBmb3IgdGhlIGN1cnJlbnQgZm9ybS5cblx0ICpcblx0ICogQHNpbmNlIDMuMC4wXG5cdCAqIEBzaW5jZSBbdmVyc2lvbl0gUmVwbGFjZXMgdGhlIHZlcnNpb24gb3V0cHV0IHZpYSBhbiBpbmxpbmUgUEhQIHNjcmlwdCBpbiBmYXZvciBvZiB1dGlsaXppbmcgdmFsdWVzIGNvbmZpZ3VyZWQgaW4gdGhlIHNldHRpbmdzIG9iamVjdC5cblx0ICpcblx0ICogQHJldHVybiB7c3RyaW5nfVxuXHQgKi9cblx0Z2V0X21pbmltdW1fc3RyZW5ndGg6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmdldF9zZXR0aW5nKCAnbWluX3N0cmVuZ3RoJywgJ3N0cm9uZycgKTtcblx0fSxcblxuXHQvKipcblx0ICogR2V0IGEgc2V0dGluZyBhbmQgZmFsbGJhY2sgdG8gYSBkZWZhdWx0IHZhbHVlLlxuXHQgKlxuXHQgKiBAc2luY2UgW3ZlcnNpb25dXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgU2V0dGluZyBrZXkuXG5cdCAqIEBwYXJhbSB7bWl4ZWR9IGRlZmF1bHRfdmFsIERlZmF1bHQgdmFsdWUgd2hlbiB0aGUgcmVxdWVzdGVkIHNldHRpbmcgY2Fubm90IGJlIGxvY2F0ZWQuXG5cdCAqIEByZXR1cm4ge21peGVkfVxuXHQgKi9cblx0Z2V0X3NldHRpbmc6IGZ1bmN0aW9uKCBrZXksIGRlZmF1bHRfdmFsICkge1xuXHRcdHZhciBzZXR0aW5ncyA9IHRoaXMuZ2V0X3NldHRpbmdzKCk7XG5cdFx0cmV0dXJuIHNldHRpbmdzWyBrZXkgXSA/IHNldHRpbmdzWyBrZXkgXSA6IGRlZmF1bHRfdmFsO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBHZXQgdGhlIHNsdWcgYXNzb2NpYXRlZCB3aXRoIGEgc3RyZW5ndGggdmFsdWVcblx0ICpcblx0ICogQHNpbmNlICAzLjAuMFxuXHQgKlxuXHQgKiBAcGFyYW0gaW50IHN0cmVuZ3RoX3ZhbCBTdHJlbmd0aCB2YWx1ZSBudW1iZXIuXG5cdCAqIEByZXR1cm4gc3RyaW5nXG5cdCAqL1xuXHRnZXRfc3RyZW5ndGhfc2x1ZzogZnVuY3Rpb24oIHN0cmVuZ3RoX3ZhbCApIHtcblxuXHRcdHZhciBzbHVncyA9IHtcblx0XHRcdCctMSc6ICd0b28tc2hvcnQnLFxuXHRcdFx0MTogJ3Zlcnktd2VhaycsXG5cdFx0XHQyOiAnd2VhaycsXG5cdFx0XHQzOiAnbWVkaXVtJyxcblx0XHRcdDQ6ICdzdHJvbmcnLFxuXHRcdFx0NTogJ21pc21hdGNoJyxcblx0XHR9O1xuXG5cdFx0cmV0dXJuICggc2x1Z3NbIHN0cmVuZ3RoX3ZhbCBdICkgPyBzbHVnc1sgc3RyZW5ndGhfdmFsIF0gOiBzbHVnc1s1XTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSB0cmFuc2xhdGVkIHRleHQgYXNzb2NpYXRlZCB3aXRoIGEgc3RyZW5ndGggdmFsdWVcblx0ICpcblx0ICogQHNpbmNlICAzLjAuMFxuXHQgKlxuXHQgKiBAcGFyYW0ge0ludGVnZXJ9IHN0cmVuZ3RoX3ZhbCBTdHJlbmd0aCB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRnZXRfc3RyZW5ndGhfdGV4dDogZnVuY3Rpb24oIHN0cmVuZ3RoX3ZhbCApIHtcblxuXHRcdHZhciB0ZXh0cyA9IHtcblx0XHRcdCctMSc6IExMTVMubDEwbi50cmFuc2xhdGUoICdUb28gU2hvcnQnICksXG5cdFx0XHQxOiBMTE1TLmwxMG4udHJhbnNsYXRlKCAnVmVyeSBXZWFrJyApLFxuXHRcdFx0MjogTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1dlYWsnICksXG5cdFx0XHQzOiBMTE1TLmwxMG4udHJhbnNsYXRlKCAnTWVkaXVtJyApLFxuXHRcdFx0NDogTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1N0cm9uZycgKSxcblx0XHRcdDU6IExMTVMubDEwbi50cmFuc2xhdGUoICdNaXNtYXRjaCcgKSxcblx0XHR9O1xuXG5cdFx0cmV0dXJuICggdGV4dHNbIHN0cmVuZ3RoX3ZhbCBdICkgPyB0ZXh0c1sgc3RyZW5ndGhfdmFsIF0gOiB0ZXh0c1s1XTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBHZXQgdGhlIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBhIHN0cmVuZ3RoIHNsdWdcblx0ICpcblx0ICogQHNpbmNlIDMuMC4wXG5cdCAqXG5cdCAqIEBwYXJhbSBzdHJpbmcgc3RyZW5ndGhfc2x1ZyBBIHN0cmVuZ3RoIHNsdWcuXG5cdCAqIEByZXR1cm4ge0ludGVnZXJ9XG5cdCAqL1xuXHRnZXRfc3RyZW5ndGhfdmFsdWU6IGZ1bmN0aW9uKCBzdHJlbmd0aF9zbHVnICkge1xuXG5cdFx0dmFyIHZhbHVlcyA9IHtcblx0XHRcdCd0b28tc2hvcnQnOiAtMSxcblx0XHRcdCd2ZXJ5LXdlYWsnOiAxLFxuXHRcdFx0d2VhazogMixcblx0XHRcdG1lZGl1bTogMyxcblx0XHRcdHN0cm9uZzogNCxcblx0XHRcdG1pc21hdGNoOiA1LFxuXHRcdH07XG5cblx0XHRyZXR1cm4gKCB2YWx1ZXNbIHN0cmVuZ3RoX3NsdWcgXSApID8gdmFsdWVzWyBzdHJlbmd0aF9zbHVnIF0gOiB2YWx1ZXMubWlzbWF0Y2g7XG5cblx0fSxcblxuXHQvKipcblx0ICogU2V0dXAgalF1ZXJ5IHJlZmVyZW5jZXMgdG8gRE9NIGVsZW1lbnRzIG5lZWRlZCB0byBwb3dlciB0aGUgcGFzc3dvcmQgbWV0ZXIuXG5cdCAqXG5cdCAqIEBzaW5jZSBbdmVyc2lvbl1cblx0ICpcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYSBtZXRlciBlbGVtZW50IGFuZCBwYXNzd29yZCBmaWVsZCBhcmUgZm91bmQsIG90aGVyd2lzZSByZXR1cm5zIGBmYWxzZWAuXG5cdCAqL1xuXHRzZXR1cF9yZWZlcmVuY2VzOiBmdW5jdGlvbigpIHtcblxuXHRcdGlmICggISB0aGlzLiRtZXRlci5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0dGhpcy4kZm9ybSA9IHRoaXMuJG1ldGVyLmNsb3Nlc3QoICdmb3JtJyApO1xuXHRcdHRoaXMuJHBhc3MgPSB0aGlzLiRmb3JtLmZpbmQoICdpbnB1dCNwYXNzd29yZCcgKTtcblxuXHRcdGlmICggdGhpcy4kcGFzcy5sZW5ndGggJiYgdGhpcy4kcGFzcy5hdHRyKCAnZGF0YS1tYXRjaCcgKSApIHtcblx0XHRcdHRoaXMuJGNvbmYgPSB0aGlzLiRmb3JtLmZpbmQoICcjJyArIHRoaXMuJHBhc3MuYXR0ciggJ2RhdGEtbWF0Y2gnICkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gKCB0aGlzLiRwYXNzLmxlbmd0aCA+IDAgKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBGb3JtIHN1Ym1pc3Npb24gaGFuZGxlciBmb3IgcmVnaXN0cmF0aW9uIGFuZCB1cGRhdGUgZm9ybXNcblx0ICpcblx0ICogQHNpbmNlIDMuMC4wXG5cdCAqIEBzaW5jZSBbdmVyc2lvbl0gQWxsb3cgdGhlIGFjY291bnQgZWRpdCBmb3IgdG8gYnlwYXNzIHN0cmVuZ3RoIGNoZWNraW5nIHdoZW4gdGhlIHBhc3N3b3JkIGZpZWxkIGlzIGRpc2FibGVkIChub3QgYmVpbmcgc3VibWl0dGVkKS5cblx0ICpcblx0ICogQHBhcmFtIG9iaiBlIEV2ZW50IGRhdGEuXG5cdCAqIEByZXR1cm4gdm9pZFxuXHQgKi9cblx0c3VibWl0OiBmdW5jdGlvbiggZSApIHtcblxuXHRcdHZhciBzZWxmID0gZS5kYXRhO1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRzZWxmLiRwYXNzLnRyaWdnZXIoICdrZXl1cCcgKTtcblxuXHRcdC8vIE1lZXRzIHRoZSBzdGF0dXMgcmVxdWlyZW1lbnRzIE9SIHdlJ3JlIG9uIHRoZSBhY2NvdW50IGVkaXQgZm9ybSBhbmQgdGhlIHBhc3N3b3JkIGZpZWxkIGlzIGRpc2FibGVkLlxuXHRcdGlmICggc2VsZi5nZXRfY3VycmVudF9zdHJlbmd0aF9zdGF0dXMoKSB8fCAoIHNlbGYuJGZvcm0uaGFzQ2xhc3MoICdlZGl0LWFjY291bnQnICkgJiYgJ2Rpc2FibGVkJyA9PT0gc2VsZi4kcGFzcy5hdHRyKCAnZGlzYWJsZWQnICkgKSApIHtcblx0XHRcdHNlbGYuJGZvcm0ub2ZmKCAnc3VibWl0Jywgc2VsZi5zdWJtaXQgKTtcblx0XHRcdHNlbGYuJGZvcm0udHJpZ2dlciggJ3N1Ym1pdCcgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCggJ2h0bWwsIGJvZHknICkuYW5pbWF0ZSgge1xuXHRcdFx0XHRzY3JvbGxUb3A6IHNlbGYuJG1ldGVyLm9mZnNldCgpLnRvcCAtIDEwMCxcblx0XHRcdH0sIDIwMCApO1xuXHRcdFx0c2VsZi4kbWV0ZXIuaGlkZSgpO1xuXHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYuJG1ldGVyLmZhZGVJbiggNDAwICk7XG5cdFx0XHR9LCAyMjAgKTtcblx0XHR9XG5cdH1cblxufSApO1xuIiwiLyoqXG4gKiBQcmljaW5nIFRhYmxlIFVJXG4gKlxuICogQHBhY2thZ2UgTGlmdGVyTE1TL1NjcmlwdHNcbiAqXG4gKiBAc2luY2UgIFVua25vd24uXG4gKiBAdmVyc2lvbiAgVW5rbm93bi5cbiAqL1xuXG5MTE1TLlByaWNpbmdfVGFibGVzID0ge1xuXG5cdC8qKlxuXHQgKiBJbml0XG5cdCAqL1xuXHRpbml0OiBmdW5jdGlvbigpIHtcblxuXHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdGlmICggJCggJ2JvZHknICkuaGFzQ2xhc3MoICd3cC1hZG1pbicgKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoICQoICcubGxtcy1hY2Nlc3MtcGxhbnMnICkubGVuZ3RoICkge1xuXG5cdFx0XHRMTE1TLndhaXRfZm9yX21hdGNoSGVpZ2h0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5iaW5kKCk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdHRoaXMuJGxvY2tlZCA9ICQoICdhW2hyZWY9XCIjbGxtcy1wbGFuLWxvY2tlZFwiXScgKTtcblxuXHRcdFx0aWYgKCB0aGlzLiRsb2NrZWQubGVuZ3RoICkge1xuXG5cdFx0XHRcdExMTVMud2FpdF9mb3JfcG9wb3ZlciggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2VsZi5iaW5kX2xvY2tlZCgpO1xuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBCaW5kIE1ldGhvZFxuXHQgKiBIYW5kbGVzIGRvbSBiaW5kaW5nIG9uIGxvYWRcblx0ICpcblx0ICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXG5cdCAqL1xuXHRiaW5kOiBmdW5jdGlvbigpIHtcblxuXHRcdCQoICcubGxtcy1hY2Nlc3MtcGxhbi1jb250ZW50JyApLm1hdGNoSGVpZ2h0KCk7XG5cdFx0JCggJy5sbG1zLWFjY2Vzcy1wbGFuLXByaWNpbmcudHJpYWwnICkubWF0Y2hIZWlnaHQoKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBTZXR1cCBhIHBvcG92ZXIgZm9yIG1lbWJlcnMtb25seSByZXN0cmljdGVkIHBsYW5zXG5cdCAqXG5cdCAqIEByZXR1cm4gdm9pZFxuXHQgKiBAc2luY2UgICAgMy4wLjBcblx0ICogQHZlcnNpb24gIDMuOS4xXG5cdCAqL1xuXHRiaW5kX2xvY2tlZDogZnVuY3Rpb24oKSB7XG5cblx0XHR0aGlzLiRsb2NrZWQuZWFjaCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdCQoIHRoaXMgKS53ZWJ1aVBvcG92ZXIoIHtcblx0XHRcdFx0YW5pbWF0aW9uOiAncG9wJyxcblx0XHRcdFx0Y2xvc2VhYmxlOiB0cnVlLFxuXHRcdFx0XHRjb250ZW50OiBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0XHR2YXIgJGNvbnRlbnQgPSAkKCAnPGRpdiBjbGFzcz1cImxsbXMtbWVtYmVycy1vbmx5LXJlc3RyaWN0aW9uc1wiIC8+JyApO1xuXHRcdFx0XHRcdCRjb250ZW50LmFwcGVuZCggZS4kZWxlbWVudC5jbG9zZXN0KCAnLmxsbXMtYWNjZXNzLXBsYW4nICkuZmluZCggJy5sbG1zLWFjY2Vzcy1wbGFuLXJlc3RyaWN0aW9ucyB1bCcgKS5jbG9uZSgpICk7XG5cdFx0XHRcdFx0cmV0dXJuICRjb250ZW50O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRwbGFjZW1lbnQ6ICd0b3AnLFxuXHRcdFx0XHRzdHlsZTogJ2ludmVyc2UnLFxuXHRcdFx0XHR0aXRsZTogTExNUy5sMTBuLnRyYW5zbGF0ZSggJ01lbWJlcnMgT25seSBQcmljaW5nJyApLFxuXHRcdFx0XHR3aWR0aDogJzI4MHB4Jyxcblx0XHRcdH0gKTtcblxuXHRcdH0gKTtcblxuXHR9LFxuXG59O1xuIiwiLyoqXG4gKiBMaWZ0ZXJMTVMgUmV2aWV3cyBKU1xuICpcbiAqIEBwYWNrYWdlIExpZnRlckxNUy9TY3JpcHRzXG4gKlxuICogQHNpbmNlIFVua25vd25cbiAqIEB2ZXJzaW9uIFVua25vd25cbiAqL1xuXG5MTE1TLlJldmlldyA9IHtcblx0LyoqXG5cdCAqIEluaXRcblx0ICogbG9hZHMgY2xhc3MgbWV0aG9kc1xuXHQgKi9cblx0aW5pdDogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBSZXZpZXcgJyk7XG5cdFx0dGhpcy5iaW5kKCk7XG5cdH0sXG5cblx0LyoqXG5cdCAqIFRoaXMgZnVuY3Rpb24gYmluZHMgYWN0aW9ucyB0byB0aGUgYXBwcm9wcmlhdGUgaG9va3Ncblx0ICovXG5cdGJpbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdCQoICcjbGxtc19yZXZpZXdfc3VibWl0X2J1dHRvbicgKS5jbGljayhmdW5jdGlvbigpXG5cdFx0XHR7XG5cdFx0XHRpZiAoJCggJyNyZXZpZXdfdGl0bGUnICkudmFsKCkgIT09ICcnICYmICQoICcjcmV2aWV3X3RleHQnICkudmFsKCkgIT09ICcnKSB7XG5cdFx0XHRcdGpRdWVyeS5hamF4KHtcblx0XHRcdFx0XHR0eXBlIDogJ3Bvc3QnLFxuXHRcdFx0XHRcdGRhdGFUeXBlIDogJ2pzb24nLFxuXHRcdFx0XHRcdHVybCA6IHdpbmRvdy5sbG1zLmFqYXh1cmwsXG5cdFx0XHRcdFx0ZGF0YSA6IHtcblx0XHRcdFx0XHRcdGFjdGlvbiA6ICdMTE1TU3VibWl0UmV2aWV3Jyxcblx0XHRcdFx0XHRcdHJldmlld190aXRsZTogJCggJyNyZXZpZXdfdGl0bGUnICkudmFsKCksXG5cdFx0XHRcdFx0XHRyZXZpZXdfdGV4dDogJCggJyNyZXZpZXdfdGV4dCcgKS52YWwoKSxcblx0XHRcdFx0XHRcdHBhZ2VJRCA6ICQoICcjcG9zdF9JRCcgKS52YWwoKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCAnUmV2aWV3IHN1Y2Nlc3MnICk7XG5cdFx0XHRcdFx0XHQkKCAnI3Jldmlld19ib3gnICkuaGlkZSggJ3N3aW5nJyApO1xuXHRcdFx0XHRcdFx0JCggJyN0aGFua195b3VfYm94JyApLnNob3coICdzd2luZycgKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGVycm9yOiBmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24gKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCBqcVhIUiApO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coIHRleHRTdGF0dXMgKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCBlcnJvclRocm93biApO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKCQoICcjcmV2aWV3X3RpdGxlJyApLnZhbCgpID09PSAnJykge1xuXHRcdFx0XHRcdCQoICcjcmV2aWV3X3RpdGxlX2Vycm9yJyApLnNob3coICdzd2luZycgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKCAnI3Jldmlld190aXRsZV9lcnJvcicgKS5oaWRlKCAnc3dpbmcnICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCQoICcjcmV2aWV3X3RleHQnICkudmFsKCkgPT09ICcnKSB7XG5cdFx0XHRcdFx0JCggJyNyZXZpZXdfdGV4dF9lcnJvcicgKS5zaG93KCAnc3dpbmcnICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JCggJyNyZXZpZXdfdGV4dF9lcnJvcicgKS5oaWRlKCAnc3dpbmcnICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHRpZiAoICQoICcjX2xsbXNfZGlzcGxheV9yZXZpZXdzJyApLmF0dHIoICdjaGVja2VkJyApICkge1xuXHRcdFx0JCggJy5sbG1zLW51bS1yZXZpZXdzLXRvcCcgKS5hZGRDbGFzcyggJ3RvcCcgKTtcblx0XHRcdCQoICcubGxtcy1udW0tcmV2aWV3cy1ib3R0b20nICkuc2hvdygpO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoICcubGxtcy1udW0tcmV2aWV3cy1ib3R0b20nICkuaGlkZSgpO1xuXHRcdH1cblx0XHQkKCAnI19sbG1zX2Rpc3BsYXlfcmV2aWV3cycgKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoICQoICcjX2xsbXNfZGlzcGxheV9yZXZpZXdzJyApLmF0dHIoICdjaGVja2VkJyApICkge1xuXHRcdFx0XHQkKCAnLmxsbXMtbnVtLXJldmlld3MtdG9wJyApLmFkZENsYXNzKCAndG9wJyApO1xuXHRcdFx0XHQkKCAnLmxsbXMtbnVtLXJldmlld3MtYm90dG9tJyApLnNob3coKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoICcubGxtcy1udW0tcmV2aWV3cy10b3AnICkucmVtb3ZlQ2xhc3MoICd0b3AnICk7XG5cdFx0XHRcdCQoICcubGxtcy1udW0tcmV2aWV3cy1ib3R0b20nICkuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdH0sXG59O1xuIiwiLyoqXG4gKiBBZGQgU3Bpbm5lcnMgZm9yIEFKQVggZXZlbnRzXG4gKlxuICogQHBhY2thZ2UgTGlmdGVyTE1TL1NjcmlwdHNcbiAqXG4gKiBAc2luY2UgMy4wLjBcbiAqIEB2ZXJzaW9uIDMuMC4wXG4gKi9cblxuTExNUy5TcGlubmVyID0ge1xuXG5cdC8qKlxuXHQgKiBHZXQgYW4gZXhpdGluZyBzcGlubmVyIGVsZW1lbnQgb3IgY3JlYXRlIGEgbmV3IG9uZVxuXHQgKlxuXHQgKiBAcGFyYW0gICAgb2JqICAgICAgJGVsICAgalF1ZXJ5IHNlbGVjdG9yIG9mIHRoZSBwYXJlbnQgZWxlbWVudCB0aGF0IHNob3VsZCBob2xkIGFuZCBiZSBtYXNlZCBieSBhIHNwaW5uZXJcblx0ICogQHBhcmFtICAgIHN0cmluZyAgIHNpemUgIHNpemUgb3IgdGhlIHNwaW5uZXIgW2RlZmF1bHR8c21hbGxdXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0IGlzIDQwcHhcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgIHNtYWxsIGlzIDIwcHhcblx0ICogQHJldHVybiAgIG9ialxuXHQgKiBAc2luY2UgMy4wLjBcblx0ICogQHZlcnNpb24gMy4wLjBcblx0ICovXG5cdGdldDogZnVuY3Rpb24oICRlbCwgc2l6ZSApIHtcblxuXHRcdC8vIGxvb2sgZm9yIGFuIGV4aXN0aW5nIHNwaW5uZXJcblx0XHR2YXIgJHNwaW5uZXIgPSAkZWwuZmluZCggJy5sbG1zLXNwaW5uaW5nJyApLmZpcnN0KCk7XG5cblx0XHQvLyBubyBzcGlubmVyIGluc2lkZSAkZWxcblx0XHRpZiAoICEgJHNwaW5uZXIubGVuZ3RoICkge1xuXG5cdFx0XHRzaXplID0gKCBzaXplICkgPyBzaXplIDogJ2RlZmF1bHQnO1xuXG5cdFx0XHQvLyBjcmVhdGUgdGhlIHNwaW5uZXJcblx0XHRcdCRzcGlubmVyID0gJCggJzxkaXYgY2xhc3M9XCJsbG1zLXNwaW5uaW5nXCI+PGkgY2xhc3M9XCJsbG1zLXNwaW5uZXIgJyArIHNpemUgKyAnXCI+PC9pPjwvZGl2PicgKTtcblxuXHRcdFx0Ly8gYWRkIGl0IHRvIHRoZSBkb21cblx0XHRcdCRlbC5hcHBlbmQoICRzcGlubmVyICk7XG5cblx0XHR9XG5cblx0XHQvLyByZXR1cm4gaXRcblx0XHRyZXR1cm4gJHNwaW5uZXI7XG5cblx0fSxcblxuXHQvKipcblx0ICogU3RhcnQgc3Bpbm5lcihzKSBpbnI9c2lkZSBhIGdpdmVuIGVsZW1lbnRcblx0ICogQ3JlYXRlcyB0aGVtIGlmIHRoZXkgZG9uJ3QgZXhpc3QhXG5cdCAqXG5cdCAqIEBwYXJhbSAgIG9iaiAgICAgICRlbCAgIGpRdWVyeSBzZWxlY3RvciBvZiB0aGUgcGFyZW50IGVsZW1lbnQgdGhhdCBzaG91bGQgaG9sZCBhbmQgYmUgbWFzZWQgYnkgYSBzcGlubmVyXG5cdCAqIEBwYXJhbSAgIHN0cmluZyAgIHNpemUgIHNpemUgb3IgdGhlIHNwaW5uZXIgW2RlZmF1bHR8c21hbGxdXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0IGlzIDQwcHhcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgIHNtYWxsIGlzIDIwcHhcblx0ICogQHJldHVybiAgdm9pZFxuXHQgKiBAc2luY2UgICAzLjAuMFxuXHQgKiBAdmVyc2lvbiAzLjAuMFxuXHQgKi9cblx0c3RhcnQ6IGZ1bmN0aW9uKCAkZWwsIHNpemUgKSB7XG5cblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHQkZWwuZWFjaCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdHNlbGYuZ2V0KCAkKCB0aGlzICksIHNpemUgKS5zaG93KCk7XG5cblx0XHR9ICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogU3RvcmUgc3Bpbm5lcnMgd2l0aGluIGFuIGVsZW1lbnRcblx0ICpcblx0ICogQHBhcmFtICAgb2JqICAgICAgJGVsICAgalF1ZXJ5IHNlbGVjdG9yIG9mIHRoZSBwYXJlbnQgZWxlbWVudCB0aGF0IHNob3VsZCBob2xkIGFuZCBiZSBtYXNlZCBieSBhIHNwaW5uZXJcblx0ICogQHJldHVybiAgdm9pZFxuXHQgKiBAc2luY2UgICAzLjAuMFxuXHQgKiBAdmVyc2lvbiAzLjAuMFxuXHQgKi9cblx0c3RvcDogZnVuY3Rpb24oICRlbCApIHtcblxuXHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdCRlbC5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0c2VsZi5nZXQoICQoIHRoaXMgKSApLmhpZGUoKTtcblxuXHRcdH0gKTtcblxuXHR9XG5cbn07XG4iLCIvKiFcbiAqIEphdmFTY3JpcHQgQ29va2llIHYyLjIuMVxuICogaHR0cHM6Ly9naXRodWIuY29tL2pzLWNvb2tpZS9qcy1jb29raWVcbiAqXG4gKiBDb3B5cmlnaHQgMjAwNiwgMjAxNSBLbGF1cyBIYXJ0bCAmIEZhZ25lciBCcmFja1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKi9cbjsoZnVuY3Rpb24gKGZhY3RvcnkpIHtcblx0dmFyIHJlZ2lzdGVyZWRJbk1vZHVsZUxvYWRlcjtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdGRlZmluZShmYWN0b3J5KTtcblx0XHRyZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXIgPSB0cnVlO1xuXHR9XG5cdGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0XHRyZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXIgPSB0cnVlO1xuXHR9XG5cdGlmICghcmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyKSB7XG5cdFx0dmFyIE9sZENvb2tpZXMgPSB3aW5kb3cuQ29va2llcztcblx0XHR2YXIgYXBpID0gd2luZG93LkNvb2tpZXMgPSBmYWN0b3J5KCk7XG5cdFx0YXBpLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR3aW5kb3cuQ29va2llcyA9IE9sZENvb2tpZXM7XG5cdFx0XHRyZXR1cm4gYXBpO1xuXHRcdH07XG5cdH1cbn0oZnVuY3Rpb24gKCkge1xuXHRmdW5jdGlvbiBleHRlbmQgKCkge1xuXHRcdHZhciBpID0gMDtcblx0XHR2YXIgcmVzdWx0ID0ge307XG5cdFx0Zm9yICg7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhdHRyaWJ1dGVzID0gYXJndW1lbnRzWyBpIF07XG5cdFx0XHRmb3IgKHZhciBrZXkgaW4gYXR0cmlidXRlcykge1xuXHRcdFx0XHRyZXN1bHRba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdGZ1bmN0aW9uIGRlY29kZSAocykge1xuXHRcdHJldHVybiBzLnJlcGxhY2UoLyglWzAtOUEtWl17Mn0pKy9nLCBkZWNvZGVVUklDb21wb25lbnQpO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdCAoY29udmVydGVyKSB7XG5cdFx0ZnVuY3Rpb24gYXBpKCkge31cblxuXHRcdGZ1bmN0aW9uIHNldCAoa2V5LCB2YWx1ZSwgYXR0cmlidXRlcykge1xuXHRcdFx0aWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRhdHRyaWJ1dGVzID0gZXh0ZW5kKHtcblx0XHRcdFx0cGF0aDogJy8nXG5cdFx0XHR9LCBhcGkuZGVmYXVsdHMsIGF0dHJpYnV0ZXMpO1xuXG5cdFx0XHRpZiAodHlwZW9mIGF0dHJpYnV0ZXMuZXhwaXJlcyA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0YXR0cmlidXRlcy5leHBpcmVzID0gbmV3IERhdGUobmV3IERhdGUoKSAqIDEgKyBhdHRyaWJ1dGVzLmV4cGlyZXMgKiA4NjRlKzUpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBXZSdyZSB1c2luZyBcImV4cGlyZXNcIiBiZWNhdXNlIFwibWF4LWFnZVwiIGlzIG5vdCBzdXBwb3J0ZWQgYnkgSUVcblx0XHRcdGF0dHJpYnV0ZXMuZXhwaXJlcyA9IGF0dHJpYnV0ZXMuZXhwaXJlcyA/IGF0dHJpYnV0ZXMuZXhwaXJlcy50b1VUQ1N0cmluZygpIDogJyc7XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHZhciByZXN1bHQgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG5cdFx0XHRcdGlmICgvXltcXHtcXFtdLy50ZXN0KHJlc3VsdCkpIHtcblx0XHRcdFx0XHR2YWx1ZSA9IHJlc3VsdDtcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZSkge31cblxuXHRcdFx0dmFsdWUgPSBjb252ZXJ0ZXIud3JpdGUgP1xuXHRcdFx0XHRjb252ZXJ0ZXIud3JpdGUodmFsdWUsIGtleSkgOlxuXHRcdFx0XHRlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHZhbHVlKSlcblx0XHRcdFx0XHQucmVwbGFjZSgvJSgyM3wyNHwyNnwyQnwzQXwzQ3wzRXwzRHwyRnwzRnw0MHw1Qnw1RHw1RXw2MHw3Qnw3RHw3QykvZywgZGVjb2RlVVJJQ29tcG9uZW50KTtcblxuXHRcdFx0a2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhrZXkpKVxuXHRcdFx0XHQucmVwbGFjZSgvJSgyM3wyNHwyNnwyQnw1RXw2MHw3QykvZywgZGVjb2RlVVJJQ29tcG9uZW50KVxuXHRcdFx0XHQucmVwbGFjZSgvW1xcKFxcKV0vZywgZXNjYXBlKTtcblxuXHRcdFx0dmFyIHN0cmluZ2lmaWVkQXR0cmlidXRlcyA9ICcnO1xuXHRcdFx0Zm9yICh2YXIgYXR0cmlidXRlTmFtZSBpbiBhdHRyaWJ1dGVzKSB7XG5cdFx0XHRcdGlmICghYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0cmluZ2lmaWVkQXR0cmlidXRlcyArPSAnOyAnICsgYXR0cmlidXRlTmFtZTtcblx0XHRcdFx0aWYgKGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0gPT09IHRydWUpIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENvbnNpZGVycyBSRkMgNjI2NSBzZWN0aW9uIDUuMjpcblx0XHRcdFx0Ly8gLi4uXG5cdFx0XHRcdC8vIDMuICBJZiB0aGUgcmVtYWluaW5nIHVucGFyc2VkLWF0dHJpYnV0ZXMgY29udGFpbnMgYSAleDNCIChcIjtcIilcblx0XHRcdFx0Ly8gICAgIGNoYXJhY3Rlcjpcblx0XHRcdFx0Ly8gQ29uc3VtZSB0aGUgY2hhcmFjdGVycyBvZiB0aGUgdW5wYXJzZWQtYXR0cmlidXRlcyB1cCB0byxcblx0XHRcdFx0Ly8gbm90IGluY2x1ZGluZywgdGhlIGZpcnN0ICV4M0IgKFwiO1wiKSBjaGFyYWN0ZXIuXG5cdFx0XHRcdC8vIC4uLlxuXHRcdFx0XHRzdHJpbmdpZmllZEF0dHJpYnV0ZXMgKz0gJz0nICsgYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXS5zcGxpdCgnOycpWzBdO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gKGRvY3VtZW50LmNvb2tpZSA9IGtleSArICc9JyArIHZhbHVlICsgc3RyaW5naWZpZWRBdHRyaWJ1dGVzKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXQgKGtleSwganNvbikge1xuXHRcdFx0aWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgamFyID0ge307XG5cdFx0XHQvLyBUbyBwcmV2ZW50IHRoZSBmb3IgbG9vcCBpbiB0aGUgZmlyc3QgcGxhY2UgYXNzaWduIGFuIGVtcHR5IGFycmF5XG5cdFx0XHQvLyBpbiBjYXNlIHRoZXJlIGFyZSBubyBjb29raWVzIGF0IGFsbC5cblx0XHRcdHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llID8gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7ICcpIDogW107XG5cdFx0XHR2YXIgaSA9IDA7XG5cblx0XHRcdGZvciAoOyBpIDwgY29va2llcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgcGFydHMgPSBjb29raWVzW2ldLnNwbGl0KCc9Jyk7XG5cdFx0XHRcdHZhciBjb29raWUgPSBwYXJ0cy5zbGljZSgxKS5qb2luKCc9Jyk7XG5cblx0XHRcdFx0aWYgKCFqc29uICYmIGNvb2tpZS5jaGFyQXQoMCkgPT09ICdcIicpIHtcblx0XHRcdFx0XHRjb29raWUgPSBjb29raWUuc2xpY2UoMSwgLTEpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHR2YXIgbmFtZSA9IGRlY29kZShwYXJ0c1swXSk7XG5cdFx0XHRcdFx0Y29va2llID0gKGNvbnZlcnRlci5yZWFkIHx8IGNvbnZlcnRlcikoY29va2llLCBuYW1lKSB8fFxuXHRcdFx0XHRcdFx0ZGVjb2RlKGNvb2tpZSk7XG5cblx0XHRcdFx0XHRpZiAoanNvbikge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0Y29va2llID0gSlNPTi5wYXJzZShjb29raWUpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRqYXJbbmFtZV0gPSBjb29raWU7XG5cblx0XHRcdFx0XHRpZiAoa2V5ID09PSBuYW1lKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBrZXkgPyBqYXJba2V5XSA6IGphcjtcblx0XHR9XG5cblx0XHRhcGkuc2V0ID0gc2V0O1xuXHRcdGFwaS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdFx0XHRyZXR1cm4gZ2V0KGtleSwgZmFsc2UgLyogcmVhZCBhcyByYXcgKi8pO1xuXHRcdH07XG5cdFx0YXBpLmdldEpTT04gPSBmdW5jdGlvbiAoa2V5KSB7XG5cdFx0XHRyZXR1cm4gZ2V0KGtleSwgdHJ1ZSAvKiByZWFkIGFzIGpzb24gKi8pO1xuXHRcdH07XG5cdFx0YXBpLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXksIGF0dHJpYnV0ZXMpIHtcblx0XHRcdHNldChrZXksICcnLCBleHRlbmQoYXR0cmlidXRlcywge1xuXHRcdFx0XHRleHBpcmVzOiAtMVxuXHRcdFx0fSkpO1xuXHRcdH07XG5cblx0XHRhcGkuZGVmYXVsdHMgPSB7fTtcblxuXHRcdGFwaS53aXRoQ29udmVydGVyID0gaW5pdDtcblxuXHRcdHJldHVybiBhcGk7XG5cdH1cblxuXHRyZXR1cm4gaW5pdChmdW5jdGlvbiAoKSB7fSk7XG59KSk7IixudWxsLCIvKipcbiAqIFN0dWRlbnQgRGFzaGJvYXJkIHJlbGF0ZWQgSlNcbiAqXG4gKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuICpcbiAqIEBzaW5jZSAzLjcuMFxuICogQHNpbmNlIDMuMTAuMCBCaW5kIGV2ZW50cyBvbiB0aGUgb3JkZXJzIHNjcmVlbi5cbiAqIEBzaW5jZSBbdmVyc2lvbl0gUmVtb3ZlZCByZWR1bmRhbnQgcGFzc3dvcmQgdG9nZ2xlIGxvZ2ljIGZvciBlZGl0IGFjY291bnQgc2NyZWVuLlxuICogQHZlcnNpb24gW3ZlcnNpb25dXG4gKi9cbkxMTVMuU3R1ZGVudERhc2hib2FyZCA9IHtcblxuXHQvKipcblx0ICogU2x1ZyBmb3IgdGhlIGN1cnJlbnQgc2NyZWVuL2VuZHBvaW50XG5cdCAqXG5cdCAqIEB0eXBlICB7U3RyaW5nfVxuXHQgKi9cblx0c2NyZWVuOiAnJyxcblxuXHQvKipcblx0ICogSW5pdFxuXHQgKlxuXHQgKiBAc2luY2UgMy43LjBcblx0ICogQHNpbmNlIDMuMTAuMCBVbmtub3duXG5cdCAqIEBzaW5jZSBbdmVyc2lvbl0gUmVtb3ZlZCBwYXNzd29yZCB0b2dnbGUgbG9naWMuXG5cdCAqXG5cdCAqIEByZXR1cm4gdm9pZFxuXHQgKi9cblx0aW5pdDogZnVuY3Rpb24oKSB7XG5cblx0XHRpZiAoICQoICcubGxtcy1zdHVkZW50LWRhc2hib2FyZCcgKS5sZW5ndGggKSB7XG5cdFx0XHR0aGlzLmJpbmQoKTtcblx0XHRcdGlmICggJ29yZGVycycgPT09IHRoaXMuZ2V0X3NjcmVlbigpICkge1xuXHRcdFx0XHR0aGlzLmJpbmRfb3JkZXJzKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdH0sXG5cblx0LyoqXG5cdCAqIEJpbmQgRE9NIGV2ZW50c1xuXHQgKlxuXHQgKiBAc2luY2UgMy43LjBcblx0ICogQHNpbmNlIDMuNy40IFVua25vd24uXG5cdCAqIEBzaW5jZSBbdmVyc2lvbl0gUmVtb3ZlZCBwYXNzd29yZCB0b2dnbGUgbG9naWMuXG5cdCAqXG5cdCAqIEByZXR1cm4gICB2b2lkXG5cdCAqL1xuXHRiaW5kOiBmdW5jdGlvbigpIHtcblxuXHRcdCQoICcubGxtcy1kb251dCcgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdExMTVMuRG9udXQoICQoIHRoaXMgKSApO1xuXHRcdH0gKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBCaW5kIGV2ZW50cyByZWxhdGVkIHRvIHRoZSBvcmRlcnMgc2NyZWVuIG9uIHRoZSBkYXNoYm9hcmRcblx0ICpcblx0ICogQHNpbmNlIDMuMTAuMFxuXHQgKlxuXHQgKiBAcmV0dXJuIHZvaWRcblx0ICovXG5cdGJpbmRfb3JkZXJzOiBmdW5jdGlvbigpIHtcblxuXHRcdCQoICcjbGxtcy1jYW5jZWwtc3Vic2NyaXB0aW9uLWZvcm0nICkub24oICdzdWJtaXQnLCB0aGlzLm9yZGVyX2NhbmNlbF93YXJuaW5nICk7XG5cdFx0JCggJyNsbG1zX3VwZGF0ZV9wYXltZW50X21ldGhvZCcgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHQkKCAnaW5wdXRbbmFtZT1cImxsbXNfcGF5bWVudF9nYXRld2F5XCJdOmNoZWNrZWQnICkudHJpZ2dlciggJ2NoYW5nZScgKTtcblx0XHRcdCQoIHRoaXMgKS5jbG9zZXN0KCAnZm9ybScgKS5maW5kKCAnLmxsbXMtc3dpdGNoLXBheW1lbnQtc291cmNlLW1haW4nICkuc2xpZGVUb2dnbGUoICcyMDAnICk7XG5cdFx0fSApO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIEdldCB0aGUgY3VycmVudCBkYXNoYm9hcmQgZW5kcG9pbnQvdGFiIHNsdWdcblx0ICpcblx0ICogQHNpbmNlIDMuMTAuMFxuXHQgKlxuXHQgKiBAcmV0dXJuIHZvaWRcblx0ICovXG5cdGdldF9zY3JlZW46IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggISB0aGlzLnNjcmVlbiApIHtcblx0XHRcdHRoaXMuc2NyZWVuID0gJCggJy5sbG1zLXN0dWRlbnQtZGFzaGJvYXJkJyApLmF0dHIoICdkYXRhLWN1cnJlbnQnICk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLnNjcmVlbjtcblx0fSxcblxuXHQvKipcblx0ICogU2hvdyBhIGNvbmZpcm1hdGlvbiB3YXJuaW5nIHdoZW4gQ2FuY2VsIFN1YnNjcmlwdGlvbiBmb3JtIGlzIHN1Ym1pdHRlZFxuXHQgKlxuXHQgKiBAc2luY2UgMy4xMC4wXG5cdCAqXG5cdCAqIEBwYXJhbSBvYmogZSBKUyBldmVudCBkYXRhLlxuXHQgKiBAcmV0dXJuIHZvaWRcblx0ICovXG5cdG9yZGVyX2NhbmNlbF93YXJuaW5nOiBmdW5jdGlvbiggZSApIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0dmFyIG1zZyA9IExMTVMubDEwbi50cmFuc2xhdGUoICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY2FuY2VsIHlvdXIgc3Vic2NyaXB0aW9uPycgKTtcblx0XHRpZiAoIHdpbmRvdy5jb25maXJtKCBMTE1TLmwxMG4udHJhbnNsYXRlKCBtc2cgKSApICkge1xuXHRcdFx0JCggdGhpcyApLm9mZiggJ3N1Ym1pdCcsIHRoaXMub3JkZXJfY2FuY2VsX3dhcm5pbmcgKTtcblx0XHRcdCQoIHRoaXMgKS5zdWJtaXQoKTtcblx0XHR9XG5cdH0sXG5cbn07XG4iLCIvKiBnbG9iYWwgTExNUywgJCAqL1xuXG4vKipcbiAqIFVzZXIgZXZlbnQvaW50ZXJhY3Rpb24gdHJhY2tpbmcuXG4gKlxuICogQHNpbmNlIDMuMzYuMFxuICogQHNpbmNlIDMuMzYuMiBGaXggSlMgZXJyb3Igd2hlbiBzZXR0aW5ncyBhcmVuJ3QgbG9hZGVkLlxuPDw8PDw8PCBIRUFEXG4gKiBAc2luY2UgW3ZlcnNpb25dIFNldCBgc2V0dGluZ3NgIGFzIGFuIGVtcHR5IG9iamVjdCB3aGVuIG5vIHNldHRpbmdzIHN1cHBsaWVkLlxuICogICAgICAgICAgICAgICBPbmx5IGF0dGVtcHQgdG8gYWRkIGEgbm9uY2UgdG8gdGhlIGRhdGFzdG9yZSB3aGVuIGEgbm9uY2UgZXhpc3RzIGluIHRoZSBzZXR0aW5ncyBvYmplY3QuXG49PT09PT09XG4gKiBAc2luY2UgMy4zNy4yIFdoZW4gYWRkaW5nIGFuIGV2ZW50IHRvIHRoZSBzdG9yYWUgYWxzbyBtYWtlIHN1cmUgdGhlIG5vbmNlIGlzIHNldCBmb3Igc2VydmVyLXNpZGUgdmVyaWZpY2F0aW9uLlxuPj4+Pj4+PiA5MmY0NjM4OTcwNzk3NDBkMGJjODY4NTUxMDg4YTMxY2VjYjg1MGRmXG4gKi9cbkxMTVMuVHJhY2tpbmcgPSBmdW5jdGlvbiggc2V0dGluZ3MgKSB7XG5cblx0c2V0dGluZ3MgPSBzZXR0aW5ncyB8fCB7fTtcblxuXHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0c3RvcmUgPSBuZXcgTExNUy5TdG9yYWdlKCAnbGxtcy10cmFja2luZycgKTtcblxuXHRzZXR0aW5ncyA9ICdzdHJpbmcnID09PSB0eXBlb2Ygc2V0dGluZ3MgPyBKU09OLnBhcnNlKCBzZXR0aW5ncyApIDogc2V0dGluZ3M7XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemUgLyBCaW5kIGFsbCB0cmFja2luZyBldmVudCBsaXN0ZW5lcnMuXG5cdCAqXG5cdCAqIEBzaW5jZSAzLjM2LjBcblx0ICogQHNpbmNlIFt2ZXJzaW9uXSBPbmx5IGF0dGVtcHQgdG8gYWRkIGEgbm9uY2UgdG8gdGhlIGRhdGFzdG9yZSB3aGVuIGEgbm9uY2UgZXhpc3RzIGluIHRoZSBzZXR0aW5ncyBvYmplY3QuXG5cdCAqXG5cdCAqIEByZXR1cm4ge3ZvaWR9XG5cdCAqL1xuXHRmdW5jdGlvbiBpbml0KCkge1xuXG5cdFx0Ly8gU2V0IHRoZSBub25jZSBmb3Igc2VydmVyLXNpZGUgdmVyaWZpY2F0aW9uLlxuXHRcdGlmICggc2V0dGluZ3Mubm9uY2UgKSB7XG5cblx0XHRcdHN0b3JlLnNldCggJ25vbmNlJywgc2V0dGluZ3Mubm9uY2UgKTtcblxuXHRcdH1cblxuXHRcdHNlbGYuYWRkRXZlbnQoICdwYWdlLmxvYWQnICk7XG5cblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2JlZm9yZXVubG9hZCcsIG9uQmVmb3JlVW5sb2FkICk7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICd1bmxvYWQnLCBvblVubG9hZCApO1xuXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3Zpc2liaWxpdHljaGFuZ2UnLCBvblZpc2liaWxpdHlDaGFuZ2UgKTtcblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBBZGQgYW4gZXZlbnQuXG5cdCAqXG5cdCAqIEBzaW5jZSAzLjM2LjBcblx0ICogQHNpbmNlIDMuMzYuMiBGaXggZXJyb3Igd2hlbiBzZXR0aW5ncyBhcmVuJ3QgbG9hZGVkLlxuXHQgKiBAc2luY2UgMy4zNy4yIEFsd2F5cyBtYWtlIHN1cmUgdGhlIG5vbmNlIGlzIHNldCBmb3Igc2VydmVyLXNpZGUgdmVyaWZpY2F0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0gc3RyaW5nfG9iaiBldmVudCBFdmVudCBJZCAodHlwZS5ldmVudCkgb3IgYSBmdWxsIGV2ZW50IG9iamVjdCBmcm9tIGB0aGlzLm1ha2VFdmVudE9iaigpYC5cblx0ICogQHBhcmFtIGludCBhcmdzIE9wdGlvbmFsIGFkZGl0aW9uYWwgYXJndW1lbnRzIHRvIHBhc3MgdG8gYHRoaXMubWFrZUV2ZW50T2JqKClgLlxuXHQgKiBAcmV0dXJuIHt2b2lkfVxuXHQgKi9cblx0dGhpcy5hZGRFdmVudCA9IGZ1bmN0aW9uKCBldmVudCwgYXJncyApIHtcblxuXHRcdGFyZ3MgID0gYXJncyB8fCB7fTtcblx0XHRpZiAoICdzdHJpbmcnID09PSB0eXBlb2YgZXZlbnQgKSB7XG5cdFx0XHRhcmdzLmV2ZW50ID0gZXZlbnQ7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlIGV2ZW50IGlzbid0IHJlZ2lzdGVyZWQgaW4gdGhlIHNldHRpbmdzIGRvbid0IHByb2NlZWQuXG5cdFx0aWYgKCAhc2V0dGluZ3MuZXZlbnRzIHx8IC0xID09PSBzZXR0aW5ncy5ldmVudHMuaW5kZXhPZiggYXJncy5ldmVudCApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGV2ZW50ID0gc2VsZi5tYWtlRXZlbnRPYmooIGFyZ3MgKTtcblxuXHRcdHZhciBhbGwgPSBzdG9yZS5nZXQoICdldmVudHMnLCBbXSApO1xuXHRcdGFsbC5wdXNoKCBldmVudCApO1xuXHRcdHN0b3JlLnNldCggJ2V2ZW50cycsIGFsbCApO1xuXHRcdC8vIE1ha2Ugc3VyZSB0aGUgbm9uY2UgaXMgc2V0IGZvciBzZXJ2ZXItc2lkZSB2ZXJpZmljYXRpb24uXG5cdFx0c3RvcmUuc2V0KCAnbm9uY2UnLCBzZXR0aW5ncy5ub25jZSApO1xuXG5cdH1cblxuXHQvKipcblx0ICogUmV0cmlldmUgaW5pdGlhbGl6YXRpb24gc2V0dGluZ3MuXG5cdCAqXG5cdCAqIEBzaW5jZSAzLjM2LjBcblx0ICpcblx0ICogQHJldHVybiBvYmpcblx0ICovXG5cdHRoaXMuZ2V0U2V0dGluZ3MgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2V0dGluZ3M7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIGFuIGV2ZW50IG9iamVjdCBzdWl0YWJsZSB0byBzYXZlIGFzIGFuIGV2ZW50LlxuXHQgKlxuXHQgKiBAc2luY2UgMy4zNi4wXG5cdCAqXG5cdCAqIEBwYXJhbSBvYmogZXZlbnQge1xuXHQgKiAgICAgRXZlbnQgaGFzaFxuXHQgKlxuXHQgKiAgICAgQHBhcmFtIHtzdHJpbmd9IGV2ZW50IChSZXF1aXJlZCkgRXZlbnQgSUQsIGVnOiBcInBhZ2UubG9hZFwiLlxuXHQgKiAgICAgQHBhcmFtIHt1cmx9IHVybCBFdmVudCBVUkwuIChPcHRpb25hbCwgYWRkZWQgYXV0b21hdGljYWxseSkgU3RvcmVkIGFzIG1ldGFkYXRhIGFuZCB1c2VkIHRvIGluZmVyIGFuIG9iamVjdF9pZCBmb3IgcG9zdCBldmVudHMuXG5cdCAqICAgICBAcGFyYW0ge3RpbWV9IGZsb2F0IChPcHRpb25hbCwgYWRkZWQgYXV0b21hdGljYWxseSkgVGltZXN0YW1wIChpbiBtaWxsaXNlY29uZHMpLiBVc2VkIGZvciB0aGUgZXZlbnQgY3JlYXRpb24gZGF0ZS5cblx0ICogICAgIEBwYXJhbSB7aW50fSBvYmpfaWQgKE9wdGlvbmFsKS4gVGhlIG9iamVjdCBJRC4gSW5mZXJyZWQgYXV0b21hdGljYWxseSB2aWEgYHVybGAgaWYgbm90IHByb3ZpZGVkLlxuXHQgKiAgICAgQHBhcmFtIHtvYmp9IG1ldGEgKE9wdGlvbmFsKSBIYXNoIG9mIG1ldGFkYXRhIHRvIHN0b3JlIHdpdGggdGhlIGV2ZW50LlxuXHQgKiB9XG5cdCAqIEByZXR1cm4gb2JqXG5cdCAqL1xuXHR0aGlzLm1ha2VFdmVudE9iaiA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRyZXR1cm4gT2JqZWN0LmFzc2lnbiggZXZlbnQsIHtcblx0XHRcdHVybDogd2luZG93LmxvY2F0aW9uLmhyZWYsXG5cdFx0XHR0aW1lOiBNYXRoLnJvdW5kKCBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDAgKSxcblx0XHR9ICk7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBSZW1vdmUgdGhlIHZpc2liaWxpdHkgY2hhbmdlIGV2ZW50IGxpc3RlbmVyIG9uIHdpbmRvdy5iZWZvcmV1bmxvYWRcblx0ICpcblx0ICogUHJldmVudHMgYWN0dWFsIHVubG9hZGluZyBmcm9tIHJlY29yZGluZyBhIGJsdXIgZXZlbnQgZnJvbSB0aGUgdmlzaWJpbGl0eSBjaGFuZ2UgbGlzdGVuZXJcblx0ICpcblx0ICogQHBhcmFtIG9iaiBlIEpTIGV2ZW50IG9iamVjdC5cblx0ICogQHJldHVybiB2b2lkXG5cdCAqL1xuXHRmdW5jdGlvbiBvbkJlZm9yZVVubG9hZCggZSApIHtcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAndmlzaWJpbGl0eWNoYW5nZScsIG9uVmlzaWJpbGl0eUNoYW5nZSApO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlY29yZCBhIGBwYWdlLmV4aXRgIGV2ZW50IG9uIHdpbmRvdy51bmxvYWQuXG5cdCAqXG5cdCAqIEBzaW5jZSAzLjM2LjBcblx0ICpcblx0ICogQHBhcmFtIG9iaiBlIEpTIGV2ZW50IG9iamVjdC5cblx0ICogQHJldHVybiB2b2lkXG5cdCAqL1xuXHRmdW5jdGlvbiBvblVubG9hZCggZSApIHtcblx0XHRzZWxmLmFkZEV2ZW50KCAncGFnZS5leGl0JyApO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlY29yZCBgcGFnZS5ibHVyYCBhbmQgYHBhZ2UuZm9jdXNgIGV2ZW50cyB2aWEgZG9jdW1lbnQudmlzaWxpYml0eWNoYW5nZSBldmVudHMuXG5cdCAqXG5cdCAqIEBzaW5jZSAzLjM2LjBcblx0ICpcblx0ICogQHBhcmFtIG9iaiBlIEpTIGV2ZW50IG9iamVjdC5cblx0ICogQHJldHVybiB2b2lkXG5cdCAqL1xuXHRmdW5jdGlvbiBvblZpc2liaWxpdHlDaGFuZ2UoIGUgKSB7XG5cblx0XHR2YXIgZXZlbnQgPSBkb2N1bWVudC5oaWRkZW4gPyAncGFnZS5ibHVyJyA6ICdwYWdlLmZvY3VzJztcblx0XHRzZWxmLmFkZEV2ZW50KCBldmVudCApO1xuXG5cdH1cblxuXHQvLyBJbml0aWFsaXplIG9uIHRoZSBmcm9udGVuZCBvbmx5LlxuXHRpZiAoICEgJCggJ2JvZHknICkuaGFzQ2xhc3MoICd3cC1hZG1pbicgKSApIHtcblx0XHRpbml0KCk7XG5cdH1cblxufTtcblxubGxtcy50cmFja2luZyA9IG5ldyBMTE1TLlRyYWNraW5nKCBsbG1zLnRyYWNraW5nICk7XG4iLCIvKipcbiAqIFJlc3QgTWV0aG9kc1xuICogTWFuYWdlcyBVUkwgYW5kIFJlc3Qgb2JqZWN0IHBhcnNpbmdcbiAqXG4gKiBAcGFja2FnZSBMaWZ0ZXJMTVMvU2NyaXB0c1xuICpcbiAqIEBzaW5jZSBVbmtub3duXG4gKiBAdmVyc2lvbiAgVW5rbm93blxuICovXG5cbkxMTVMuUmVzdCA9IHtcblxuXHQvKipcblx0ICogSW5pdFxuXHQgKiBsb2FkcyBjbGFzcyBtZXRob2RzXG5cdCAqL1xuXHRpbml0OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmJpbmQoKTtcblx0fSxcblxuXHQvKipcblx0ICogQmluZCBNZXRob2Rcblx0ICogSGFuZGxlcyBkb20gYmluZGluZyBvbiBsb2FkXG5cdCAqXG5cdCAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxuXHQgKi9cblx0YmluZDogZnVuY3Rpb24oKSB7XG5cdH0sXG5cblx0LyoqXG5cdCAqIFNlYXJjaGVzIGZvciBzdHJpbmcgbWF0Y2hlcyBpbiB1cmwgcGF0aFxuXHQgKlxuXHQgKiBAcGFyYW0gIHtBcnJheX0gIHN0cmluZ3MgW0FycmF5IG9mIHN0cmluZ3MgdG8gc2VhcmNoIGZvciBtYXRjaGVzXVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgIFtXYXMgYSBtYXRjaCBmb3VuZD9dXG5cdCAqL1xuXHRpc19wYXRoOiBmdW5jdGlvbiggc3RyaW5ncyApIHtcblxuXHRcdHZhciBwYXRoX2V4aXN0cyA9IGZhbHNlLFxuXHRcdFx0dXJsICAgICAgICAgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblxuXHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBpKysgKSB7XG5cblx0XHRcdGlmICggdXJsLnNlYXJjaCggc3RyaW5nc1tpXSApID4gMCAmJiAhIHBhdGhfZXhpc3RzICkge1xuXG5cdFx0XHRcdHBhdGhfZXhpc3RzID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcGF0aF9leGlzdHM7XG5cdH0sXG5cblx0LyoqXG5cdCAqIFJldHJpZXZlcyBxdWVyeSB2YXJpYWJsZXNcblx0ICpcblx0ICogQHJldHVybiB7W0FycmF5XX0gW2FycmF5IG9iamVjdCBvZiBxdWVyeSB2YXJpYWJsZSBrZXk9PnZhbHVlIHBhaXJzXVxuXHQgKi9cblx0Z2V0X3F1ZXJ5X3ZhcnM6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIHZhcnMgICA9IFtdLCBoYXNoLFxuXHRcdFx0aGFzaGVzID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc2xpY2UoIHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoICc/JyApICsgMSApLnNwbGl0KCAnJicgKTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgaGFzaGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRoYXNoID0gaGFzaGVzW2ldLnNwbGl0KCAnPScgKTtcblx0XHRcdHZhcnMucHVzaCggaGFzaFswXSApO1xuXHRcdFx0dmFyc1toYXNoWzBdXSA9IGhhc2hbMV07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHZhcnM7XG5cdH1cblxufTtcbiJdfQ==
